<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Autumn Sample - elixir - github_light</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap" rel="stylesheet">
  <style>
    * {
      font-family: 'JetBrains Mono', monospace;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <pre class="autumn highlight" class="background" style="background-color: #ffffff; ">
<code class="language-elixir">
<span class="keyword" style="color: #cf222e;">defmodule</span> <span class="module" style="color: #953800; ">List</span> <span class="keyword" style="color: #cf222e;">do</span>
  <span class="comment" style="color: #57606a;">@</span><span class="comment" style="color: #57606a;">moduledoc</span> <span class="comment" style="color: #57606a;">&quot;&quot;&quot;</span>
<span class="comment" style="color: #57606a;">  Linked lists hold zero, one, or more elements in the chosen order.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  Lists in Elixir are specified between square brackets:</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; [1, &quot;two&quot;, 3, :four]</span>
<span class="comment" style="color: #57606a;">      [1, &quot;two&quot;, 3, :four]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  Two lists can be concatenated and subtracted using the</span>
<span class="comment" style="color: #57606a;">  `++/2` and `--/2` operators:</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; [1, 2, 3] ++ [4, 5, 6]</span>
<span class="comment" style="color: #57606a;">      [1, 2, 3, 4, 5, 6]</span>
<span class="comment" style="color: #57606a;">      iex&gt; [1, true, 2, false, 3, true] -- [true, false]</span>
<span class="comment" style="color: #57606a;">      [1, 2, 3, true]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  An element can be prepended to a list using `|`:</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; new = 0</span>
<span class="comment" style="color: #57606a;">      iex&gt; list = [1, 2, 3]</span>
<span class="comment" style="color: #57606a;">      iex&gt; [new | list]</span>
<span class="comment" style="color: #57606a;">      [0, 1, 2, 3]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  Lists in Elixir are effectively linked lists, which means</span>
<span class="comment" style="color: #57606a;">  they are internally represented in pairs containing the</span>
<span class="comment" style="color: #57606a;">  head and the tail of a list:</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; [head | tail] = [1, 2, 3]</span>
<span class="comment" style="color: #57606a;">      iex&gt; head</span>
<span class="comment" style="color: #57606a;">      1</span>
<span class="comment" style="color: #57606a;">      iex&gt; tail</span>
<span class="comment" style="color: #57606a;">      [2, 3]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  Similarly, we could write the list `[1, 2, 3]` using only</span>
<span class="comment" style="color: #57606a;">  such pairs (called cons cells):</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; [1 | [2 | [3 | []]]]</span>
<span class="comment" style="color: #57606a;">      [1, 2, 3]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  Some lists, called improper lists, do not have an empty list as</span>
<span class="comment" style="color: #57606a;">  the second element in the last cons cell:</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; [1 | [2 | [3 | 4]]]</span>
<span class="comment" style="color: #57606a;">      [1, 2, 3 | 4]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  Although improper lists are generally avoided, they are used in some</span>
<span class="comment" style="color: #57606a;">  special circumstances like iodata and chardata entities (see the `IO` module).</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  Due to their cons cell based representation, prepending an element</span>
<span class="comment" style="color: #57606a;">  to a list is always fast (constant time), while appending becomes</span>
<span class="comment" style="color: #57606a;">  slower as the list grows in size (linear time):</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; list = [1, 2, 3]</span>
<span class="comment" style="color: #57606a;">      iex&gt; [0 | list] # fast</span>
<span class="comment" style="color: #57606a;">      [0, 1, 2, 3]</span>
<span class="comment" style="color: #57606a;">      iex&gt; list ++ [4] # slow</span>
<span class="comment" style="color: #57606a;">      [1, 2, 3, 4]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  Most of the functions in this module work in linear time. This means that</span>
<span class="comment" style="color: #57606a;">  the time it takes to perform an operation grows at the same rate as the</span>
<span class="comment" style="color: #57606a;">  length of the list. For example `length/1` and `last/1` will run in linear</span>
<span class="comment" style="color: #57606a;">  time because they need to iterate through every element of the list, but</span>
<span class="comment" style="color: #57606a;">  `first/1` will run in constant time because it only needs the first element.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  Lists also implement the `Enumerable` protocol, so many functions to work with</span>
<span class="comment" style="color: #57606a;">  lists are found in the `Enum` module. Additionally, the following functions and</span>
<span class="comment" style="color: #57606a;">  operators for lists are found in `Kernel`:</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">    * `++/2`</span>
<span class="comment" style="color: #57606a;">    * `--/2`</span>
<span class="comment" style="color: #57606a;">    * `hd/1`</span>
<span class="comment" style="color: #57606a;">    * `tl/1`</span>
<span class="comment" style="color: #57606a;">    * `in/2`</span>
<span class="comment" style="color: #57606a;">    * `length/1`</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  ## Charlists</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  If a list is made of non-negative integers, where each integer represents a</span>
<span class="comment" style="color: #57606a;">  Unicode code point, the list can also be called a charlist. These integers</span>
<span class="comment" style="color: #57606a;">  must:</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">    * be within the range `0..0x10FFFF` (`0..1_114_111`);</span>
<span class="comment" style="color: #57606a;">    * and be out of the range `0xD800..0xDFFF` (`55_296..57_343`), which is</span>
<span class="comment" style="color: #57606a;">      reserved in Unicode for UTF-16 surrogate pairs.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  Elixir uses the [`~c` sigil](`sigil_c/2`) to define charlists:</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; ~c&quot;hÃ©llo&quot;</span>
<span class="comment" style="color: #57606a;">      [104, 233, 108, 108, 111]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  In particular, charlists will be printed back by default with the `~c`</span>
<span class="comment" style="color: #57606a;">  sigil if they contain only printable ASCII characters:</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; ~c&quot;abc&quot;</span>
<span class="comment" style="color: #57606a;">      ~c&quot;abc&quot;</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  Even though the representation changed, the raw data does remain a list of</span>
<span class="comment" style="color: #57606a;">  integers, which can be handled as such:</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; inspect(~c&quot;abc&quot;, charlists: :as_list)</span>
<span class="comment" style="color: #57606a;">      &quot;[97, 98, 99]&quot;</span>
<span class="comment" style="color: #57606a;">      iex&gt; Enum.map(~c&quot;abc&quot;, fn num -&gt; 1000 + num end)</span>
<span class="comment" style="color: #57606a;">      [1097, 1098, 1099]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  You can use the `IEx.Helpers.i/1` helper to get a condensed rundown on</span>
<span class="comment" style="color: #57606a;">  charlists in IEx when you encounter them, which shows you the type, description</span>
<span class="comment" style="color: #57606a;">  and also the raw representation in one single summary.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  The rationale behind this behaviour is to better support</span>
<span class="comment" style="color: #57606a;">  Erlang libraries which may return text as charlists</span>
<span class="comment" style="color: #57606a;">  instead of Elixir strings. In Erlang, charlists are the default</span>
<span class="comment" style="color: #57606a;">  way of handling strings, while in Elixir it&#39;s binaries. One</span>
<span class="comment" style="color: #57606a;">  example of such functions is `Application.loaded_applications/0`:</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      Application.loaded_applications()</span>
<span class="comment" style="color: #57606a;">      #=&gt;  [</span>
<span class="comment" style="color: #57606a;">      #=&gt;    {:stdlib, ~c&quot;ERTS  CXC 138 10&quot;, ~c&quot;2.6&quot;},</span>
<span class="comment" style="color: #57606a;">      #=&gt;    {:compiler, ~c&quot;ERTS  CXC 138 10&quot;, ~c&quot;6.0.1&quot;},</span>
<span class="comment" style="color: #57606a;">      #=&gt;    {:elixir, ~c&quot;elixir&quot;, ~c&quot;1.0.0&quot;},</span>
<span class="comment" style="color: #57606a;">      #=&gt;    {:kernel, ~c&quot;ERTS  CXC 138 10&quot;, ~c&quot;4.1&quot;},</span>
<span class="comment" style="color: #57606a;">      #=&gt;    {:logger, ~c&quot;logger&quot;, ~c&quot;1.0.0&quot;}</span>
<span class="comment" style="color: #57606a;">      #=&gt;  ]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  A list can be checked if it is made of only printable ASCII</span>
<span class="comment" style="color: #57606a;">  characters with `ascii_printable?/2`.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  Improper lists are never deemed as charlists.</span>
<span class="comment" style="color: #57606a;">  &quot;&quot;&quot;</span>

  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">compile</span> <span class="string" style="color: #0a3069;">:inline_list_funcs</span>

  <span class="comment" style="color: #57606a;">@</span><span class="comment" style="color: #57606a;">doc</span> <span class="comment" style="color: #57606a;">&quot;&quot;&quot;</span>
<span class="comment" style="color: #57606a;">  Deletes the given `element` from the `list`. Returns a new list without</span>
<span class="comment" style="color: #57606a;">  the element.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  If the `element` occurs more than once in the `list`, just</span>
<span class="comment" style="color: #57606a;">  the first occurrence is removed.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  ## Examples</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.delete([:a, :b, :c], :a)</span>
<span class="comment" style="color: #57606a;">      [:b, :c]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.delete([:a, :b, :c], :d)</span>
<span class="comment" style="color: #57606a;">      [:a, :b, :c]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.delete([:a, :b, :b, :c], :b)</span>
<span class="comment" style="color: #57606a;">      [:a, :b, :c]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.delete([], :b)</span>
<span class="comment" style="color: #57606a;">      []</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">delete</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">any</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">]</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">delete</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">...</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">any</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="variable" style="color: #24292f;">list</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">delete</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">element</span><span class="punctuation" style="color: #24292f;">)</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">delete</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">element</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">element</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="string" style="color: #0a3069;">do: </span><span class="variable" style="color: #24292f;">list</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">delete</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">other</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">element</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="string" style="color: #0a3069;">do: </span><span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">other</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="function" style="color: #8250df;">delete</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">element</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation" style="color: #24292f;">]</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">delete</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="comment" style="color: #57606a;">_element</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="string" style="color: #0a3069;">do: </span><span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">]</span>

  <span class="comment" style="color: #57606a;">@</span><span class="comment" style="color: #57606a;">doc</span> <span class="comment" style="color: #57606a;">&quot;&quot;&quot;</span>
<span class="comment" style="color: #57606a;">  Duplicates the given element `n` times in a list.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  `n` is an integer greater than or equal to `0`.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  If `n` is `0`, an empty list is returned.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  ## Examples</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.duplicate(&quot;hello&quot;, 0)</span>
<span class="comment" style="color: #57606a;">      []</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.duplicate(&quot;hi&quot;, 1)</span>
<span class="comment" style="color: #57606a;">      [&quot;hi&quot;]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.duplicate(&quot;bye&quot;, 2)</span>
<span class="comment" style="color: #57606a;">      [&quot;bye&quot;, &quot;bye&quot;]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.duplicate([1, 2], 3)</span>
<span class="comment" style="color: #57606a;">      [[1, 2], [1, 2], [1, 2]]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">duplicate</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">any</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="text" style="color: #57606a; ">0</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">]</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">duplicate</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">elem</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">pos_integer</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">elem</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">...</span><span class="punctuation" style="color: #24292f;">]</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="string" style="color: #0a3069;">elem: </span><span class="variable" style="color: #24292f;">var</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">duplicate</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">elem</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">n</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="module" style="color: #953800; ">:lists</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">duplicate</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">n</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">elem</span><span class="punctuation" style="color: #24292f;">)</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="comment" style="color: #57606a;">@</span><span class="comment" style="color: #57606a;">doc</span> <span class="comment" style="color: #57606a;">&quot;&quot;&quot;</span>
<span class="comment" style="color: #57606a;">  Flattens the given `list` of nested lists.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  Empty list elements are discarded.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  ## Examples</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.flatten([1, [[2], 3]])</span>
<span class="comment" style="color: #57606a;">      [1, 2, 3]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.flatten([[], [[], []]])</span>
<span class="comment" style="color: #57606a;">      []</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">flatten</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">deep_list</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="variable" style="color: #24292f;">list</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="string" style="color: #0a3069;">deep_list: </span><span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">any</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">deep_list</span><span class="punctuation" style="color: #24292f;">]</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">flatten</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="module" style="color: #953800; ">:lists</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">flatten</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="comment" style="color: #57606a;">@</span><span class="comment" style="color: #57606a;">doc</span> <span class="comment" style="color: #57606a;">&quot;&quot;&quot;</span>
<span class="comment" style="color: #57606a;">  Flattens the given `list` of nested lists.</span>
<span class="comment" style="color: #57606a;">  The list `tail` will be added at the end of</span>
<span class="comment" style="color: #57606a;">  the flattened list.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  Empty list elements from `list` are discarded,</span>
<span class="comment" style="color: #57606a;">  but not the ones from `tail`.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  ## Examples</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.flatten([1, [[2], 3]], [4, 5])</span>
<span class="comment" style="color: #57606a;">      [1, 2, 3, 4, 5]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.flatten([1, [], 2], [3, [], 4])</span>
<span class="comment" style="color: #57606a;">      [1, 2, 3, [], 4]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">flatten</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">deep_list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">elem</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">elem</span><span class="punctuation" style="color: #24292f;">]</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="string" style="color: #0a3069;">elem: </span><span class="variable" style="color: #24292f;">var</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="string" style="color: #0a3069;">deep_list: </span><span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">elem</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">deep_list</span><span class="punctuation" style="color: #24292f;">]</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">flatten</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">tail</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="module" style="color: #953800; ">:lists</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">flatten</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">tail</span><span class="punctuation" style="color: #24292f;">)</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="comment" style="color: #57606a;">@</span><span class="comment" style="color: #57606a;">doc</span> <span class="comment" style="color: #57606a;">&quot;&quot;&quot;</span>
<span class="comment" style="color: #57606a;">  Folds (reduces) the given list from the left with</span>
<span class="comment" style="color: #57606a;">  a function. Requires an accumulator, which can be any value.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  ## Examples</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.foldl([5, 5], 10, fn x, acc -&gt; x + acc end)</span>
<span class="comment" style="color: #57606a;">      20</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.foldl([1, 2, 3, 4], 0, fn x, acc -&gt; x - acc end)</span>
<span class="comment" style="color: #57606a;">      2</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.foldl([1, 2, 3], {0, 0}, fn x, {a1, a2} -&gt; {a1 + x, a2 - x} end)</span>
<span class="comment" style="color: #57606a;">      {6, -6}</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">foldl</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">elem</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">acc</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">elem</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">acc</span> <span class="operator" style="color: #0a3069; ">-&gt;</span> <span class="variable" style="color: #24292f;">acc</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="variable" style="color: #24292f;">acc</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="string" style="color: #0a3069;">elem: </span><span class="variable" style="color: #24292f;">var</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="string" style="color: #0a3069;">acc: </span><span class="variable" style="color: #24292f;">var</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">foldl</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">acc</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">fun</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="function" style="color: #8250df;">is_list</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">and</span> <span class="function" style="color: #8250df;">is_function</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">fun</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="module" style="color: #953800; ">:lists</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">foldl</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">fun</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">acc</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="comment" style="color: #57606a;">@</span><span class="comment" style="color: #57606a;">doc</span> <span class="comment" style="color: #57606a;">&quot;&quot;&quot;</span>
<span class="comment" style="color: #57606a;">  Folds (reduces) the given list from the right with</span>
<span class="comment" style="color: #57606a;">  a function. Requires an accumulator, which can be any value.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  ## Examples</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.foldr([1, 2, 3, 4], 0, fn x, acc -&gt; x - acc end)</span>
<span class="comment" style="color: #57606a;">      -2</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.foldr([1, 2, 3, 4], %{sum: 0, product: 1}, fn x, %{sum: a1, product: a2} -&gt; %{sum: a1 + x, product: a2 * x} end)</span>
<span class="comment" style="color: #57606a;">      %{product: 24, sum: 10}</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">foldr</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">elem</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">acc</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">elem</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">acc</span> <span class="operator" style="color: #0a3069; ">-&gt;</span> <span class="variable" style="color: #24292f;">acc</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="variable" style="color: #24292f;">acc</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="string" style="color: #0a3069;">elem: </span><span class="variable" style="color: #24292f;">var</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="string" style="color: #0a3069;">acc: </span><span class="variable" style="color: #24292f;">var</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">foldr</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">acc</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">fun</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="function" style="color: #8250df;">is_list</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">and</span> <span class="function" style="color: #8250df;">is_function</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">fun</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="module" style="color: #953800; ">:lists</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">foldr</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">fun</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">acc</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="comment" style="color: #57606a;">@</span><span class="comment" style="color: #57606a;">doc</span> <span class="comment" style="color: #57606a;">&quot;&quot;&quot;</span>
<span class="comment" style="color: #57606a;">  Returns the first element in `list` or `default` if `list` is empty.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  `first/2` has been introduced in Elixir v1.12.0, while `first/1` has been available since v1.0.0.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  ## Examples</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.first([])</span>
<span class="comment" style="color: #57606a;">      nil</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.first([], 1)</span>
<span class="comment" style="color: #57606a;">      1</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.first([1])</span>
<span class="comment" style="color: #57606a;">      1</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.first([1, 2, 3])</span>
<span class="comment" style="color: #57606a;">      1</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">first</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">any</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="variable" style="color: #24292f;">any</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">first</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">elem</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">...</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">any</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="variable" style="color: #24292f;">elem</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="string" style="color: #0a3069;">elem: </span><span class="variable" style="color: #24292f;">var</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">first</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">default</span> <span class="operator" style="color: #0a3069; ">\\</span> <span class="constant" style="color: #0550ae;">nil</span><span class="punctuation" style="color: #24292f;">)</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">first</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">default</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="string" style="color: #0a3069;">do: </span><span class="variable" style="color: #24292f;">default</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">first</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">head</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="comment" style="color: #57606a;">_</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="comment" style="color: #57606a;">_default</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="string" style="color: #0a3069;">do: </span><span class="variable" style="color: #24292f;">head</span>

  <span class="comment" style="color: #57606a;">@</span><span class="comment" style="color: #57606a;">doc</span> <span class="comment" style="color: #57606a;">&quot;&quot;&quot;</span>
<span class="comment" style="color: #57606a;">  Returns the last element in `list` or `default` if `list` is empty.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  `last/2` has been introduced in Elixir v1.12.0, while `last/1` has been available since v1.0.0.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  ## Examples</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.last([])</span>
<span class="comment" style="color: #57606a;">      nil</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.last([], 1)</span>
<span class="comment" style="color: #57606a;">      1</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.last([1])</span>
<span class="comment" style="color: #57606a;">      1</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.last([1, 2, 3])</span>
<span class="comment" style="color: #57606a;">      3</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">last</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">any</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="variable" style="color: #24292f;">any</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">last</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">elem</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">...</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">any</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="variable" style="color: #24292f;">elem</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="string" style="color: #0a3069;">elem: </span><span class="variable" style="color: #24292f;">var</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">compile</span> <span class="punctuation" style="color: #24292f;">{</span><span class="string" style="color: #0a3069;">:inline</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="string" style="color: #0a3069;">last: </span><span class="text" style="color: #57606a; ">2</span><span class="punctuation" style="color: #24292f;">}</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">last</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">default</span> <span class="operator" style="color: #0a3069; ">\\</span> <span class="constant" style="color: #0550ae;">nil</span><span class="punctuation" style="color: #24292f;">)</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">last</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">default</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="string" style="color: #0a3069;">do: </span><span class="variable" style="color: #24292f;">default</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">last</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">head</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="comment" style="color: #57606a;">_default</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="string" style="color: #0a3069;">do: </span><span class="variable" style="color: #24292f;">head</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">last</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="comment" style="color: #57606a;">_</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">tail</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">default</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="string" style="color: #0a3069;">do: </span><span class="function" style="color: #8250df;">last</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">tail</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">default</span><span class="punctuation" style="color: #24292f;">)</span>

  <span class="comment" style="color: #57606a;">@</span><span class="comment" style="color: #57606a;">doc</span> <span class="comment" style="color: #57606a;">&quot;&quot;&quot;</span>
<span class="comment" style="color: #57606a;">  Receives a list of tuples and returns the first tuple</span>
<span class="comment" style="color: #57606a;">  where the element at `position` in the tuple matches the</span>
<span class="comment" style="color: #57606a;">  given `key`.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  If no matching tuple is found, `default` is returned.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  ## Examples</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.keyfind([a: 1, b: 2], :a, 0)</span>
<span class="comment" style="color: #57606a;">      {:a, 1}</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.keyfind([a: 1, b: 2], 2, 1)</span>
<span class="comment" style="color: #57606a;">      {:b, 2}</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.keyfind([a: 1, b: 2], :c, 0)</span>
<span class="comment" style="color: #57606a;">      nil</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  This function works for any list of tuples:</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.keyfind([{22, &quot;SSH&quot;}, {80, &quot;HTTP&quot;}], 22, 0)</span>
<span class="comment" style="color: #57606a;">      {22, &quot;SSH&quot;}</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">keyfind</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">tuple</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">any</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">non_neg_integer</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">any</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="variable" style="color: #24292f;">any</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">keyfind</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">key</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">position</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">default</span> <span class="operator" style="color: #0a3069; ">\\</span> <span class="constant" style="color: #0550ae;">nil</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="function" style="color: #8250df;">is_integer</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">position</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="module" style="color: #953800; ">:lists</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">keyfind</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">key</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">position</span> <span class="operator" style="color: #0a3069; ">+</span> <span class="text" style="color: #57606a; ">1</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">||</span> <span class="variable" style="color: #24292f;">default</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="comment" style="color: #57606a;">@</span><span class="comment" style="color: #57606a;">doc</span> <span class="comment" style="color: #57606a;">&quot;&quot;&quot;</span>
<span class="comment" style="color: #57606a;">  Receives a list of tuples and returns the first tuple</span>
<span class="comment" style="color: #57606a;">  where the element at `position` in the tuple matches the</span>
<span class="comment" style="color: #57606a;">  given `key`.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  If no matching tuple is found, an error is raised.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  ## Examples</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.keyfind!([a: 1, b: 2], :a, 0)</span>
<span class="comment" style="color: #57606a;">      {:a, 1}</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.keyfind!([a: 1, b: 2], 2, 1)</span>
<span class="comment" style="color: #57606a;">      {:b, 2}</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.keyfind!([a: 1, b: 2], :c, 0)</span>
<span class="comment" style="color: #57606a;">      ** (KeyError) key :c at position 0 not found in: [a: 1, b: 2]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  This function works for any list of tuples:</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.keyfind!([{22, &quot;SSH&quot;}, {80, &quot;HTTP&quot;}], 22, 0)</span>
<span class="comment" style="color: #57606a;">      {22, &quot;SSH&quot;}</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">doc</span> <span class="string" style="color: #0a3069;">since: </span><span class="string" style="color: #0a3069;">&quot;1.13.0&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">keyfind!</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">tuple</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">any</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">non_neg_integer</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="variable" style="color: #24292f;">any</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">keyfind!</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">key</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">position</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="function" style="color: #8250df;">is_integer</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">position</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="module" style="color: #953800; ">:lists</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">keyfind</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">key</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">position</span> <span class="operator" style="color: #0a3069; ">+</span> <span class="text" style="color: #57606a; ">1</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">||</span>
      <span class="keyword" style="color: #cf222e;">raise</span> <span class="module" style="color: #953800; ">KeyError</span><span class="punctuation delimiter" style="color: #24292f;">,</span>
        <span class="string" style="color: #0a3069;">key: </span><span class="variable" style="color: #24292f;">key</span><span class="punctuation delimiter" style="color: #24292f;">,</span>
        <span class="string" style="color: #0a3069;">term: </span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span>
        <span class="string" style="color: #0a3069;">message:</span>
<span class="string" style="color: #0a3069;"></span>          <span class="string" style="color: #0a3069;">&quot;key <span class="text" style="color: #57606a; "><span class="punctuation" style="color: #24292f;">#{</span><span class="function" style="color: #8250df;">inspect</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">key</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation" style="color: #24292f;">}</span></span> at position <span class="text" style="color: #57606a; "><span class="punctuation" style="color: #24292f;">#{</span><span class="function" style="color: #8250df;">inspect</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">position</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation" style="color: #24292f;">}</span></span> not found in: <span class="text" style="color: #57606a; "><span class="punctuation" style="color: #24292f;">#{</span><span class="function" style="color: #8250df;">inspect</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation" style="color: #24292f;">}</span></span>&quot;</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="comment" style="color: #57606a;">@</span><span class="comment" style="color: #57606a;">doc</span> <span class="comment" style="color: #57606a;">&quot;&quot;&quot;</span>
<span class="comment" style="color: #57606a;">  Receives a list of tuples and returns `true` if there is</span>
<span class="comment" style="color: #57606a;">  a tuple where the element at `position` in the tuple matches</span>
<span class="comment" style="color: #57606a;">  the given `key`.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  ## Examples</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.keymember?([a: 1, b: 2], :a, 0)</span>
<span class="comment" style="color: #57606a;">      true</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.keymember?([a: 1, b: 2], 2, 1)</span>
<span class="comment" style="color: #57606a;">      true</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.keymember?([a: 1, b: 2], :c, 0)</span>
<span class="comment" style="color: #57606a;">      false</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  This function works for any list of tuples:</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.keymember?([{22, &quot;SSH&quot;}, {80, &quot;HTTP&quot;}], 22, 0)</span>
<span class="comment" style="color: #57606a;">      true</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">keymember?</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">tuple</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">any</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">non_neg_integer</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="variable" style="color: #24292f;">boolean</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">keymember?</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">key</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">position</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="function" style="color: #8250df;">is_integer</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">position</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="module" style="color: #953800; ">:lists</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">keymember</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">key</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">position</span> <span class="operator" style="color: #0a3069; ">+</span> <span class="text" style="color: #57606a; ">1</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="comment" style="color: #57606a;">@</span><span class="comment" style="color: #57606a;">doc</span> <span class="comment" style="color: #57606a;">&quot;&quot;&quot;</span>
<span class="comment" style="color: #57606a;">  Receives a list of tuples and if the identified element by `key` at `position`</span>
<span class="comment" style="color: #57606a;">  exists, it is replaced with `new_tuple`.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  ## Examples</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.keyreplace([a: 1, b: 2], :a, 0, {:a, 3})</span>
<span class="comment" style="color: #57606a;">      [a: 3, b: 2]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.keyreplace([a: 1, b: 2], :a, 1, {:a, 3})</span>
<span class="comment" style="color: #57606a;">      [a: 1, b: 2]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  This function works for any list of tuples:</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.keyreplace([{22, &quot;SSH&quot;}, {80, &quot;HTTP&quot;}], 22, 0, {22, &quot;Secure Shell&quot;})</span>
<span class="comment" style="color: #57606a;">      [{22, &quot;Secure Shell&quot;}, {80, &quot;HTTP&quot;}]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">keyreplace</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">tuple</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">any</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">non_neg_integer</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">tuple</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">tuple</span><span class="punctuation" style="color: #24292f;">]</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">keyreplace</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">key</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">position</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">new_tuple</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="function" style="color: #8250df;">is_integer</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">position</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="module" style="color: #953800; ">:lists</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">keyreplace</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">key</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">position</span> <span class="operator" style="color: #0a3069; ">+</span> <span class="text" style="color: #57606a; ">1</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">new_tuple</span><span class="punctuation" style="color: #24292f;">)</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="comment" style="color: #57606a;">@</span><span class="comment" style="color: #57606a;">doc</span> <span class="comment" style="color: #57606a;">&quot;&quot;&quot;</span>
<span class="comment" style="color: #57606a;">  Receives a list of tuples and sorts the elements</span>
<span class="comment" style="color: #57606a;">  at `position` of the tuples.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  The sort is stable.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  A `sorter` argument is available since Elixir v1.14.0. Similar to</span>
<span class="comment" style="color: #57606a;">  `Enum.sort/2`, the sorter can be an anonymous function, the atoms</span>
<span class="comment" style="color: #57606a;">  `:asc` or `:desc`, or module that implements a compare function.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  ## Examples</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.keysort([a: 5, b: 1, c: 3], 1)</span>
<span class="comment" style="color: #57606a;">      [b: 1, c: 3, a: 5]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.keysort([a: 5, c: 1, b: 3], 0)</span>
<span class="comment" style="color: #57606a;">      [a: 5, b: 3, c: 1]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  To sort in descending order:</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.keysort([a: 5, c: 1, b: 3], 0, :desc)</span>
<span class="comment" style="color: #57606a;">      [c: 1, b: 3, a: 5]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  As in `Enum.sort/2`, avoid using the default sorting function to sort</span>
<span class="comment" style="color: #57606a;">  structs, as by default it performs structural comparison instead of a</span>
<span class="comment" style="color: #57606a;">  semantic one. In such cases, you shall pass a sorting function as third</span>
<span class="comment" style="color: #57606a;">  element or any module that implements a `compare/2` function. For example,</span>
<span class="comment" style="color: #57606a;">  if you have tuples with user names and their birthday, and you want to</span>
<span class="comment" style="color: #57606a;">  sort on their birthday, in both ascending and descending order, you should</span>
<span class="comment" style="color: #57606a;">  do:</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; users = [</span>
<span class="comment" style="color: #57606a;">      ...&gt;   {&quot;Ellis&quot;, ~D[1943-05-11]},</span>
<span class="comment" style="color: #57606a;">      ...&gt;   {&quot;Lovelace&quot;, ~D[1815-12-10]},</span>
<span class="comment" style="color: #57606a;">      ...&gt;   {&quot;Turing&quot;, ~D[1912-06-23]}</span>
<span class="comment" style="color: #57606a;">      ...&gt; ]</span>
<span class="comment" style="color: #57606a;">      iex&gt; List.keysort(users, 1, Date)</span>
<span class="comment" style="color: #57606a;">      [</span>
<span class="comment" style="color: #57606a;">        {&quot;Lovelace&quot;, ~D[1815-12-10]},</span>
<span class="comment" style="color: #57606a;">        {&quot;Turing&quot;, ~D[1912-06-23]},</span>
<span class="comment" style="color: #57606a;">        {&quot;Ellis&quot;, ~D[1943-05-11]}</span>
<span class="comment" style="color: #57606a;">      ]</span>
<span class="comment" style="color: #57606a;">      iex&gt; List.keysort(users, 1, {:desc, Date})</span>
<span class="comment" style="color: #57606a;">      [</span>
<span class="comment" style="color: #57606a;">        {&quot;Ellis&quot;, ~D[1943-05-11]},</span>
<span class="comment" style="color: #57606a;">        {&quot;Turing&quot;, ~D[1912-06-23]},</span>
<span class="comment" style="color: #57606a;">        {&quot;Lovelace&quot;, ~D[1815-12-10]}</span>
<span class="comment" style="color: #57606a;">      ]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">doc</span> <span class="string" style="color: #0a3069;">since: </span><span class="string" style="color: #0a3069;">&quot;1.14.0&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">keysort</span><span class="punctuation" style="color: #24292f;">(</span>
          <span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">tuple</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span>
          <span class="variable" style="color: #24292f;">non_neg_integer</span><span class="punctuation delimiter" style="color: #24292f;">,</span>
          <span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">any</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">any</span> <span class="operator" style="color: #0a3069; ">-&gt;</span> <span class="variable" style="color: #24292f;">boolean</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="string" style="color: #0a3069;">:asc</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="string" style="color: #0a3069;">:desc</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="function" style="color: #8250df;">module</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="punctuation" style="color: #24292f;">{</span><span class="string" style="color: #0a3069;">:asc</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="string" style="color: #0a3069;">:desc</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="function" style="color: #8250df;">module</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation" style="color: #24292f;">}</span>
        <span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">tuple</span><span class="punctuation" style="color: #24292f;">]</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">keysort</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">position</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">sorter</span> <span class="operator" style="color: #0a3069; ">\\</span> <span class="string" style="color: #0a3069;">:asc</span><span class="punctuation" style="color: #24292f;">)</span>

  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">keysort</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">position</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="string" style="color: #0a3069;">:asc</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="function" style="color: #8250df;">is_list</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">and</span> <span class="function" style="color: #8250df;">is_integer</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">position</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="module" style="color: #953800; ">:lists</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">keysort</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">position</span> <span class="operator" style="color: #0a3069; ">+</span> <span class="text" style="color: #57606a; ">1</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">keysort</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">position</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">sorter</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="function" style="color: #8250df;">is_list</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">and</span> <span class="function" style="color: #8250df;">is_integer</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">position</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="module" style="color: #953800; ">:lists</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">sort</span><span class="punctuation" style="color: #24292f;">(</span><span class="function" style="color: #8250df;">keysort_fun</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">sorter</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">position</span> <span class="operator" style="color: #0a3069; ">+</span> <span class="text" style="color: #57606a; ">1</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">keysort_fun</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">sorter</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">position</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="function" style="color: #8250df;">is_function</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">sorter</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="text" style="color: #57606a; ">2</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation delimiter" style="color: #24292f;">,</span>
    <span class="string" style="color: #0a3069;">do: </span><span class="operator" style="color: #0a3069; ">&amp;</span><span class="variable" style="color: #24292f;">sorter</span><span class="operator" style="color: #0a3069; ">.</span><span class="punctuation" style="color: #24292f;">(</span><span class="module" style="color: #953800; ">:erlang</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">element</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">position</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="operator" style="color: #0a3069; ">&amp;</span><span class="operator" style="color: #0a3069; ">1</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="module" style="color: #953800; ">:erlang</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">element</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">position</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="operator" style="color: #0a3069; ">&amp;</span><span class="operator" style="color: #0a3069; ">2</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation" style="color: #24292f;">)</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">keysort_fun</span><span class="punctuation" style="color: #24292f;">(</span><span class="string" style="color: #0a3069;">:desc</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">position</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation delimiter" style="color: #24292f;">,</span>
    <span class="string" style="color: #0a3069;">do: </span><span class="operator" style="color: #0a3069; ">&amp;</span><span class="punctuation" style="color: #24292f;">(</span><span class="module" style="color: #953800; ">:erlang</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">element</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">position</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="operator" style="color: #0a3069; ">&amp;</span><span class="operator" style="color: #0a3069; ">1</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">&gt;=</span> <span class="module" style="color: #953800; ">:erlang</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">element</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">position</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="operator" style="color: #0a3069; ">&amp;</span><span class="operator" style="color: #0a3069; ">2</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation" style="color: #24292f;">)</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">keysort_fun</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">module</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">position</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="function" style="color: #8250df;">is_atom</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">module</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation delimiter" style="color: #24292f;">,</span>
    <span class="string" style="color: #0a3069;">do: </span><span class="operator" style="color: #0a3069; ">&amp;</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">module</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">compare</span><span class="punctuation" style="color: #24292f;">(</span><span class="module" style="color: #953800; ">:erlang</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">element</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">position</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="operator" style="color: #0a3069; ">&amp;</span><span class="operator" style="color: #0a3069; ">1</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="module" style="color: #953800; ">:erlang</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">element</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">position</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="operator" style="color: #0a3069; ">&amp;</span><span class="operator" style="color: #0a3069; ">2</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">!=</span> <span class="string" style="color: #0a3069;">:gt</span><span class="punctuation" style="color: #24292f;">)</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">keysort_fun</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">{</span><span class="string" style="color: #0a3069;">:asc</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">module</span><span class="punctuation" style="color: #24292f;">}</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">position</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="function" style="color: #8250df;">is_atom</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">module</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation delimiter" style="color: #24292f;">,</span>
    <span class="string" style="color: #0a3069;">do: </span><span class="operator" style="color: #0a3069; ">&amp;</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">module</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">compare</span><span class="punctuation" style="color: #24292f;">(</span><span class="module" style="color: #953800; ">:erlang</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">element</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">position</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="operator" style="color: #0a3069; ">&amp;</span><span class="operator" style="color: #0a3069; ">1</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="module" style="color: #953800; ">:erlang</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">element</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">position</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="operator" style="color: #0a3069; ">&amp;</span><span class="operator" style="color: #0a3069; ">2</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">!=</span> <span class="string" style="color: #0a3069;">:gt</span><span class="punctuation" style="color: #24292f;">)</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">keysort_fun</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">{</span><span class="string" style="color: #0a3069;">:desc</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">module</span><span class="punctuation" style="color: #24292f;">}</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">position</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="function" style="color: #8250df;">is_atom</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">module</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation delimiter" style="color: #24292f;">,</span>
    <span class="string" style="color: #0a3069;">do: </span><span class="operator" style="color: #0a3069; ">&amp;</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">module</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">compare</span><span class="punctuation" style="color: #24292f;">(</span><span class="module" style="color: #953800; ">:erlang</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">element</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">position</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="operator" style="color: #0a3069; ">&amp;</span><span class="operator" style="color: #0a3069; ">1</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="module" style="color: #953800; ">:erlang</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">element</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">position</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="operator" style="color: #0a3069; ">&amp;</span><span class="operator" style="color: #0a3069; ">2</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">!=</span> <span class="string" style="color: #0a3069;">:lt</span><span class="punctuation" style="color: #24292f;">)</span>

  <span class="comment" style="color: #57606a;">@</span><span class="comment" style="color: #57606a;">doc</span> <span class="comment" style="color: #57606a;">&quot;&quot;&quot;</span>
<span class="comment" style="color: #57606a;">  Receives a `list` of tuples and replaces the element</span>
<span class="comment" style="color: #57606a;">  identified by `key` at `position` with `new_tuple`.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  If the element does not exist, it is added to the end of the `list`.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  ## Examples</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.keystore([a: 1, b: 2], :a, 0, {:a, 3})</span>
<span class="comment" style="color: #57606a;">      [a: 3, b: 2]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.keystore([a: 1, b: 2], :c, 0, {:c, 3})</span>
<span class="comment" style="color: #57606a;">      [a: 1, b: 2, c: 3]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  This function works for any list of tuples:</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.keystore([{22, &quot;SSH&quot;}], 80, 0, {80, &quot;HTTP&quot;})</span>
<span class="comment" style="color: #57606a;">      [{22, &quot;SSH&quot;}, {80, &quot;HTTP&quot;}]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">keystore</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">tuple</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">any</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">non_neg_integer</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">tuple</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">tuple</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">...</span><span class="punctuation" style="color: #24292f;">]</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">keystore</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">key</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">position</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">new_tuple</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="function" style="color: #8250df;">is_integer</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">position</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="module" style="color: #953800; ">:lists</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">keystore</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">key</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">position</span> <span class="operator" style="color: #0a3069; ">+</span> <span class="text" style="color: #57606a; ">1</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">new_tuple</span><span class="punctuation" style="color: #24292f;">)</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="comment" style="color: #57606a;">@</span><span class="comment" style="color: #57606a;">doc</span> <span class="comment" style="color: #57606a;">&quot;&quot;&quot;</span>
<span class="comment" style="color: #57606a;">  Receives a `list` of tuples and deletes the first tuple</span>
<span class="comment" style="color: #57606a;">  where the element at `position` matches the</span>
<span class="comment" style="color: #57606a;">  given `key`. Returns the new list.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  ## Examples</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.keydelete([a: 1, b: 2], :a, 0)</span>
<span class="comment" style="color: #57606a;">      [b: 2]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.keydelete([a: 1, b: 2], 2, 1)</span>
<span class="comment" style="color: #57606a;">      [a: 1]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.keydelete([a: 1, b: 2], :c, 0)</span>
<span class="comment" style="color: #57606a;">      [a: 1, b: 2]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  This function works for any list of tuples:</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.keydelete([{22, &quot;SSH&quot;}, {80, &quot;HTTP&quot;}], 80, 0)</span>
<span class="comment" style="color: #57606a;">      [{22, &quot;SSH&quot;}]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">keydelete</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">tuple</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">any</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">non_neg_integer</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">tuple</span><span class="punctuation" style="color: #24292f;">]</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">keydelete</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">key</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">position</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="function" style="color: #8250df;">is_integer</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">position</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="module" style="color: #953800; ">:lists</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">keydelete</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">key</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">position</span> <span class="operator" style="color: #0a3069; ">+</span> <span class="text" style="color: #57606a; ">1</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="comment" style="color: #57606a;">@</span><span class="comment" style="color: #57606a;">doc</span> <span class="comment" style="color: #57606a;">&quot;&quot;&quot;</span>
<span class="comment" style="color: #57606a;">  Receives a `list` of tuples and returns the first tuple</span>
<span class="comment" style="color: #57606a;">  where the element at `position` in the tuple matches the</span>
<span class="comment" style="color: #57606a;">  given `key`, as well as the `list` without found tuple.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  If such a tuple is not found, `nil` will be returned.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  ## Examples</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.keytake([a: 1, b: 2], :a, 0)</span>
<span class="comment" style="color: #57606a;">      {{:a, 1}, [b: 2]}</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.keytake([a: 1, b: 2], 2, 1)</span>
<span class="comment" style="color: #57606a;">      {{:b, 2}, [a: 1]}</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.keytake([a: 1, b: 2], :c, 0)</span>
<span class="comment" style="color: #57606a;">      nil</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  This function works for any list of tuples:</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.keytake([{22, &quot;SSH&quot;}, {80, &quot;HTTP&quot;}], 80, 0)</span>
<span class="comment" style="color: #57606a;">      {{80, &quot;HTTP&quot;}, [{22, &quot;SSH&quot;}]}</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">keytake</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">tuple</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">any</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">non_neg_integer</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="punctuation" style="color: #24292f;">{</span><span class="variable" style="color: #24292f;">tuple</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">tuple</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation" style="color: #24292f;">}</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="constant" style="color: #0550ae;">nil</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">keytake</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">key</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">position</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="function" style="color: #8250df;">is_integer</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">position</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="keyword" style="color: #cf222e;">case</span> <span class="module" style="color: #953800; ">:lists</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">keytake</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">key</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">position</span> <span class="operator" style="color: #0a3069; ">+</span> <span class="text" style="color: #57606a; ">1</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
      <span class="punctuation" style="color: #24292f;">{</span><span class="string" style="color: #0a3069;">:value</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">element</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">}</span> <span class="operator" style="color: #0a3069; ">-&gt;</span> <span class="punctuation" style="color: #24292f;">{</span><span class="variable" style="color: #24292f;">element</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">}</span>
      <span class="constant" style="color: #0550ae;">false</span> <span class="operator" style="color: #0a3069; ">-&gt;</span> <span class="constant" style="color: #0550ae;">nil</span>
    <span class="keyword" style="color: #cf222e;">end</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="comment" style="color: #57606a;">@</span><span class="comment" style="color: #57606a;">doc</span> <span class="comment" style="color: #57606a;">&quot;&quot;&quot;</span>
<span class="comment" style="color: #57606a;">  Wraps `term` in a list if this is not list.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  If `term` is already a list, it returns the list.</span>
<span class="comment" style="color: #57606a;">  If `term` is `nil`, it returns an empty list.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  ## Examples</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.wrap(&quot;hello&quot;)</span>
<span class="comment" style="color: #57606a;">      [&quot;hello&quot;]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.wrap([1, 2, 3])</span>
<span class="comment" style="color: #57606a;">      [1, 2, 3]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.wrap(nil)</span>
<span class="comment" style="color: #57606a;">      []</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">wrap</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">term</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="function" style="color: #8250df;">maybe_improper_list</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">)</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">wrap</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">term</span><span class="punctuation" style="color: #24292f;">)</span>

  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">wrap</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="function" style="color: #8250df;">is_list</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="variable" style="color: #24292f;">list</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">wrap</span><span class="punctuation" style="color: #24292f;">(</span><span class="constant" style="color: #0550ae;">nil</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">]</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">wrap</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">other</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">other</span><span class="punctuation" style="color: #24292f;">]</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="comment" style="color: #57606a;">@</span><span class="comment" style="color: #57606a;">doc</span> <span class="comment" style="color: #57606a;">&quot;&quot;&quot;</span>
<span class="comment" style="color: #57606a;">  Zips corresponding elements from each list in `list_of_lists`.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  The zipping finishes as soon as any list terminates.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  ## Examples</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.zip([[1, 2], [3, 4], [5, 6]])</span>
<span class="comment" style="color: #57606a;">      [{1, 3, 5}, {2, 4, 6}]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.zip([[1, 2], [3], [5, 6]])</span>
<span class="comment" style="color: #57606a;">      [{1, 3, 5}]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">zip</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">tuple</span><span class="punctuation" style="color: #24292f;">]</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">zip</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="string" style="color: #0a3069;">do: </span><span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">]</span>

  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">zip</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list_of_lists</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="function" style="color: #8250df;">is_list</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list_of_lists</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="function" style="color: #8250df;">do_zip</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list_of_lists</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation" style="color: #24292f;">)</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="comment" style="color: #57606a;">@</span><span class="comment" style="color: #57606a;">doc</span> <span class="comment" style="color: #57606a;">~S<span class="comment" style="color: #57606a;">&quot;&quot;&quot;</span></span>
<span class="comment" style="color: #57606a;">  Checks if `list` is a charlist made only of printable ASCII characters.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  Takes an optional `limit` as a second argument. `ascii_printable?/2` only</span>
<span class="comment" style="color: #57606a;">  checks the printability of the list up to the `limit`.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  A printable charlist in Elixir contains only the printable characters in the</span>
<span class="comment" style="color: #57606a;">  standard seven-bit ASCII character encoding, which are characters ranging from</span>
<span class="comment" style="color: #57606a;">  32 to 126 in decimal notation, plus the following control characters:</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">    * `?\a` - Bell</span>
<span class="comment" style="color: #57606a;">    * `?\b` - Backspace</span>
<span class="comment" style="color: #57606a;">    * `?\t` - Horizontal tab</span>
<span class="comment" style="color: #57606a;">    * `?\n` - Line feed</span>
<span class="comment" style="color: #57606a;">    * `?\v` - Vertical tab</span>
<span class="comment" style="color: #57606a;">    * `?\f` - Form feed</span>
<span class="comment" style="color: #57606a;">    * `?\r` - Carriage return</span>
<span class="comment" style="color: #57606a;">    * `?\e` - Escape</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  For more information read the [Character groups](https://en.wikipedia.org/wiki/ASCII#Character_groups)</span>
<span class="comment" style="color: #57606a;">  section in the Wikipedia article of the [ASCII](https://en.wikipedia.org/wiki/ASCII) standard.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  ## Examples</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.ascii_printable?(~c&quot;abc&quot;)</span>
<span class="comment" style="color: #57606a;">      true</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.ascii_printable?(~c&quot;abc&quot; ++ [0])</span>
<span class="comment" style="color: #57606a;">      false</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.ascii_printable?(~c&quot;abc&quot; ++ [0], 2)</span>
<span class="comment" style="color: #57606a;">      true</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  Improper lists are not printable, even if made only of ASCII characters:</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.ascii_printable?(~c&quot;abc&quot; ++ ?d)</span>
<span class="comment" style="color: #57606a;">      false</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  <span class="comment" style="color: #57606a;">&quot;&quot;&quot;</span></span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">doc</span> <span class="string" style="color: #0a3069;">since: </span><span class="string" style="color: #0a3069;">&quot;1.6.0&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">ascii_printable?</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="text" style="color: #57606a; ">0</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="constant" style="color: #0550ae;">true</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">ascii_printable?</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">limit</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="constant" style="color: #0550ae;">true</span>
        <span class="keyword" style="color: #cf222e;">when</span> <span class="string" style="color: #0a3069;">limit: </span><span class="string" style="color: #0a3069;">:infinity</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">pos_integer</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">ascii_printable?</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">...</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">limit</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="variable" style="color: #24292f;">boolean</span>
        <span class="keyword" style="color: #cf222e;">when</span> <span class="string" style="color: #0a3069;">limit: </span><span class="string" style="color: #0a3069;">:infinity</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">pos_integer</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">ascii_printable?</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">limit</span> <span class="operator" style="color: #0a3069; ">\\</span> <span class="string" style="color: #0a3069;">:infinity</span><span class="punctuation" style="color: #24292f;">)</span>
      <span class="keyword" style="color: #cf222e;">when</span> <span class="function" style="color: #8250df;">is_list</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">and</span> <span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">limit</span> <span class="operator" style="color: #0a3069; ">==</span> <span class="string" style="color: #0a3069;">:infinity</span> <span class="keyword" style="color: #cf222e;">or</span> <span class="punctuation" style="color: #24292f;">(</span><span class="function" style="color: #8250df;">is_integer</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">limit</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">and</span> <span class="variable" style="color: #24292f;">limit</span> <span class="operator" style="color: #0a3069; ">&gt;=</span> <span class="text" style="color: #57606a; ">0</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="function" style="color: #8250df;">ascii_printable_guarded?</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">limit</span><span class="punctuation" style="color: #24292f;">)</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">ascii_printable_guarded?</span><span class="punctuation" style="color: #24292f;">(</span><span class="comment" style="color: #57606a;">_</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="text" style="color: #57606a; ">0</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="constant" style="color: #0550ae;">true</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">ascii_printable_guarded?</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">char</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">rest</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">counter</span><span class="punctuation" style="color: #24292f;">)</span>
       <span class="comment" style="color: #57606a;"># 7..13 is the range &#39;\a\b\t\n\v\f\r&#39;. 32..126 are ASCII printables.</span>
       <span class="keyword" style="color: #cf222e;">when</span> <span class="function" style="color: #8250df;">is_integer</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">char</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">and</span>
              <span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">char</span> <span class="operator" style="color: #0a3069; ">&gt;=</span> <span class="text" style="color: #57606a; ">7</span> <span class="keyword" style="color: #cf222e;">and</span> <span class="variable" style="color: #24292f;">char</span> <span class="operator" style="color: #0a3069; ">&lt;=</span> <span class="text" style="color: #57606a; ">13</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">or</span> <span class="variable" style="color: #24292f;">char</span> <span class="operator" style="color: #0a3069; ">==</span> <span class="constant" style="color: #0550ae;">?\e</span> <span class="keyword" style="color: #cf222e;">or</span> <span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">char</span> <span class="operator" style="color: #0a3069; ">&gt;=</span> <span class="text" style="color: #57606a; ">32</span> <span class="keyword" style="color: #cf222e;">and</span> <span class="variable" style="color: #24292f;">char</span> <span class="operator" style="color: #0a3069; ">&lt;=</span> <span class="text" style="color: #57606a; ">126</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="function" style="color: #8250df;">ascii_printable_guarded?</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">rest</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="function" style="color: #8250df;">decrement</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">counter</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation" style="color: #24292f;">)</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">ascii_printable_guarded?</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="comment" style="color: #57606a;">_counter</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="string" style="color: #0a3069;">do: </span><span class="constant" style="color: #0550ae;">true</span>
  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">ascii_printable_guarded?</span><span class="punctuation" style="color: #24292f;">(</span><span class="comment" style="color: #57606a;">_</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="comment" style="color: #57606a;">_counter</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="string" style="color: #0a3069;">do: </span><span class="constant" style="color: #0550ae;">false</span>

  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">compile</span> <span class="punctuation" style="color: #24292f;">{</span><span class="string" style="color: #0a3069;">:inline</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="string" style="color: #0a3069;">decrement: </span><span class="text" style="color: #57606a; ">1</span><span class="punctuation" style="color: #24292f;">}</span>
  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">decrement</span><span class="punctuation" style="color: #24292f;">(</span><span class="string" style="color: #0a3069;">:infinity</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="string" style="color: #0a3069;">do: </span><span class="string" style="color: #0a3069;">:infinity</span>
  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">decrement</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">counter</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="string" style="color: #0a3069;">do: </span><span class="variable" style="color: #24292f;">counter</span> <span class="operator" style="color: #0a3069; ">-</span> <span class="text" style="color: #57606a; ">1</span>

  <span class="comment" style="color: #57606a;">@</span><span class="comment" style="color: #57606a;">doc</span> <span class="comment" style="color: #57606a;">&quot;&quot;&quot;</span>
<span class="comment" style="color: #57606a;">  Returns `true` if `list` is an improper list. Otherwise returns `false`.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  ## Examples</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.improper?([1, 2 | 3])</span>
<span class="comment" style="color: #57606a;">      true</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.improper?([1, 2, 3])</span>
<span class="comment" style="color: #57606a;">      false</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">doc</span> <span class="string" style="color: #0a3069;">since: </span><span class="string" style="color: #0a3069;">&quot;1.8.0&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">improper?</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">maybe_improper_list</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="variable" style="color: #24292f;">boolean</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">improper?</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="function" style="color: #8250df;">is_list</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">and</span> <span class="function" style="color: #8250df;">length</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">&gt;=</span> <span class="text" style="color: #57606a; ">0</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="string" style="color: #0a3069;">do: </span><span class="constant" style="color: #0550ae;">false</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">improper?</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="function" style="color: #8250df;">is_list</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="string" style="color: #0a3069;">do: </span><span class="constant" style="color: #0550ae;">true</span>

  <span class="comment" style="color: #57606a;">@</span><span class="comment" style="color: #57606a;">doc</span> <span class="comment" style="color: #57606a;">&quot;&quot;&quot;</span>
<span class="comment" style="color: #57606a;">  Returns a list with `value` inserted at the specified `index`.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  Note that `index` is capped at the list length. Negative indices</span>
<span class="comment" style="color: #57606a;">  indicate an offset from the end of the `list`.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  ## Examples</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.insert_at([1, 2, 3, 4], 2, 0)</span>
<span class="comment" style="color: #57606a;">      [1, 2, 0, 3, 4]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.insert_at([1, 2, 3], 10, 0)</span>
<span class="comment" style="color: #57606a;">      [1, 2, 3, 0]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.insert_at([1, 2, 3], -1, 0)</span>
<span class="comment" style="color: #57606a;">      [1, 2, 3, 0]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.insert_at([1, 2, 3], -10, 0)</span>
<span class="comment" style="color: #57606a;">      [0, 1, 2, 3]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">insert_at</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">integer</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">any</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="variable" style="color: #24292f;">list</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">insert_at</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">index</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">value</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="function" style="color: #8250df;">is_list</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">and</span> <span class="function" style="color: #8250df;">is_integer</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">index</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="keyword" style="color: #cf222e;">case</span> <span class="variable" style="color: #24292f;">index</span> <span class="keyword" style="color: #cf222e;">do</span>
      <span class="operator" style="color: #0a3069; ">-</span><span class="text" style="color: #57606a; ">1</span> <span class="operator" style="color: #0a3069; ">-&gt;</span>
        <span class="variable" style="color: #24292f;">list</span> <span class="operator" style="color: #0a3069; ">++</span> <span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">value</span><span class="punctuation" style="color: #24292f;">]</span>

      <span class="comment" style="color: #57606a;">_</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="variable" style="color: #24292f;">index</span> <span class="operator" style="color: #0a3069; ">&lt;</span> <span class="text" style="color: #57606a; ">0</span> <span class="operator" style="color: #0a3069; ">-&gt;</span>
        <span class="keyword" style="color: #cf222e;">case</span> <span class="function" style="color: #8250df;">length</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">+</span> <span class="variable" style="color: #24292f;">index</span> <span class="operator" style="color: #0a3069; ">+</span> <span class="text" style="color: #57606a; ">1</span> <span class="keyword" style="color: #cf222e;">do</span>
          <span class="variable" style="color: #24292f;">index</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="variable" style="color: #24292f;">index</span> <span class="operator" style="color: #0a3069; ">&lt;</span> <span class="text" style="color: #57606a; ">0</span> <span class="operator" style="color: #0a3069; ">-&gt;</span> <span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">value</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">]</span>
          <span class="variable" style="color: #24292f;">index</span> <span class="operator" style="color: #0a3069; ">-&gt;</span> <span class="function" style="color: #8250df;">do_insert_at</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">index</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">value</span><span class="punctuation" style="color: #24292f;">)</span>
        <span class="keyword" style="color: #cf222e;">end</span>

      <span class="comment" style="color: #57606a;">_</span> <span class="operator" style="color: #0a3069; ">-&gt;</span>
        <span class="function" style="color: #8250df;">do_insert_at</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">index</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">value</span><span class="punctuation" style="color: #24292f;">)</span>
    <span class="keyword" style="color: #cf222e;">end</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="comment" style="color: #57606a;">@</span><span class="comment" style="color: #57606a;">doc</span> <span class="comment" style="color: #57606a;">&quot;&quot;&quot;</span>
<span class="comment" style="color: #57606a;">  Returns a list with a replaced value at the specified `index`.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  Negative indices indicate an offset from the end of the `list`.</span>
<span class="comment" style="color: #57606a;">  If `index` is out of bounds, the original `list` is returned.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  ## Examples</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.replace_at([1, 2, 3], 0, 0)</span>
<span class="comment" style="color: #57606a;">      [0, 2, 3]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.replace_at([1, 2, 3], 10, 0)</span>
<span class="comment" style="color: #57606a;">      [1, 2, 3]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.replace_at([1, 2, 3], -1, 0)</span>
<span class="comment" style="color: #57606a;">      [1, 2, 0]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.replace_at([1, 2, 3], -10, 0)</span>
<span class="comment" style="color: #57606a;">      [1, 2, 3]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">replace_at</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">integer</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">any</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="variable" style="color: #24292f;">list</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">replace_at</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">index</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">value</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="function" style="color: #8250df;">is_list</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">and</span> <span class="function" style="color: #8250df;">is_integer</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">index</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="keyword" style="color: #cf222e;">if</span> <span class="variable" style="color: #24292f;">index</span> <span class="operator" style="color: #0a3069; ">&lt;</span> <span class="text" style="color: #57606a; ">0</span> <span class="keyword" style="color: #cf222e;">do</span>
      <span class="keyword" style="color: #cf222e;">case</span> <span class="function" style="color: #8250df;">length</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">+</span> <span class="variable" style="color: #24292f;">index</span> <span class="keyword" style="color: #cf222e;">do</span>
        <span class="variable" style="color: #24292f;">index</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="variable" style="color: #24292f;">index</span> <span class="operator" style="color: #0a3069; ">&lt;</span> <span class="text" style="color: #57606a; ">0</span> <span class="operator" style="color: #0a3069; ">-&gt;</span> <span class="variable" style="color: #24292f;">list</span>
        <span class="variable" style="color: #24292f;">index</span> <span class="operator" style="color: #0a3069; ">-&gt;</span> <span class="function" style="color: #8250df;">do_replace_at</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">index</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">value</span><span class="punctuation" style="color: #24292f;">)</span>
      <span class="keyword" style="color: #cf222e;">end</span>
    <span class="keyword" style="color: #cf222e;">else</span>
      <span class="function" style="color: #8250df;">do_replace_at</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">index</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">value</span><span class="punctuation" style="color: #24292f;">)</span>
    <span class="keyword" style="color: #cf222e;">end</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="comment" style="color: #57606a;">@</span><span class="comment" style="color: #57606a;">doc</span> <span class="comment" style="color: #57606a;">&quot;&quot;&quot;</span>
<span class="comment" style="color: #57606a;">  Returns a list with an updated value at the specified `index`.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  Negative indices indicate an offset from the end of the `list`.</span>
<span class="comment" style="color: #57606a;">  If `index` is out of bounds, the original `list` is returned.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  ## Examples</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.update_at([1, 2, 3], 0, &amp;(&amp;1 + 10))</span>
<span class="comment" style="color: #57606a;">      [11, 2, 3]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.update_at([1, 2, 3], 10, &amp;(&amp;1 + 10))</span>
<span class="comment" style="color: #57606a;">      [1, 2, 3]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.update_at([1, 2, 3], -1, &amp;(&amp;1 + 10))</span>
<span class="comment" style="color: #57606a;">      [1, 2, 13]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.update_at([1, 2, 3], -10, &amp;(&amp;1 + 10))</span>
<span class="comment" style="color: #57606a;">      [1, 2, 3]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">update_at</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">elem</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">integer</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">elem</span> <span class="operator" style="color: #0a3069; ">-&gt;</span> <span class="variable" style="color: #24292f;">any</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="variable" style="color: #24292f;">list</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="string" style="color: #0a3069;">elem: </span><span class="variable" style="color: #24292f;">var</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">update_at</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">index</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">fun</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="function" style="color: #8250df;">is_list</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">and</span> <span class="function" style="color: #8250df;">is_function</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">fun</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">and</span> <span class="function" style="color: #8250df;">is_integer</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">index</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="keyword" style="color: #cf222e;">if</span> <span class="variable" style="color: #24292f;">index</span> <span class="operator" style="color: #0a3069; ">&lt;</span> <span class="text" style="color: #57606a; ">0</span> <span class="keyword" style="color: #cf222e;">do</span>
      <span class="keyword" style="color: #cf222e;">case</span> <span class="function" style="color: #8250df;">length</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">+</span> <span class="variable" style="color: #24292f;">index</span> <span class="keyword" style="color: #cf222e;">do</span>
        <span class="variable" style="color: #24292f;">index</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="variable" style="color: #24292f;">index</span> <span class="operator" style="color: #0a3069; ">&lt;</span> <span class="text" style="color: #57606a; ">0</span> <span class="operator" style="color: #0a3069; ">-&gt;</span> <span class="variable" style="color: #24292f;">list</span>
        <span class="variable" style="color: #24292f;">index</span> <span class="operator" style="color: #0a3069; ">-&gt;</span> <span class="function" style="color: #8250df;">do_update_at</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">index</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">fun</span><span class="punctuation" style="color: #24292f;">)</span>
      <span class="keyword" style="color: #cf222e;">end</span>
    <span class="keyword" style="color: #cf222e;">else</span>
      <span class="function" style="color: #8250df;">do_update_at</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">index</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">fun</span><span class="punctuation" style="color: #24292f;">)</span>
    <span class="keyword" style="color: #cf222e;">end</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="comment" style="color: #57606a;">@</span><span class="comment" style="color: #57606a;">doc</span> <span class="comment" style="color: #57606a;">&quot;&quot;&quot;</span>
<span class="comment" style="color: #57606a;">  Produces a new list by removing the value at the specified `index`.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  Negative indices indicate an offset from the end of the `list`.</span>
<span class="comment" style="color: #57606a;">  If `index` is out of bounds, the original `list` is returned.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  ## Examples</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.delete_at([1, 2, 3], 0)</span>
<span class="comment" style="color: #57606a;">      [2, 3]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.delete_at([1, 2, 3], 10)</span>
<span class="comment" style="color: #57606a;">      [1, 2, 3]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.delete_at([1, 2, 3], -1)</span>
<span class="comment" style="color: #57606a;">      [1, 2]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">delete_at</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">integer</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="variable" style="color: #24292f;">list</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">delete_at</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">index</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="function" style="color: #8250df;">is_integer</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">index</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="function" style="color: #8250df;">elem</span><span class="punctuation" style="color: #24292f;">(</span><span class="function" style="color: #8250df;">pop_at</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">index</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="text" style="color: #57606a; ">1</span><span class="punctuation" style="color: #24292f;">)</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="comment" style="color: #57606a;">@</span><span class="comment" style="color: #57606a;">doc</span> <span class="comment" style="color: #57606a;">&quot;&quot;&quot;</span>
<span class="comment" style="color: #57606a;">  Returns and removes the value at the specified `index` in the `list`.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  Negative indices indicate an offset from the end of the `list`.</span>
<span class="comment" style="color: #57606a;">  If `index` is out of bounds, the original `list` is returned.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  ## Examples</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.pop_at([1, 2, 3], 0)</span>
<span class="comment" style="color: #57606a;">      {1, [2, 3]}</span>
<span class="comment" style="color: #57606a;">      iex&gt; List.pop_at([1, 2, 3], 5)</span>
<span class="comment" style="color: #57606a;">      {nil, [1, 2, 3]}</span>
<span class="comment" style="color: #57606a;">      iex&gt; List.pop_at([1, 2, 3], 5, 10)</span>
<span class="comment" style="color: #57606a;">      {10, [1, 2, 3]}</span>
<span class="comment" style="color: #57606a;">      iex&gt; List.pop_at([1, 2, 3], -1)</span>
<span class="comment" style="color: #57606a;">      {3, [1, 2]}</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">doc</span> <span class="string" style="color: #0a3069;">since: </span><span class="string" style="color: #0a3069;">&quot;1.4.0&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">pop_at</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">integer</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">any</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="punctuation" style="color: #24292f;">{</span><span class="variable" style="color: #24292f;">any</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">}</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">pop_at</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">index</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">default</span> <span class="operator" style="color: #0a3069; ">\\</span> <span class="constant" style="color: #0550ae;">nil</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="function" style="color: #8250df;">is_integer</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">index</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="keyword" style="color: #cf222e;">if</span> <span class="variable" style="color: #24292f;">index</span> <span class="operator" style="color: #0a3069; ">&lt;</span> <span class="text" style="color: #57606a; ">0</span> <span class="keyword" style="color: #cf222e;">do</span>
      <span class="function" style="color: #8250df;">do_pop_at</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="function" style="color: #8250df;">length</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">+</span> <span class="variable" style="color: #24292f;">index</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">default</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation" style="color: #24292f;">)</span>
    <span class="keyword" style="color: #cf222e;">else</span>
      <span class="function" style="color: #8250df;">do_pop_at</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">index</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">default</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation" style="color: #24292f;">)</span>
    <span class="keyword" style="color: #cf222e;">end</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="comment" style="color: #57606a;">@</span><span class="comment" style="color: #57606a;">doc</span> <span class="comment" style="color: #57606a;">&quot;&quot;&quot;</span>
<span class="comment" style="color: #57606a;">  Returns `true` if `list` starts with the given `prefix` list; otherwise returns `false`.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  If `prefix` is an empty list, it returns `true`.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  ### Examples</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.starts_with?([1, 2, 3], [1, 2])</span>
<span class="comment" style="color: #57606a;">      true</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.starts_with?([1, 2], [1, 2, 3])</span>
<span class="comment" style="color: #57606a;">      false</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.starts_with?([:alpha], [])</span>
<span class="comment" style="color: #57606a;">      true</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.starts_with?([], [:alpha])</span>
<span class="comment" style="color: #57606a;">      false</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">doc</span> <span class="string" style="color: #0a3069;">since: </span><span class="string" style="color: #0a3069;">&quot;1.5.0&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">starts_with?</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">nonempty_list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">nonempty_list</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="variable" style="color: #24292f;">boolean</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">starts_with?</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="constant" style="color: #0550ae;">true</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">starts_with?</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">nonempty_list</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="constant" style="color: #0550ae;">false</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">starts_with?</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">prefix</span><span class="punctuation" style="color: #24292f;">)</span>

  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">starts_with?</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">head</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">tail</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">head</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">prefix_tail</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="string" style="color: #0a3069;">do: </span><span class="function" style="color: #8250df;">starts_with?</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">tail</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">prefix_tail</span><span class="punctuation" style="color: #24292f;">)</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">starts_with?</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="function" style="color: #8250df;">is_list</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="string" style="color: #0a3069;">do: </span><span class="constant" style="color: #0550ae;">true</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">starts_with?</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="comment" style="color: #57606a;">_</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="comment" style="color: #57606a;">_</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="function" style="color: #8250df;">is_list</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="string" style="color: #0a3069;">do: </span><span class="constant" style="color: #0550ae;">false</span>

  <span class="comment" style="color: #57606a;">@</span><span class="comment" style="color: #57606a;">doc</span> <span class="comment" style="color: #57606a;">&quot;&quot;&quot;</span>
<span class="comment" style="color: #57606a;">  Converts a charlist to an atom.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  Elixir supports conversions from charlists which contain any Unicode</span>
<span class="comment" style="color: #57606a;">  code point.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  Inlined by the compiler.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  ## Examples</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.to_atom(~c&quot;Elixir&quot;)</span>
<span class="comment" style="color: #57606a;">      :Elixir</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.to_atom(~c&quot;ð¢ Elixir&quot;)</span>
<span class="comment" style="color: #57606a;">      :&quot;ð¢ Elixir&quot;</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">to_atom</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">charlist</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="variable" style="color: #24292f;">atom</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">to_atom</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">charlist</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="module" style="color: #953800; ">:erlang</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">list_to_atom</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">charlist</span><span class="punctuation" style="color: #24292f;">)</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="comment" style="color: #57606a;">@</span><span class="comment" style="color: #57606a;">doc</span> <span class="comment" style="color: #57606a;">&quot;&quot;&quot;</span>
<span class="comment" style="color: #57606a;">  Converts a charlist to an existing atom.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  Elixir supports conversions from charlists which contain any Unicode</span>
<span class="comment" style="color: #57606a;">  code point. Raises an `ArgumentError` if the atom does not exist.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  Inlined by the compiler.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  &gt; #### Atoms and modules {: .info}</span>
<span class="comment" style="color: #57606a;">  &gt;</span>
<span class="comment" style="color: #57606a;">  &gt; Since Elixir is a compiled language, the atoms defined in a module</span>
<span class="comment" style="color: #57606a;">  &gt; will only exist after said module is loaded, which typically happens</span>
<span class="comment" style="color: #57606a;">  &gt; whenever a function in the module is executed. Therefore, it is</span>
<span class="comment" style="color: #57606a;">  &gt; generally recommended to call `List.to_existing_atom/1` only to</span>
<span class="comment" style="color: #57606a;">  &gt; convert atoms defined within the module making the function call</span>
<span class="comment" style="color: #57606a;">  &gt; to `to_existing_atom/1`.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  ## Examples</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; _ = :my_atom</span>
<span class="comment" style="color: #57606a;">      iex&gt; List.to_existing_atom(~c&quot;my_atom&quot;)</span>
<span class="comment" style="color: #57606a;">      :my_atom</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; _ = :&quot;ð¢ Elixir&quot;</span>
<span class="comment" style="color: #57606a;">      iex&gt; List.to_existing_atom(~c&quot;ð¢ Elixir&quot;)</span>
<span class="comment" style="color: #57606a;">      :&quot;ð¢ Elixir&quot;</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">to_existing_atom</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">charlist</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="variable" style="color: #24292f;">atom</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">to_existing_atom</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">charlist</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="module" style="color: #953800; ">:erlang</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">list_to_existing_atom</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">charlist</span><span class="punctuation" style="color: #24292f;">)</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="comment" style="color: #57606a;">@</span><span class="comment" style="color: #57606a;">doc</span> <span class="comment" style="color: #57606a;">&quot;&quot;&quot;</span>
<span class="comment" style="color: #57606a;">  Returns the float whose text representation is `charlist`.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  Inlined by the compiler.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  ## Examples</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.to_float(~c&quot;2.2017764e+0&quot;)</span>
<span class="comment" style="color: #57606a;">      2.2017764</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">to_float</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">charlist</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="variable" style="color: #24292f;">float</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">to_float</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">charlist</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="module" style="color: #953800; ">:erlang</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">list_to_float</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">charlist</span><span class="punctuation" style="color: #24292f;">)</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="comment" style="color: #57606a;">@</span><span class="comment" style="color: #57606a;">doc</span> <span class="comment" style="color: #57606a;">&quot;&quot;&quot;</span>
<span class="comment" style="color: #57606a;">  Returns an integer whose text representation is `charlist`.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  Inlined by the compiler.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  ## Examples</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.to_integer(~c&quot;123&quot;)</span>
<span class="comment" style="color: #57606a;">      123</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">to_integer</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">charlist</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="variable" style="color: #24292f;">integer</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">to_integer</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">charlist</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="module" style="color: #953800; ">:erlang</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">list_to_integer</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">charlist</span><span class="punctuation" style="color: #24292f;">)</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="comment" style="color: #57606a;">@</span><span class="comment" style="color: #57606a;">doc</span> <span class="comment" style="color: #57606a;">&quot;&quot;&quot;</span>
<span class="comment" style="color: #57606a;">  Returns an integer whose text representation is `charlist` in base `base`.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  Inlined by the compiler.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  The base needs to be between `2` and `36`.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  ## Examples</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.to_integer(~c&quot;3FF&quot;, 16)</span>
<span class="comment" style="color: #57606a;">      1023</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">to_integer</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">charlist</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="text" style="color: #57606a; ">2</span><span class="operator" style="color: #0a3069; ">..</span><span class="text" style="color: #57606a; ">36</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="variable" style="color: #24292f;">integer</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">to_integer</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">charlist</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">base</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="module" style="color: #953800; ">:erlang</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">list_to_integer</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">charlist</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">base</span><span class="punctuation" style="color: #24292f;">)</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="comment" style="color: #57606a;">@</span><span class="comment" style="color: #57606a;">doc</span> <span class="comment" style="color: #57606a;">&quot;&quot;&quot;</span>
<span class="comment" style="color: #57606a;">  Converts a list to a tuple.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  Inlined by the compiler.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  ## Examples</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.to_tuple([:share, [:elixir, 163]])</span>
<span class="comment" style="color: #57606a;">      {:share, [:elixir, 163]}</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">to_tuple</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="variable" style="color: #24292f;">tuple</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">to_tuple</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="module" style="color: #953800; ">:erlang</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">list_to_tuple</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="comment" style="color: #57606a;">@</span><span class="comment" style="color: #57606a;">doc</span> <span class="comment" style="color: #57606a;">&quot;&quot;&quot;</span>
<span class="comment" style="color: #57606a;">  Converts a list of integers representing code points, lists or</span>
<span class="comment" style="color: #57606a;">  strings into a string.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  To be converted to a string, a list must either be empty or only</span>
<span class="comment" style="color: #57606a;">  contain the following elements:</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">    * strings</span>
<span class="comment" style="color: #57606a;">    * integers representing Unicode code points</span>
<span class="comment" style="color: #57606a;">    * a list containing one of these three elements</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  Note that this function expects a list of integers representing</span>
<span class="comment" style="color: #57606a;">  Unicode code points. If you have a list of bytes, you must instead use</span>
<span class="comment" style="color: #57606a;">  the [`:binary` module](`:binary`).</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  ## Examples</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.to_string([0x00E6, 0x00DF])</span>
<span class="comment" style="color: #57606a;">      &quot;Ã¦Ã&quot;</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.to_string([0x0061, &quot;bc&quot;])</span>
<span class="comment" style="color: #57606a;">      &quot;abc&quot;</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.to_string([0x0064, &quot;ee&quot;, [~c&quot;p&quot;]])</span>
<span class="comment" style="color: #57606a;">      &quot;deep&quot;</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.to_string([])</span>
<span class="comment" style="color: #57606a;">      &quot;&quot;</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">to_string</span><span class="punctuation" style="color: #24292f;">(</span><span class="module" style="color: #953800; ">:unicode</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">charlist</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="module" style="color: #953800; ">String</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">t</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">)</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">to_string</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="function" style="color: #8250df;">is_list</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="keyword" style="color: #cf222e;">try</span> <span class="keyword" style="color: #cf222e;">do</span>
      <span class="module" style="color: #953800; ">:unicode</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">characters_to_binary</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span>
    <span class="keyword" style="color: #cf222e;">rescue</span>
      <span class="module" style="color: #953800; ">ArgumentError</span> <span class="operator" style="color: #0a3069; ">-&gt;</span>
        <span class="keyword" style="color: #cf222e;">raise</span> <span class="module" style="color: #953800; ">ArgumentError</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="string" style="color: #0a3069;">&quot;&quot;&quot;</span>
<span class="string" style="color: #0a3069;">        cannot convert the given list to a string.</span>
<span class="string" style="color: #0a3069;"></span>
<span class="string" style="color: #0a3069;">        To be converted to a string, a list must either be empty or only</span>
<span class="string" style="color: #0a3069;">        contain the following elements:</span>
<span class="string" style="color: #0a3069;"></span>
<span class="string" style="color: #0a3069;">          * strings</span>
<span class="string" style="color: #0a3069;">          * integers representing Unicode code points</span>
<span class="string" style="color: #0a3069;">          * a list containing one of these three elements</span>
<span class="string" style="color: #0a3069;"></span>
<span class="string" style="color: #0a3069;">        Please check the given list or call inspect/1 to get the list representation, got:</span>
<span class="string" style="color: #0a3069;"></span>
<span class="string" style="color: #0a3069;">        <span class="text" style="color: #57606a; "><span class="punctuation" style="color: #24292f;">#{</span><span class="function" style="color: #8250df;">inspect</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation" style="color: #24292f;">}</span></span></span>
<span class="string" style="color: #0a3069;">        &quot;&quot;&quot;</span>
    <span class="keyword" style="color: #cf222e;">else</span>
      <span class="variable" style="color: #24292f;">result</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="function" style="color: #8250df;">is_binary</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">result</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">-&gt;</span>
        <span class="variable" style="color: #24292f;">result</span>

      <span class="punctuation" style="color: #24292f;">{</span><span class="string" style="color: #0a3069;">:error</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">encoded</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">rest</span><span class="punctuation" style="color: #24292f;">}</span> <span class="operator" style="color: #0a3069; ">-&gt;</span>
        <span class="keyword" style="color: #cf222e;">raise</span> <span class="module" style="color: #953800; ">UnicodeConversionError</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="string" style="color: #0a3069;">encoded: </span><span class="variable" style="color: #24292f;">encoded</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="string" style="color: #0a3069;">rest: </span><span class="variable" style="color: #24292f;">rest</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="string" style="color: #0a3069;">kind: </span><span class="string" style="color: #0a3069;">:invalid</span>

      <span class="punctuation" style="color: #24292f;">{</span><span class="string" style="color: #0a3069;">:incomplete</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">encoded</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">rest</span><span class="punctuation" style="color: #24292f;">}</span> <span class="operator" style="color: #0a3069; ">-&gt;</span>
        <span class="keyword" style="color: #cf222e;">raise</span> <span class="module" style="color: #953800; ">UnicodeConversionError</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="string" style="color: #0a3069;">encoded: </span><span class="variable" style="color: #24292f;">encoded</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="string" style="color: #0a3069;">rest: </span><span class="variable" style="color: #24292f;">rest</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="string" style="color: #0a3069;">kind: </span><span class="string" style="color: #0a3069;">:incomplete</span>
    <span class="keyword" style="color: #cf222e;">end</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="comment" style="color: #57606a;">@</span><span class="comment" style="color: #57606a;">doc</span> <span class="comment" style="color: #57606a;">&quot;&quot;&quot;</span>
<span class="comment" style="color: #57606a;">  Converts a list of integers representing Unicode code points, lists or</span>
<span class="comment" style="color: #57606a;">  strings into a charlist.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  Note that this function expects a list of integers representing</span>
<span class="comment" style="color: #57606a;">  Unicode code points. If you have a list of bytes, you must instead use</span>
<span class="comment" style="color: #57606a;">  the [`:binary` module](`:binary`).</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  ## Examples</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; ~c&quot;Ã¦Ã&quot; = List.to_charlist([0x00E6, 0x00DF])</span>
<span class="comment" style="color: #57606a;">      [230, 223]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.to_charlist([0x0061, &quot;bc&quot;])</span>
<span class="comment" style="color: #57606a;">      ~c&quot;abc&quot;</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.to_charlist([0x0064, &quot;ee&quot;, [~c&quot;p&quot;]])</span>
<span class="comment" style="color: #57606a;">      ~c&quot;deep&quot;</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">doc</span> <span class="string" style="color: #0a3069;">since: </span><span class="string" style="color: #0a3069;">&quot;1.8.0&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">to_charlist</span><span class="punctuation" style="color: #24292f;">(</span><span class="module" style="color: #953800; ">:unicode</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">charlist</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="function" style="color: #8250df;">charlist</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">)</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">to_charlist</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="function" style="color: #8250df;">is_list</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="keyword" style="color: #cf222e;">try</span> <span class="keyword" style="color: #cf222e;">do</span>
      <span class="module" style="color: #953800; ">:unicode</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">characters_to_list</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span>
    <span class="keyword" style="color: #cf222e;">rescue</span>
      <span class="module" style="color: #953800; ">ArgumentError</span> <span class="operator" style="color: #0a3069; ">-&gt;</span>
        <span class="keyword" style="color: #cf222e;">raise</span> <span class="module" style="color: #953800; ">ArgumentError</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="string" style="color: #0a3069;">&quot;&quot;&quot;</span>
<span class="string" style="color: #0a3069;">        cannot convert the given list to a charlist.</span>
<span class="string" style="color: #0a3069;"></span>
<span class="string" style="color: #0a3069;">        To be converted to a charlist, a list must contain only:</span>
<span class="string" style="color: #0a3069;"></span>
<span class="string" style="color: #0a3069;">          * strings</span>
<span class="string" style="color: #0a3069;">          * integers representing Unicode code points</span>
<span class="string" style="color: #0a3069;">          * or a list containing one of these three elements</span>
<span class="string" style="color: #0a3069;"></span>
<span class="string" style="color: #0a3069;">        Please check the given list or call inspect/1 to get the list representation, got:</span>
<span class="string" style="color: #0a3069;"></span>
<span class="string" style="color: #0a3069;">        <span class="text" style="color: #57606a; "><span class="punctuation" style="color: #24292f;">#{</span><span class="function" style="color: #8250df;">inspect</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation" style="color: #24292f;">}</span></span></span>
<span class="string" style="color: #0a3069;">        &quot;&quot;&quot;</span>
    <span class="keyword" style="color: #cf222e;">else</span>
      <span class="variable" style="color: #24292f;">result</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="function" style="color: #8250df;">is_list</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">result</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">-&gt;</span>
        <span class="variable" style="color: #24292f;">result</span>

      <span class="punctuation" style="color: #24292f;">{</span><span class="string" style="color: #0a3069;">:error</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">encoded</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">rest</span><span class="punctuation" style="color: #24292f;">}</span> <span class="operator" style="color: #0a3069; ">-&gt;</span>
        <span class="keyword" style="color: #cf222e;">raise</span> <span class="module" style="color: #953800; ">UnicodeConversionError</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="string" style="color: #0a3069;">encoded: </span><span class="variable" style="color: #24292f;">encoded</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="string" style="color: #0a3069;">rest: </span><span class="variable" style="color: #24292f;">rest</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="string" style="color: #0a3069;">kind: </span><span class="string" style="color: #0a3069;">:invalid</span>

      <span class="punctuation" style="color: #24292f;">{</span><span class="string" style="color: #0a3069;">:incomplete</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">encoded</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">rest</span><span class="punctuation" style="color: #24292f;">}</span> <span class="operator" style="color: #0a3069; ">-&gt;</span>
        <span class="keyword" style="color: #cf222e;">raise</span> <span class="module" style="color: #953800; ">UnicodeConversionError</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="string" style="color: #0a3069;">encoded: </span><span class="variable" style="color: #24292f;">encoded</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="string" style="color: #0a3069;">rest: </span><span class="variable" style="color: #24292f;">rest</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="string" style="color: #0a3069;">kind: </span><span class="string" style="color: #0a3069;">:incomplete</span>
    <span class="keyword" style="color: #cf222e;">end</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="comment" style="color: #57606a;">@</span><span class="comment" style="color: #57606a;">doc</span> <span class="comment" style="color: #57606a;">&quot;&quot;&quot;</span>
<span class="comment" style="color: #57606a;">  Returns a keyword list that represents an *edit script*.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  The algorithm is outlined in the</span>
<span class="comment" style="color: #57606a;">  &quot;An O(ND) Difference Algorithm and Its Variations&quot; paper by E. Myers.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  An *edit script* is a keyword list. Each key describes the &quot;editing action&quot; to</span>
<span class="comment" style="color: #57606a;">  take in order to bring `list1` closer to being equal to `list2`; a key can be</span>
<span class="comment" style="color: #57606a;">  `:eq`, `:ins`, or `:del`. Each value is a sublist of either `list1` or `list2`</span>
<span class="comment" style="color: #57606a;">  that should be inserted (if the corresponding key is `:ins`), deleted (if the</span>
<span class="comment" style="color: #57606a;">  corresponding key is `:del`), or left alone (if the corresponding key is</span>
<span class="comment" style="color: #57606a;">  `:eq`) in `list1` in order to be closer to `list2`.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  See `myers_difference/3` if you want to handle nesting in the diff scripts.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  ## Examples</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.myers_difference([1, 4, 2, 3], [1, 2, 3, 4])</span>
<span class="comment" style="color: #57606a;">      [eq: [1], del: [4], eq: [2, 3], ins: [4]]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">doc</span> <span class="string" style="color: #0a3069;">since: </span><span class="string" style="color: #0a3069;">&quot;1.4.0&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">myers_difference</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">{</span><span class="string" style="color: #0a3069;">:eq</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="string" style="color: #0a3069;">:ins</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="string" style="color: #0a3069;">:del</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">}</span><span class="punctuation" style="color: #24292f;">]</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">myers_difference</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list1</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">list2</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="function" style="color: #8250df;">is_list</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list1</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">and</span> <span class="function" style="color: #8250df;">is_list</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list2</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="function" style="color: #8250df;">myers_difference_with_diff_script</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list1</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">list2</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="constant" style="color: #0550ae;">nil</span><span class="punctuation" style="color: #24292f;">)</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="comment" style="color: #57606a;">@</span><span class="comment" style="color: #57606a;">doc</span> <span class="comment" style="color: #57606a;">&quot;&quot;&quot;</span>
<span class="comment" style="color: #57606a;">  Returns a keyword list that represents an *edit script* with nested diffs.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  This is an extension of `myers_difference/2` where a `diff_script` function</span>
<span class="comment" style="color: #57606a;">  can be given in case it is desired to compute nested differences. The function</span>
<span class="comment" style="color: #57606a;">  may return a list with the inner edit script or `nil` in case there is no</span>
<span class="comment" style="color: #57606a;">  such script. The returned inner edit script will be under the `:diff` key.</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  ## Examples</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">      iex&gt; List.myers_difference([&quot;a&quot;, &quot;db&quot;, &quot;c&quot;], [&quot;a&quot;, &quot;bc&quot;], &amp;String.myers_difference/2)</span>
<span class="comment" style="color: #57606a;">      [eq: [&quot;a&quot;], diff: [del: &quot;d&quot;, eq: &quot;b&quot;, ins: &quot;c&quot;], del: [&quot;c&quot;]]</span>
<span class="comment" style="color: #57606a;"></span>
<span class="comment" style="color: #57606a;">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">doc</span> <span class="string" style="color: #0a3069;">since: </span><span class="string" style="color: #0a3069;">&quot;1.8.0&quot;</span>
  <span class="attribute" style="color: #24292f;">@</span><span class="attribute" style="color: #24292f;">spec</span> <span class="function" style="color: #8250df;">myers_difference</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">term</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">term</span> <span class="operator" style="color: #0a3069; ">-&gt;</span> <span class="variable" style="color: #24292f;">script</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="constant" style="color: #0550ae;">nil</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">::</span> <span class="variable" style="color: #24292f;">script</span>
        <span class="keyword" style="color: #cf222e;">when</span> <span class="string" style="color: #0a3069;">script: </span><span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">{</span><span class="string" style="color: #0a3069;">:eq</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="string" style="color: #0a3069;">:ins</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="string" style="color: #0a3069;">:del</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="string" style="color: #0a3069;">:diff</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">}</span><span class="punctuation" style="color: #24292f;">]</span>
  <span class="keyword" style="color: #cf222e;">def</span> <span class="function" style="color: #8250df;">myers_difference</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list1</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">list2</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">diff_script</span><span class="punctuation" style="color: #24292f;">)</span>
      <span class="keyword" style="color: #cf222e;">when</span> <span class="function" style="color: #8250df;">is_list</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list1</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">and</span> <span class="function" style="color: #8250df;">is_list</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list2</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">and</span> <span class="function" style="color: #8250df;">is_function</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">diff_script</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="function" style="color: #8250df;">myers_difference_with_diff_script</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list1</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">list2</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">diff_script</span><span class="punctuation" style="color: #24292f;">)</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">myers_difference_with_diff_script</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list1</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">list2</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">diff_script</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="variable" style="color: #24292f;">path</span> <span class="operator" style="color: #0a3069; ">=</span> <span class="punctuation" style="color: #24292f;">{</span><span class="text" style="color: #57606a; ">0</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">list1</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">list2</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation" style="color: #24292f;">}</span>
    <span class="function" style="color: #8250df;">find_script</span><span class="punctuation" style="color: #24292f;">(</span><span class="text" style="color: #57606a; ">0</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="function" style="color: #8250df;">length</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list1</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">+</span> <span class="function" style="color: #8250df;">length</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list2</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">path</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">diff_script</span><span class="punctuation" style="color: #24292f;">)</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">find_script</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">envelope</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">max</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">paths</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">diff_script</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="keyword" style="color: #cf222e;">case</span> <span class="function" style="color: #8250df;">each_diagonal</span><span class="punctuation" style="color: #24292f;">(</span><span class="operator" style="color: #0a3069; ">-</span><span class="variable" style="color: #24292f;">envelope</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">envelope</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">paths</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">diff_script</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
      <span class="punctuation" style="color: #24292f;">{</span><span class="string" style="color: #0a3069;">:done</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">edits</span><span class="punctuation" style="color: #24292f;">}</span> <span class="operator" style="color: #0a3069; ">-&gt;</span> <span class="function" style="color: #8250df;">compact_reverse</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">edits</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation" style="color: #24292f;">)</span>
      <span class="punctuation" style="color: #24292f;">{</span><span class="string" style="color: #0a3069;">:next</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">paths</span><span class="punctuation" style="color: #24292f;">}</span> <span class="operator" style="color: #0a3069; ">-&gt;</span> <span class="function" style="color: #8250df;">find_script</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">envelope</span> <span class="operator" style="color: #0a3069; ">+</span> <span class="text" style="color: #57606a; ">1</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">max</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">paths</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">diff_script</span><span class="punctuation" style="color: #24292f;">)</span>
    <span class="keyword" style="color: #cf222e;">end</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">compact_reverse</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">acc</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="string" style="color: #0a3069;">do: </span><span class="variable" style="color: #24292f;">acc</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">compact_reverse</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">{</span><span class="string" style="color: #0a3069;">:diff</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="comment" style="color: #57606a;">_</span><span class="punctuation" style="color: #24292f;">}</span> <span class="operator" style="color: #0a3069; ">=</span> <span class="variable" style="color: #24292f;">fragment</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">rest</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">acc</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="function" style="color: #8250df;">compact_reverse</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">rest</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">fragment</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">acc</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation" style="color: #24292f;">)</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">compact_reverse</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">{</span><span class="variable" style="color: #24292f;">kind</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">elem</span><span class="punctuation" style="color: #24292f;">}</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">rest</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">{</span><span class="variable" style="color: #24292f;">kind</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">result</span><span class="punctuation" style="color: #24292f;">}</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">acc</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="function" style="color: #8250df;">compact_reverse</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">rest</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">{</span><span class="variable" style="color: #24292f;">kind</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">elem</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">result</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation" style="color: #24292f;">}</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">acc</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation" style="color: #24292f;">)</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">compact_reverse</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">rest</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">{</span><span class="string" style="color: #0a3069;">:eq</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">elem</span><span class="punctuation" style="color: #24292f;">}</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">{</span><span class="string" style="color: #0a3069;">:ins</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">elem</span><span class="punctuation" style="color: #24292f;">}</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">{</span><span class="string" style="color: #0a3069;">:eq</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">other</span><span class="punctuation" style="color: #24292f;">}</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">acc</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="function" style="color: #8250df;">compact_reverse</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">rest</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">{</span><span class="string" style="color: #0a3069;">:ins</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">elem</span><span class="punctuation" style="color: #24292f;">}</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">{</span><span class="string" style="color: #0a3069;">:eq</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">elem</span> <span class="operator" style="color: #0a3069; ">++</span> <span class="variable" style="color: #24292f;">other</span><span class="punctuation" style="color: #24292f;">}</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">acc</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation" style="color: #24292f;">)</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">compact_reverse</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">{</span><span class="variable" style="color: #24292f;">kind</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">elem</span><span class="punctuation" style="color: #24292f;">}</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">rest</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">acc</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="function" style="color: #8250df;">compact_reverse</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">rest</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">{</span><span class="variable" style="color: #24292f;">kind</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">elem</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation" style="color: #24292f;">}</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">acc</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation" style="color: #24292f;">)</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">each_diagonal</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">diag</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">limit</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="comment" style="color: #57606a;">_paths</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">next_paths</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="comment" style="color: #57606a;">_diff_script</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="variable" style="color: #24292f;">diag</span> <span class="operator" style="color: #0a3069; ">&gt;</span> <span class="variable" style="color: #24292f;">limit</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="punctuation" style="color: #24292f;">{</span><span class="string" style="color: #0a3069;">:next</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="module" style="color: #953800; ">:lists</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">reverse</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">next_paths</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation" style="color: #24292f;">}</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">each_diagonal</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">diag</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">limit</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">paths</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">next_paths</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">diff_script</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="punctuation" style="color: #24292f;">{</span><span class="variable" style="color: #24292f;">path</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">rest</span><span class="punctuation" style="color: #24292f;">}</span> <span class="operator" style="color: #0a3069; ">=</span> <span class="function" style="color: #8250df;">proceed_path</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">diag</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">limit</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">paths</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">diff_script</span><span class="punctuation" style="color: #24292f;">)</span>

    <span class="keyword" style="color: #cf222e;">case</span> <span class="function" style="color: #8250df;">follow_snake</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">path</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
      <span class="punctuation" style="color: #24292f;">{</span><span class="string" style="color: #0a3069;">:cont</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">path</span><span class="punctuation" style="color: #24292f;">}</span> <span class="operator" style="color: #0a3069; ">-&gt;</span> <span class="function" style="color: #8250df;">each_diagonal</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">diag</span> <span class="operator" style="color: #0a3069; ">+</span> <span class="text" style="color: #57606a; ">2</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">limit</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">rest</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">path</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">next_paths</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">diff_script</span><span class="punctuation" style="color: #24292f;">)</span>
      <span class="punctuation" style="color: #24292f;">{</span><span class="string" style="color: #0a3069;">:done</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">edits</span><span class="punctuation" style="color: #24292f;">}</span> <span class="operator" style="color: #0a3069; ">-&gt;</span> <span class="punctuation" style="color: #24292f;">{</span><span class="string" style="color: #0a3069;">:done</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">edits</span><span class="punctuation" style="color: #24292f;">}</span>
    <span class="keyword" style="color: #cf222e;">end</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">proceed_path</span><span class="punctuation" style="color: #24292f;">(</span><span class="text" style="color: #57606a; ">0</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="text" style="color: #57606a; ">0</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">path</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="comment" style="color: #57606a;">_diff_script</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="string" style="color: #0a3069;">do: </span><span class="punctuation" style="color: #24292f;">{</span><span class="variable" style="color: #24292f;">path</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation" style="color: #24292f;">}</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">proceed_path</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">diag</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">limit</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">path</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="comment" style="color: #57606a;">_</span><span class="punctuation" style="color: #24292f;">]</span> <span class="operator" style="color: #0a3069; ">=</span> <span class="variable" style="color: #24292f;">paths</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">diff_script</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="variable" style="color: #24292f;">diag</span> <span class="operator" style="color: #0a3069; ">==</span> <span class="operator" style="color: #0a3069; ">-</span><span class="variable" style="color: #24292f;">limit</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="punctuation" style="color: #24292f;">{</span><span class="function" style="color: #8250df;">move_down</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">path</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">diff_script</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">paths</span><span class="punctuation" style="color: #24292f;">}</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">proceed_path</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">diag</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">limit</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">path</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">diff_script</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="variable" style="color: #24292f;">diag</span> <span class="operator" style="color: #0a3069; ">==</span> <span class="variable" style="color: #24292f;">limit</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="punctuation" style="color: #24292f;">{</span><span class="function" style="color: #8250df;">move_right</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">path</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">diff_script</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation" style="color: #24292f;">}</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">proceed_path</span><span class="punctuation" style="color: #24292f;">(</span><span class="comment" style="color: #57606a;">_diag</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="comment" style="color: #57606a;">_limit</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">path1</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">path2</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">rest</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">diff_script</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="keyword" style="color: #cf222e;">if</span> <span class="function" style="color: #8250df;">elem</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">path1</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="text" style="color: #57606a; ">0</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">&gt;</span> <span class="function" style="color: #8250df;">elem</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">path2</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="text" style="color: #57606a; ">0</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
      <span class="punctuation" style="color: #24292f;">{</span><span class="function" style="color: #8250df;">move_right</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">path1</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">diff_script</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">path2</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">rest</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation" style="color: #24292f;">}</span>
    <span class="keyword" style="color: #cf222e;">else</span>
      <span class="punctuation" style="color: #24292f;">{</span><span class="function" style="color: #8250df;">move_down</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">path2</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">diff_script</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">path2</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">rest</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation" style="color: #24292f;">}</span>
    <span class="keyword" style="color: #cf222e;">end</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">move_right</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">{</span><span class="variable" style="color: #24292f;">y</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">elem1</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">rest1</span><span class="punctuation" style="color: #24292f;">]</span> <span class="operator" style="color: #0a3069; ">=</span> <span class="variable" style="color: #24292f;">list1</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">elem2</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">rest2</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">edits</span><span class="punctuation" style="color: #24292f;">}</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">diff_script</span><span class="punctuation" style="color: #24292f;">)</span>
       <span class="keyword" style="color: #cf222e;">when</span> <span class="variable" style="color: #24292f;">diff_script</span> <span class="operator" style="color: #0a3069; ">!=</span> <span class="constant" style="color: #0550ae;">nil</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="keyword" style="color: #cf222e;">if</span> <span class="variable" style="color: #24292f;">diff</span> <span class="operator" style="color: #0a3069; ">=</span> <span class="variable" style="color: #24292f;">diff_script</span><span class="operator" style="color: #0a3069; ">.</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">elem1</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">elem2</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
      <span class="punctuation" style="color: #24292f;">{</span><span class="variable" style="color: #24292f;">y</span> <span class="operator" style="color: #0a3069; ">+</span> <span class="text" style="color: #57606a; ">1</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">rest1</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">rest2</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">{</span><span class="string" style="color: #0a3069;">:diff</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">diff</span><span class="punctuation" style="color: #24292f;">}</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">edits</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation" style="color: #24292f;">}</span>
    <span class="keyword" style="color: #cf222e;">else</span>
      <span class="punctuation" style="color: #24292f;">{</span><span class="variable" style="color: #24292f;">y</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">list1</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">rest2</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">{</span><span class="string" style="color: #0a3069;">:ins</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">elem2</span><span class="punctuation" style="color: #24292f;">}</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">edits</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation" style="color: #24292f;">}</span>
    <span class="keyword" style="color: #cf222e;">end</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">move_right</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">{</span><span class="variable" style="color: #24292f;">y</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">list1</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">elem</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">rest</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">edits</span><span class="punctuation" style="color: #24292f;">}</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="comment" style="color: #57606a;">_diff_script</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="punctuation" style="color: #24292f;">{</span><span class="variable" style="color: #24292f;">y</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">list1</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">rest</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">{</span><span class="string" style="color: #0a3069;">:ins</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">elem</span><span class="punctuation" style="color: #24292f;">}</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">edits</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation" style="color: #24292f;">}</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">move_right</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">{</span><span class="variable" style="color: #24292f;">y</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">list1</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">edits</span><span class="punctuation" style="color: #24292f;">}</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="comment" style="color: #57606a;">_diff_script</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="punctuation" style="color: #24292f;">{</span><span class="variable" style="color: #24292f;">y</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">list1</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">edits</span><span class="punctuation" style="color: #24292f;">}</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">move_down</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">{</span><span class="variable" style="color: #24292f;">y</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">elem1</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">rest1</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">elem2</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">rest2</span><span class="punctuation" style="color: #24292f;">]</span> <span class="operator" style="color: #0a3069; ">=</span> <span class="variable" style="color: #24292f;">list2</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">edits</span><span class="punctuation" style="color: #24292f;">}</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">diff_script</span><span class="punctuation" style="color: #24292f;">)</span>
       <span class="keyword" style="color: #cf222e;">when</span> <span class="variable" style="color: #24292f;">diff_script</span> <span class="operator" style="color: #0a3069; ">!=</span> <span class="constant" style="color: #0550ae;">nil</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="keyword" style="color: #cf222e;">if</span> <span class="variable" style="color: #24292f;">diff</span> <span class="operator" style="color: #0a3069; ">=</span> <span class="variable" style="color: #24292f;">diff_script</span><span class="operator" style="color: #0a3069; ">.</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">elem1</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">elem2</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
      <span class="punctuation" style="color: #24292f;">{</span><span class="variable" style="color: #24292f;">y</span> <span class="operator" style="color: #0a3069; ">+</span> <span class="text" style="color: #57606a; ">1</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">rest1</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">rest2</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">{</span><span class="string" style="color: #0a3069;">:diff</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">diff</span><span class="punctuation" style="color: #24292f;">}</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">edits</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation" style="color: #24292f;">}</span>
    <span class="keyword" style="color: #cf222e;">else</span>
      <span class="punctuation" style="color: #24292f;">{</span><span class="variable" style="color: #24292f;">y</span> <span class="operator" style="color: #0a3069; ">+</span> <span class="text" style="color: #57606a; ">1</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">rest1</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">list2</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">{</span><span class="string" style="color: #0a3069;">:del</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">elem1</span><span class="punctuation" style="color: #24292f;">}</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">edits</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation" style="color: #24292f;">}</span>
    <span class="keyword" style="color: #cf222e;">end</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">move_down</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">{</span><span class="variable" style="color: #24292f;">y</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">elem</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">rest</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">list2</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">edits</span><span class="punctuation" style="color: #24292f;">}</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="comment" style="color: #57606a;">_diff_script</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="punctuation" style="color: #24292f;">{</span><span class="variable" style="color: #24292f;">y</span> <span class="operator" style="color: #0a3069; ">+</span> <span class="text" style="color: #57606a; ">1</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">rest</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">list2</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">{</span><span class="string" style="color: #0a3069;">:del</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">elem</span><span class="punctuation" style="color: #24292f;">}</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">edits</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation" style="color: #24292f;">}</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">move_down</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">{</span><span class="variable" style="color: #24292f;">y</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">list2</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">edits</span><span class="punctuation" style="color: #24292f;">}</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="comment" style="color: #57606a;">_diff_script</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="punctuation" style="color: #24292f;">{</span><span class="variable" style="color: #24292f;">y</span> <span class="operator" style="color: #0a3069; ">+</span> <span class="text" style="color: #57606a; ">1</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">list2</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">edits</span><span class="punctuation" style="color: #24292f;">}</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">follow_snake</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">{</span><span class="variable" style="color: #24292f;">y</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">elem</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">rest1</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">elem</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">rest2</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">edits</span><span class="punctuation" style="color: #24292f;">}</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="function" style="color: #8250df;">follow_snake</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">{</span><span class="variable" style="color: #24292f;">y</span> <span class="operator" style="color: #0a3069; ">+</span> <span class="text" style="color: #57606a; ">1</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">rest1</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">rest2</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">{</span><span class="string" style="color: #0a3069;">:eq</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">elem</span><span class="punctuation" style="color: #24292f;">}</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">edits</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation" style="color: #24292f;">}</span><span class="punctuation" style="color: #24292f;">)</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">follow_snake</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">{</span><span class="comment" style="color: #57606a;">_y</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">edits</span><span class="punctuation" style="color: #24292f;">}</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="punctuation" style="color: #24292f;">{</span><span class="string" style="color: #0a3069;">:done</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">edits</span><span class="punctuation" style="color: #24292f;">}</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">follow_snake</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">path</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="punctuation" style="color: #24292f;">{</span><span class="string" style="color: #0a3069;">:cont</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">path</span><span class="punctuation" style="color: #24292f;">}</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="comment" style="color: #57606a;">## Helpers</span>

  <span class="comment" style="color: #57606a;"># replace_at</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">do_replace_at</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="comment" style="color: #57606a;">_index</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="comment" style="color: #57606a;">_value</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">]</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">do_replace_at</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="comment" style="color: #57606a;">_old</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">rest</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="text" style="color: #57606a; ">0</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">value</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">value</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">rest</span><span class="punctuation" style="color: #24292f;">]</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">do_replace_at</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">head</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">tail</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">index</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">value</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">head</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="function" style="color: #8250df;">do_replace_at</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">tail</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">index</span> <span class="operator" style="color: #0a3069; ">-</span> <span class="text" style="color: #57606a; ">1</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">value</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation" style="color: #24292f;">]</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="comment" style="color: #57606a;"># insert_at</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">do_insert_at</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="comment" style="color: #57606a;">_index</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">value</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">value</span><span class="punctuation" style="color: #24292f;">]</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">do_insert_at</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="text" style="color: #57606a; ">0</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">value</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">value</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">]</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">do_insert_at</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">head</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">tail</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">index</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">value</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">head</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="function" style="color: #8250df;">do_insert_at</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">tail</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">index</span> <span class="operator" style="color: #0a3069; ">-</span> <span class="text" style="color: #57606a; ">1</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">value</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation" style="color: #24292f;">]</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="comment" style="color: #57606a;"># update_at</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">do_update_at</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">value</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="text" style="color: #57606a; ">0</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">fun</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">fun</span><span class="operator" style="color: #0a3069; ">.</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">value</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">]</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">do_update_at</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">head</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">tail</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">index</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">fun</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">head</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="function" style="color: #8250df;">do_update_at</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">tail</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">index</span> <span class="operator" style="color: #0a3069; ">-</span> <span class="text" style="color: #57606a; ">1</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">fun</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation" style="color: #24292f;">]</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">do_update_at</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="comment" style="color: #57606a;">_index</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="comment" style="color: #57606a;">_fun</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">]</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="comment" style="color: #57606a;"># pop_at</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">do_pop_at</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="comment" style="color: #57606a;">_index</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">default</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">acc</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="punctuation" style="color: #24292f;">{</span><span class="variable" style="color: #24292f;">default</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="module" style="color: #953800; ">:lists</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">reverse</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">acc</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation" style="color: #24292f;">}</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">do_pop_at</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">head</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">tail</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="text" style="color: #57606a; ">0</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="comment" style="color: #57606a;">_default</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">acc</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="punctuation" style="color: #24292f;">{</span><span class="variable" style="color: #24292f;">head</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="module" style="color: #953800; ">:lists</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">reverse</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">acc</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">tail</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation" style="color: #24292f;">}</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">do_pop_at</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">head</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">tail</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">index</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">default</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">acc</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="function" style="color: #8250df;">do_pop_at</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">tail</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">index</span> <span class="operator" style="color: #0a3069; ">-</span> <span class="text" style="color: #57606a; ">1</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">default</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">head</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">acc</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation" style="color: #24292f;">)</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="comment" style="color: #57606a;"># zip</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">do_zip</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">acc</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="variable" style="color: #24292f;">converter</span> <span class="operator" style="color: #0a3069; ">=</span> <span class="keyword" style="color: #cf222e;">fn</span> <span class="variable" style="color: #24292f;">x</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">acc</span> <span class="operator" style="color: #0a3069; ">-&gt;</span> <span class="function" style="color: #8250df;">do_zip_each</span><span class="punctuation" style="color: #24292f;">(</span><span class="function" style="color: #8250df;">to_list</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">x</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">acc</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">end</span>

    <span class="keyword" style="color: #cf222e;">case</span> <span class="module" style="color: #953800; ">:lists</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">mapfoldl</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">converter</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
      <span class="punctuation" style="color: #24292f;">{</span><span class="comment" style="color: #57606a;">_</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="constant" style="color: #0550ae;">nil</span><span class="punctuation" style="color: #24292f;">}</span> <span class="operator" style="color: #0a3069; ">-&gt;</span>
        <span class="module" style="color: #953800; ">:lists</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">reverse</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">acc</span><span class="punctuation" style="color: #24292f;">)</span>

      <span class="punctuation" style="color: #24292f;">{</span><span class="variable" style="color: #24292f;">mlist</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">heads</span><span class="punctuation" style="color: #24292f;">}</span> <span class="operator" style="color: #0a3069; ">-&gt;</span>
        <span class="function" style="color: #8250df;">do_zip</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">mlist</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="function" style="color: #8250df;">to_tuple</span><span class="punctuation" style="color: #24292f;">(</span><span class="module" style="color: #953800; ">:lists</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">reverse</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">heads</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation" style="color: #24292f;">)</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">acc</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation" style="color: #24292f;">)</span>
    <span class="keyword" style="color: #cf222e;">end</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">do_zip_each</span><span class="punctuation" style="color: #24292f;">(</span><span class="comment" style="color: #57606a;">_</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="constant" style="color: #0550ae;">nil</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="punctuation" style="color: #24292f;">{</span><span class="constant" style="color: #0550ae;">nil</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="constant" style="color: #0550ae;">nil</span><span class="punctuation" style="color: #24292f;">}</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">do_zip_each</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">head</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">tail</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="variable" style="color: #24292f;">acc</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="punctuation" style="color: #24292f;">{</span><span class="variable" style="color: #24292f;">tail</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="punctuation" style="color: #24292f;">[</span><span class="variable" style="color: #24292f;">head</span> <span class="operator" style="color: #0a3069; ">|</span> <span class="variable" style="color: #24292f;">acc</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation" style="color: #24292f;">}</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">do_zip_each</span><span class="punctuation" style="color: #24292f;">(</span><span class="punctuation" style="color: #24292f;">[</span><span class="punctuation" style="color: #24292f;">]</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="comment" style="color: #57606a;">_</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">do</span>
    <span class="punctuation" style="color: #24292f;">{</span><span class="constant" style="color: #0550ae;">nil</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="constant" style="color: #0550ae;">nil</span><span class="punctuation" style="color: #24292f;">}</span>
  <span class="keyword" style="color: #cf222e;">end</span>

  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">to_list</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">tuple</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="function" style="color: #8250df;">is_tuple</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">tuple</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="string" style="color: #0a3069;">do: </span><span class="module" style="color: #953800; ">Tuple</span><span class="operator" style="color: #0a3069; ">.</span><span class="function" style="color: #8250df;">to_list</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">tuple</span><span class="punctuation" style="color: #24292f;">)</span>
  <span class="keyword" style="color: #cf222e;">defp</span> <span class="function" style="color: #8250df;">to_list</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span> <span class="keyword" style="color: #cf222e;">when</span> <span class="function" style="color: #8250df;">is_list</span><span class="punctuation" style="color: #24292f;">(</span><span class="variable" style="color: #24292f;">list</span><span class="punctuation" style="color: #24292f;">)</span><span class="punctuation delimiter" style="color: #24292f;">,</span> <span class="string" style="color: #0a3069;">do: </span><span class="variable" style="color: #24292f;">list</span>
<span class="keyword" style="color: #cf222e;">end</span>
</code></pre>
</body>
</html>
