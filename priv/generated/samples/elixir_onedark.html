<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Autumn Sample - elixir - onedark</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap" rel="stylesheet">
  <style>
    * {
      font-family: 'JetBrains Mono', monospace;
      font-size: 14px;
      line-height: 24px;
    }
    pre {
      margin: 20px;
    }
  </style>
  <style>
  * {
    color: #ABB2BF;
  }
  body {
    background-color: #282C34;
  }
</style>

</head>
<body>
  <pre class="autumn highlight" style="background-color: #282C34;">
<code class="language-elixir"><span class="keyword" style="color: #E06C75;">defmodule</span> <span class="namespace" style="color: #61AFEF;">List</span> <span class="keyword" style="color: #E06C75;">do</span>
  <span class="comment" style="font-style: italic; color: #5C6370;">@</span><span class="comment" style="font-style: italic; color: #5C6370;">moduledoc</span> <span class="comment" style="font-style: italic; color: #5C6370;">&quot;&quot;&quot;
  Linked lists hold zero, one, or more elements in the chosen order.

  Lists in Elixir are specified between square brackets:

      iex&gt; [1, &quot;two&quot;, 3, :four]
      [1, &quot;two&quot;, 3, :four]

  Two lists can be concatenated and subtracted using the
  `++&#x2f;2` and `--&#x2f;2` operators:

      iex&gt; [1, 2, 3] ++ [4, 5, 6]
      [1, 2, 3, 4, 5, 6]
      iex&gt; [1, true, 2, false, 3, true] -- [true, false]
      [1, 2, 3, true]

  An element can be prepended to a list using `|`:

      iex&gt; new = 0
      iex&gt; list = [1, 2, 3]
      iex&gt; [new | list]
      [0, 1, 2, 3]

  Lists in Elixir are effectively linked lists, which means
  they are internally represented in pairs containing the
  head and the tail of a list:

      iex&gt; [head | tail] = [1, 2, 3]
      iex&gt; head
      1
      iex&gt; tail
      [2, 3]

  Similarly, we could write the list `[1, 2, 3]` using only
  such pairs (called cons cells):

      iex&gt; [1 | [2 | [3 | []]]]
      [1, 2, 3]

  Some lists, called improper lists, do not have an empty list as
  the second element in the last cons cell:

      iex&gt; [1 | [2 | [3 | 4]]]
      [1, 2, 3 | 4]

  Although improper lists are generally avoided, they are used in some
  special circumstances like iodata and chardata entities (see the `IO` module).

  Due to their cons cell based representation, prepending an element
  to a list is always fast (constant time), while appending becomes
  slower as the list grows in size (linear time):

      iex&gt; list = [1, 2, 3]
      iex&gt; [0 | list] # fast
      [0, 1, 2, 3]
      iex&gt; list ++ [4] # slow
      [1, 2, 3, 4]

  Most of the functions in this module work in linear time. This means that
  the time it takes to perform an operation grows at the same rate as the
  length of the list. For example `length&#x2f;1` and `last&#x2f;1` will run in linear
  time because they need to iterate through every element of the list, but
  `first&#x2f;1` will run in constant time because it only needs the first element.

  Lists also implement the `Enumerable` protocol, so many functions to work with
  lists are found in the `Enum` module. Additionally, the following functions and
  operators for lists are found in `Kernel`:

    * `++&#x2f;2`
    * `--&#x2f;2`
    * `hd&#x2f;1`
    * `tl&#x2f;1`
    * `in&#x2f;2`
    * `length&#x2f;1`

  ## Charlists

  If a list is made of non-negative integers, where each integer represents a
  Unicode code point, the list can also be called a charlist. These integers
  must:

    * be within the range `0..0x10FFFF` (`0..1_114_111`);
    * and be out of the range `0xD800..0xDFFF` (`55_296..57_343`), which is
      reserved in Unicode for UTF-16 surrogate pairs.

  Elixir uses the [`~c` sigil](`sigil_c&#x2f;2`) to define charlists:

      iex&gt; ~c&quot;hÃ©llo&quot;
      [104, 233, 108, 108, 111]

  In particular, charlists will be printed back by default with the `~c`
  sigil if they contain only printable ASCII characters:

      iex&gt; ~c&quot;abc&quot;
      ~c&quot;abc&quot;

  Even though the representation changed, the raw data does remain a list of
  integers, which can be handled as such:

      iex&gt; inspect(~c&quot;abc&quot;, charlists: :as_list)
      &quot;[97, 98, 99]&quot;
      iex&gt; Enum.map(~c&quot;abc&quot;, fn num -&gt; 1000 + num end)
      [1097, 1098, 1099]

  You can use the `IEx.Helpers.i&#x2f;1` helper to get a condensed rundown on
  charlists in IEx when you encounter them, which shows you the type, description
  and also the raw representation in one single summary.

  The rationale behind this behaviour is to better support
  Erlang libraries which may return text as charlists
  instead of Elixir strings. In Erlang, charlists are the default
  way of handling strings, while in Elixir it&#x27;s binaries. One
  example of such functions is `Application.loaded_applications&#x2f;0`:

      Application.loaded_applications()
      #=&gt;  [
      #=&gt;    {:stdlib, ~c&quot;ERTS  CXC 138 10&quot;, ~c&quot;2.6&quot;},
      #=&gt;    {:compiler, ~c&quot;ERTS  CXC 138 10&quot;, ~c&quot;6.0.1&quot;},
      #=&gt;    {:elixir, ~c&quot;elixir&quot;, ~c&quot;1.0.0&quot;},
      #=&gt;    {:kernel, ~c&quot;ERTS  CXC 138 10&quot;, ~c&quot;4.1&quot;},
      #=&gt;    {:logger, ~c&quot;logger&quot;, ~c&quot;1.0.0&quot;}
      #=&gt;  ]

  A list can be checked if it is made of only printable ASCII
  characters with `ascii_printable?&#x2f;2`.

  Improper lists are never deemed as charlists.
  &quot;&quot;&quot;</span>

  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">compile</span> <span class="string" style="color: #98C379;">:inline_list_funcs</span>

  <span class="comment" style="font-style: italic; color: #5C6370;">@</span><span class="comment" style="font-style: italic; color: #5C6370;">doc</span> <span class="comment" style="font-style: italic; color: #5C6370;">&quot;&quot;&quot;
  Deletes the given `element` from the `list`. Returns a new list without
  the element.

  If the `element` occurs more than once in the `list`, just
  the first occurrence is removed.

  ## Examples

      iex&gt; List.delete([:a, :b, :c], :a)
      [:b, :c]

      iex&gt; List.delete([:a, :b, :c], :d)
      [:a, :b, :c]

      iex&gt; List.delete([:a, :b, :b, :c], :b)
      [:a, :b, :c]

      iex&gt; List.delete([], :b)
      []

  &quot;&quot;&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">delete</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">any</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">]</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">delete</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">...</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">any</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="" style="color: #ABB2BF;">list</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">delete</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">element</span><span class="" style="color: #ABB2BF;">)</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">delete</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">element</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">element</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">,</span> <span class="string" style="color: #98C379;">do: </span><span class="" style="color: #ABB2BF;">list</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">delete</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">other</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">element</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">,</span> <span class="string" style="color: #98C379;">do: </span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">other</span> <span class="operator" style="color: #C678DD;">|</span> <span class="function" style="color: #61AFEF;">delete</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">element</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">]</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">delete</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="comment" style="font-style: italic; color: #5C6370;">_element</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">,</span> <span class="string" style="color: #98C379;">do: </span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">]</span>

  <span class="comment" style="font-style: italic; color: #5C6370;">@</span><span class="comment" style="font-style: italic; color: #5C6370;">doc</span> <span class="comment" style="font-style: italic; color: #5C6370;">&quot;&quot;&quot;
  Duplicates the given element `n` times in a list.

  `n` is an integer greater than or equal to `0`.

  If `n` is `0`, an empty list is returned.

  ## Examples

      iex&gt; List.duplicate(&quot;hello&quot;, 0)
      []

      iex&gt; List.duplicate(&quot;hi&quot;, 1)
      [&quot;hi&quot;]

      iex&gt; List.duplicate(&quot;bye&quot;, 2)
      [&quot;bye&quot;, &quot;bye&quot;]

      iex&gt; List.duplicate([1, 2], 3)
      [[1, 2], [1, 2], [1, 2]]

  &quot;&quot;&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">duplicate</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">any</span><span class="" style="color: #ABB2BF;">,</span> <span class="constant numeric" style="color: #D19A66;">0</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">]</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">duplicate</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">elem</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">pos_integer</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">elem</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">...</span><span class="" style="color: #ABB2BF;">]</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="string" style="color: #98C379;">elem: </span><span class="" style="color: #ABB2BF;">var</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">duplicate</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">elem</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">n</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="namespace" style="color: #61AFEF;">:lists</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">duplicate</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">n</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">elem</span><span class="" style="color: #ABB2BF;">)</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370;">@</span><span class="comment" style="font-style: italic; color: #5C6370;">doc</span> <span class="comment" style="font-style: italic; color: #5C6370;">&quot;&quot;&quot;
  Flattens the given `list` of nested lists.

  Empty list elements are discarded.

  ## Examples

      iex&gt; List.flatten([1, [[2], 3]])
      [1, 2, 3]

      iex&gt; List.flatten([[], [[], []]])
      []

  &quot;&quot;&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">flatten</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">deep_list</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="" style="color: #ABB2BF;">list</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="string" style="color: #98C379;">deep_list: </span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">any</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">deep_list</span><span class="" style="color: #ABB2BF;">]</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">flatten</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="namespace" style="color: #61AFEF;">:lists</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">flatten</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370;">@</span><span class="comment" style="font-style: italic; color: #5C6370;">doc</span> <span class="comment" style="font-style: italic; color: #5C6370;">&quot;&quot;&quot;
  Flattens the given `list` of nested lists.
  The list `tail` will be added at the end of
  the flattened list.

  Empty list elements from `list` are discarded,
  but not the ones from `tail`.

  ## Examples

      iex&gt; List.flatten([1, [[2], 3]], [4, 5])
      [1, 2, 3, 4, 5]

      iex&gt; List.flatten([1, [], 2], [3, [], 4])
      [1, 2, 3, [], 4]

  &quot;&quot;&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">flatten</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">deep_list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">elem</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">elem</span><span class="" style="color: #ABB2BF;">]</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="string" style="color: #98C379;">elem: </span><span class="" style="color: #ABB2BF;">var</span><span class="" style="color: #ABB2BF;">,</span> <span class="string" style="color: #98C379;">deep_list: </span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">elem</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">deep_list</span><span class="" style="color: #ABB2BF;">]</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">flatten</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">tail</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="namespace" style="color: #61AFEF;">:lists</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">flatten</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">tail</span><span class="" style="color: #ABB2BF;">)</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370;">@</span><span class="comment" style="font-style: italic; color: #5C6370;">doc</span> <span class="comment" style="font-style: italic; color: #5C6370;">&quot;&quot;&quot;
  Folds (reduces) the given list from the left with
  a function. Requires an accumulator, which can be any value.

  ## Examples

      iex&gt; List.foldl([5, 5], 10, fn x, acc -&gt; x + acc end)
      20

      iex&gt; List.foldl([1, 2, 3, 4], 0, fn x, acc -&gt; x - acc end)
      2

      iex&gt; List.foldl([1, 2, 3], {0, 0}, fn x, {a1, a2} -&gt; {a1 + x, a2 - x} end)
      {6, -6}

  &quot;&quot;&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">foldl</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">elem</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">acc</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">elem</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">acc</span> <span class="operator" style="color: #C678DD;">-&gt;</span> <span class="" style="color: #ABB2BF;">acc</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="" style="color: #ABB2BF;">acc</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="string" style="color: #98C379;">elem: </span><span class="" style="color: #ABB2BF;">var</span><span class="" style="color: #ABB2BF;">,</span> <span class="string" style="color: #98C379;">acc: </span><span class="" style="color: #ABB2BF;">var</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">foldl</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">acc</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">fun</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="function" style="color: #61AFEF;">is_list</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">and</span> <span class="function" style="color: #61AFEF;">is_function</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">fun</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="namespace" style="color: #61AFEF;">:lists</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">foldl</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">fun</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">acc</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370;">@</span><span class="comment" style="font-style: italic; color: #5C6370;">doc</span> <span class="comment" style="font-style: italic; color: #5C6370;">&quot;&quot;&quot;
  Folds (reduces) the given list from the right with
  a function. Requires an accumulator, which can be any value.

  ## Examples

      iex&gt; List.foldr([1, 2, 3, 4], 0, fn x, acc -&gt; x - acc end)
      -2

      iex&gt; List.foldr([1, 2, 3, 4], %{sum: 0, product: 1}, fn x, %{sum: a1, product: a2} -&gt; %{sum: a1 + x, product: a2 * x} end)
      %{product: 24, sum: 10}

  &quot;&quot;&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">foldr</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">elem</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">acc</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">elem</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">acc</span> <span class="operator" style="color: #C678DD;">-&gt;</span> <span class="" style="color: #ABB2BF;">acc</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="" style="color: #ABB2BF;">acc</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="string" style="color: #98C379;">elem: </span><span class="" style="color: #ABB2BF;">var</span><span class="" style="color: #ABB2BF;">,</span> <span class="string" style="color: #98C379;">acc: </span><span class="" style="color: #ABB2BF;">var</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">foldr</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">acc</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">fun</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="function" style="color: #61AFEF;">is_list</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">and</span> <span class="function" style="color: #61AFEF;">is_function</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">fun</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="namespace" style="color: #61AFEF;">:lists</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">foldr</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">fun</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">acc</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370;">@</span><span class="comment" style="font-style: italic; color: #5C6370;">doc</span> <span class="comment" style="font-style: italic; color: #5C6370;">&quot;&quot;&quot;
  Returns the first element in `list` or `default` if `list` is empty.

  `first&#x2f;2` has been introduced in Elixir v1.12.0, while `first&#x2f;1` has been available since v1.0.0.

  ## Examples

      iex&gt; List.first([])
      nil

      iex&gt; List.first([], 1)
      1

      iex&gt; List.first([1])
      1

      iex&gt; List.first([1, 2, 3])
      1

  &quot;&quot;&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">first</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">any</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="" style="color: #ABB2BF;">any</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">first</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">elem</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">...</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">any</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="" style="color: #ABB2BF;">elem</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="string" style="color: #98C379;">elem: </span><span class="" style="color: #ABB2BF;">var</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">first</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">default</span> <span class="operator" style="color: #C678DD;">\\</span> <span class="constant builtin" style="color: #D19A66;">nil</span><span class="" style="color: #ABB2BF;">)</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">first</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">default</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">,</span> <span class="string" style="color: #98C379;">do: </span><span class="" style="color: #ABB2BF;">default</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">first</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">head</span> <span class="operator" style="color: #C678DD;">|</span> <span class="comment" style="font-style: italic; color: #5C6370;">_</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="comment" style="font-style: italic; color: #5C6370;">_default</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">,</span> <span class="string" style="color: #98C379;">do: </span><span class="" style="color: #ABB2BF;">head</span>

  <span class="comment" style="font-style: italic; color: #5C6370;">@</span><span class="comment" style="font-style: italic; color: #5C6370;">doc</span> <span class="comment" style="font-style: italic; color: #5C6370;">&quot;&quot;&quot;
  Returns the last element in `list` or `default` if `list` is empty.

  `last&#x2f;2` has been introduced in Elixir v1.12.0, while `last&#x2f;1` has been available since v1.0.0.

  ## Examples

      iex&gt; List.last([])
      nil

      iex&gt; List.last([], 1)
      1

      iex&gt; List.last([1])
      1

      iex&gt; List.last([1, 2, 3])
      3

  &quot;&quot;&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">last</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">any</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="" style="color: #ABB2BF;">any</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">last</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">elem</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">...</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">any</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="" style="color: #ABB2BF;">elem</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="string" style="color: #98C379;">elem: </span><span class="" style="color: #ABB2BF;">var</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">compile</span> <span class="" style="color: #ABB2BF;">{</span><span class="string" style="color: #98C379;">:inline</span><span class="" style="color: #ABB2BF;">,</span> <span class="string" style="color: #98C379;">last: </span><span class="constant numeric" style="color: #D19A66;">2</span><span class="" style="color: #ABB2BF;">}</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">last</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">default</span> <span class="operator" style="color: #C678DD;">\\</span> <span class="constant builtin" style="color: #D19A66;">nil</span><span class="" style="color: #ABB2BF;">)</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">last</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">default</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">,</span> <span class="string" style="color: #98C379;">do: </span><span class="" style="color: #ABB2BF;">default</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">last</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">head</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="comment" style="font-style: italic; color: #5C6370;">_default</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">,</span> <span class="string" style="color: #98C379;">do: </span><span class="" style="color: #ABB2BF;">head</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">last</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="comment" style="font-style: italic; color: #5C6370;">_</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">tail</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">default</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">,</span> <span class="string" style="color: #98C379;">do: </span><span class="function" style="color: #61AFEF;">last</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">tail</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">default</span><span class="" style="color: #ABB2BF;">)</span>

  <span class="comment" style="font-style: italic; color: #5C6370;">@</span><span class="comment" style="font-style: italic; color: #5C6370;">doc</span> <span class="comment" style="font-style: italic; color: #5C6370;">&quot;&quot;&quot;
  Receives a list of tuples and returns the first tuple
  where the element at `position` in the tuple matches the
  given `key`.

  If no matching tuple is found, `default` is returned.

  ## Examples

      iex&gt; List.keyfind([a: 1, b: 2], :a, 0)
      {:a, 1}

      iex&gt; List.keyfind([a: 1, b: 2], 2, 1)
      {:b, 2}

      iex&gt; List.keyfind([a: 1, b: 2], :c, 0)
      nil

  This function works for any list of tuples:

      iex&gt; List.keyfind([{22, &quot;SSH&quot;}, {80, &quot;HTTP&quot;}], 22, 0)
      {22, &quot;SSH&quot;}

  &quot;&quot;&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">keyfind</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">tuple</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">any</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">non_neg_integer</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">any</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="" style="color: #ABB2BF;">any</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">keyfind</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">key</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">position</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">default</span> <span class="operator" style="color: #C678DD;">\\</span> <span class="constant builtin" style="color: #D19A66;">nil</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="function" style="color: #61AFEF;">is_integer</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">position</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="namespace" style="color: #61AFEF;">:lists</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">keyfind</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">key</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">position</span> <span class="operator" style="color: #C678DD;">+</span> <span class="constant numeric" style="color: #D19A66;">1</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">||</span> <span class="" style="color: #ABB2BF;">default</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370;">@</span><span class="comment" style="font-style: italic; color: #5C6370;">doc</span> <span class="comment" style="font-style: italic; color: #5C6370;">&quot;&quot;&quot;
  Receives a list of tuples and returns the first tuple
  where the element at `position` in the tuple matches the
  given `key`.

  If no matching tuple is found, an error is raised.

  ## Examples

      iex&gt; List.keyfind!([a: 1, b: 2], :a, 0)
      {:a, 1}

      iex&gt; List.keyfind!([a: 1, b: 2], 2, 1)
      {:b, 2}

      iex&gt; List.keyfind!([a: 1, b: 2], :c, 0)
      ** (KeyError) key :c at position 0 not found in: [a: 1, b: 2]

  This function works for any list of tuples:

      iex&gt; List.keyfind!([{22, &quot;SSH&quot;}, {80, &quot;HTTP&quot;}], 22, 0)
      {22, &quot;SSH&quot;}

  &quot;&quot;&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">doc</span> <span class="string" style="color: #98C379;">since: </span><span class="string" style="color: #98C379;">&quot;1.13.0&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">keyfind!</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">tuple</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">any</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">non_neg_integer</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="" style="color: #ABB2BF;">any</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">keyfind!</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">key</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">position</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="function" style="color: #61AFEF;">is_integer</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">position</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="namespace" style="color: #61AFEF;">:lists</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">keyfind</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">key</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">position</span> <span class="operator" style="color: #C678DD;">+</span> <span class="constant numeric" style="color: #D19A66;">1</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">||</span>
      <span class="keyword" style="color: #E06C75;">raise</span> <span class="namespace" style="color: #61AFEF;">KeyError</span><span class="" style="color: #ABB2BF;">,</span>
        <span class="string" style="color: #98C379;">key: </span><span class="" style="color: #ABB2BF;">key</span><span class="" style="color: #ABB2BF;">,</span>
        <span class="string" style="color: #98C379;">term: </span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span>
        <span class="string" style="color: #98C379;">message:
</span>          <span class="string" style="color: #98C379;">&quot;key <span class="" style="color: #ABB2BF;">#{</span><span class="function" style="color: #61AFEF;">inspect</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">key</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">}</span> at position <span class="" style="color: #ABB2BF;">#{</span><span class="function" style="color: #61AFEF;">inspect</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">position</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">}</span> not found in: <span class="" style="color: #ABB2BF;">#{</span><span class="function" style="color: #61AFEF;">inspect</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">}</span>&quot;</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370;">@</span><span class="comment" style="font-style: italic; color: #5C6370;">doc</span> <span class="comment" style="font-style: italic; color: #5C6370;">&quot;&quot;&quot;
  Receives a list of tuples and returns `true` if there is
  a tuple where the element at `position` in the tuple matches
  the given `key`.

  ## Examples

      iex&gt; List.keymember?([a: 1, b: 2], :a, 0)
      true

      iex&gt; List.keymember?([a: 1, b: 2], 2, 1)
      true

      iex&gt; List.keymember?([a: 1, b: 2], :c, 0)
      false

  This function works for any list of tuples:

      iex&gt; List.keymember?([{22, &quot;SSH&quot;}, {80, &quot;HTTP&quot;}], 22, 0)
      true

  &quot;&quot;&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">keymember?</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">tuple</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">any</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">non_neg_integer</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="" style="color: #ABB2BF;">boolean</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">keymember?</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">key</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">position</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="function" style="color: #61AFEF;">is_integer</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">position</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="namespace" style="color: #61AFEF;">:lists</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">keymember</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">key</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">position</span> <span class="operator" style="color: #C678DD;">+</span> <span class="constant numeric" style="color: #D19A66;">1</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370;">@</span><span class="comment" style="font-style: italic; color: #5C6370;">doc</span> <span class="comment" style="font-style: italic; color: #5C6370;">&quot;&quot;&quot;
  Receives a list of tuples and if the identified element by `key` at `position`
  exists, it is replaced with `new_tuple`.

  ## Examples

      iex&gt; List.keyreplace([a: 1, b: 2], :a, 0, {:a, 3})
      [a: 3, b: 2]

      iex&gt; List.keyreplace([a: 1, b: 2], :a, 1, {:a, 3})
      [a: 1, b: 2]

  This function works for any list of tuples:

      iex&gt; List.keyreplace([{22, &quot;SSH&quot;}, {80, &quot;HTTP&quot;}], 22, 0, {22, &quot;Secure Shell&quot;})
      [{22, &quot;Secure Shell&quot;}, {80, &quot;HTTP&quot;}]

  &quot;&quot;&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">keyreplace</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">tuple</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">any</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">non_neg_integer</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">tuple</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">tuple</span><span class="" style="color: #ABB2BF;">]</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">keyreplace</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">key</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">position</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">new_tuple</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="function" style="color: #61AFEF;">is_integer</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">position</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="namespace" style="color: #61AFEF;">:lists</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">keyreplace</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">key</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">position</span> <span class="operator" style="color: #C678DD;">+</span> <span class="constant numeric" style="color: #D19A66;">1</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">new_tuple</span><span class="" style="color: #ABB2BF;">)</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370;">@</span><span class="comment" style="font-style: italic; color: #5C6370;">doc</span> <span class="comment" style="font-style: italic; color: #5C6370;">&quot;&quot;&quot;
  Receives a list of tuples and sorts the elements
  at `position` of the tuples.

  The sort is stable.

  A `sorter` argument is available since Elixir v1.14.0. Similar to
  `Enum.sort&#x2f;2`, the sorter can be an anonymous function, the atoms
  `:asc` or `:desc`, or module that implements a compare function.

  ## Examples

      iex&gt; List.keysort([a: 5, b: 1, c: 3], 1)
      [b: 1, c: 3, a: 5]

      iex&gt; List.keysort([a: 5, c: 1, b: 3], 0)
      [a: 5, b: 3, c: 1]

  To sort in descending order:

      iex&gt; List.keysort([a: 5, c: 1, b: 3], 0, :desc)
      [c: 1, b: 3, a: 5]

  As in `Enum.sort&#x2f;2`, avoid using the default sorting function to sort
  structs, as by default it performs structural comparison instead of a
  semantic one. In such cases, you shall pass a sorting function as third
  element or any module that implements a `compare&#x2f;2` function. For example,
  if you have tuples with user names and their birthday, and you want to
  sort on their birthday, in both ascending and descending order, you should
  do:

      iex&gt; users = [
      ...&gt;   {&quot;Ellis&quot;, ~D[1943-05-11]},
      ...&gt;   {&quot;Lovelace&quot;, ~D[1815-12-10]},
      ...&gt;   {&quot;Turing&quot;, ~D[1912-06-23]}
      ...&gt; ]
      iex&gt; List.keysort(users, 1, Date)
      [
        {&quot;Lovelace&quot;, ~D[1815-12-10]},
        {&quot;Turing&quot;, ~D[1912-06-23]},
        {&quot;Ellis&quot;, ~D[1943-05-11]}
      ]
      iex&gt; List.keysort(users, 1, {:desc, Date})
      [
        {&quot;Ellis&quot;, ~D[1943-05-11]},
        {&quot;Turing&quot;, ~D[1912-06-23]},
        {&quot;Lovelace&quot;, ~D[1815-12-10]}
      ]

  &quot;&quot;&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">doc</span> <span class="string" style="color: #98C379;">since: </span><span class="string" style="color: #98C379;">&quot;1.14.0&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">keysort</span><span class="" style="color: #ABB2BF;">(</span>
          <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">tuple</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span>
          <span class="" style="color: #ABB2BF;">non_neg_integer</span><span class="" style="color: #ABB2BF;">,</span>
          <span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">any</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">any</span> <span class="operator" style="color: #C678DD;">-&gt;</span> <span class="" style="color: #ABB2BF;">boolean</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">|</span> <span class="string" style="color: #98C379;">:asc</span> <span class="operator" style="color: #C678DD;">|</span> <span class="string" style="color: #98C379;">:desc</span> <span class="operator" style="color: #C678DD;">|</span> <span class="function" style="color: #61AFEF;">module</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">{</span><span class="string" style="color: #98C379;">:asc</span> <span class="operator" style="color: #C678DD;">|</span> <span class="string" style="color: #98C379;">:desc</span><span class="" style="color: #ABB2BF;">,</span> <span class="function" style="color: #61AFEF;">module</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">}</span>
        <span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">tuple</span><span class="" style="color: #ABB2BF;">]</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">keysort</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">position</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">sorter</span> <span class="operator" style="color: #C678DD;">\\</span> <span class="string" style="color: #98C379;">:asc</span><span class="" style="color: #ABB2BF;">)</span>

  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">keysort</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">position</span><span class="" style="color: #ABB2BF;">,</span> <span class="string" style="color: #98C379;">:asc</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="function" style="color: #61AFEF;">is_list</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">and</span> <span class="function" style="color: #61AFEF;">is_integer</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">position</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="namespace" style="color: #61AFEF;">:lists</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">keysort</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">position</span> <span class="operator" style="color: #C678DD;">+</span> <span class="constant numeric" style="color: #D19A66;">1</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">keysort</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">position</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">sorter</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="function" style="color: #61AFEF;">is_list</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">and</span> <span class="function" style="color: #61AFEF;">is_integer</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">position</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="namespace" style="color: #61AFEF;">:lists</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">sort</span><span class="" style="color: #ABB2BF;">(</span><span class="function" style="color: #61AFEF;">keysort_fun</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">sorter</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">position</span> <span class="operator" style="color: #C678DD;">+</span> <span class="constant numeric" style="color: #D19A66;">1</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">keysort_fun</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">sorter</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">position</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="function" style="color: #61AFEF;">is_function</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">sorter</span><span class="" style="color: #ABB2BF;">,</span> <span class="constant numeric" style="color: #D19A66;">2</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">,</span>
    <span class="string" style="color: #98C379;">do: </span><span class="operator" style="color: #C678DD;">&amp;</span><span class="" style="color: #ABB2BF;">sorter</span><span class="operator" style="color: #C678DD;">.</span><span class="" style="color: #ABB2BF;">(</span><span class="namespace" style="color: #61AFEF;">:erlang</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">element</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">position</span><span class="" style="color: #ABB2BF;">,</span> <span class="operator" style="color: #C678DD;">&amp;</span><span class="operator" style="color: #C678DD;">1</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">,</span> <span class="namespace" style="color: #61AFEF;">:erlang</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">element</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">position</span><span class="" style="color: #ABB2BF;">,</span> <span class="operator" style="color: #C678DD;">&amp;</span><span class="operator" style="color: #C678DD;">2</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">)</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">keysort_fun</span><span class="" style="color: #ABB2BF;">(</span><span class="string" style="color: #98C379;">:desc</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">position</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">,</span>
    <span class="string" style="color: #98C379;">do: </span><span class="operator" style="color: #C678DD;">&amp;</span><span class="" style="color: #ABB2BF;">(</span><span class="namespace" style="color: #61AFEF;">:erlang</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">element</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">position</span><span class="" style="color: #ABB2BF;">,</span> <span class="operator" style="color: #C678DD;">&amp;</span><span class="operator" style="color: #C678DD;">1</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">&gt;=</span> <span class="namespace" style="color: #61AFEF;">:erlang</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">element</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">position</span><span class="" style="color: #ABB2BF;">,</span> <span class="operator" style="color: #C678DD;">&amp;</span><span class="operator" style="color: #C678DD;">2</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">)</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">keysort_fun</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">module</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">position</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="function" style="color: #61AFEF;">is_atom</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">module</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">,</span>
    <span class="string" style="color: #98C379;">do: </span><span class="operator" style="color: #C678DD;">&amp;</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">module</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">compare</span><span class="" style="color: #ABB2BF;">(</span><span class="namespace" style="color: #61AFEF;">:erlang</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">element</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">position</span><span class="" style="color: #ABB2BF;">,</span> <span class="operator" style="color: #C678DD;">&amp;</span><span class="operator" style="color: #C678DD;">1</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">,</span> <span class="namespace" style="color: #61AFEF;">:erlang</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">element</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">position</span><span class="" style="color: #ABB2BF;">,</span> <span class="operator" style="color: #C678DD;">&amp;</span><span class="operator" style="color: #C678DD;">2</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">!=</span> <span class="string" style="color: #98C379;">:gt</span><span class="" style="color: #ABB2BF;">)</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">keysort_fun</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">{</span><span class="string" style="color: #98C379;">:asc</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">module</span><span class="" style="color: #ABB2BF;">}</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">position</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="function" style="color: #61AFEF;">is_atom</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">module</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">,</span>
    <span class="string" style="color: #98C379;">do: </span><span class="operator" style="color: #C678DD;">&amp;</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">module</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">compare</span><span class="" style="color: #ABB2BF;">(</span><span class="namespace" style="color: #61AFEF;">:erlang</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">element</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">position</span><span class="" style="color: #ABB2BF;">,</span> <span class="operator" style="color: #C678DD;">&amp;</span><span class="operator" style="color: #C678DD;">1</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">,</span> <span class="namespace" style="color: #61AFEF;">:erlang</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">element</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">position</span><span class="" style="color: #ABB2BF;">,</span> <span class="operator" style="color: #C678DD;">&amp;</span><span class="operator" style="color: #C678DD;">2</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">!=</span> <span class="string" style="color: #98C379;">:gt</span><span class="" style="color: #ABB2BF;">)</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">keysort_fun</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">{</span><span class="string" style="color: #98C379;">:desc</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">module</span><span class="" style="color: #ABB2BF;">}</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">position</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="function" style="color: #61AFEF;">is_atom</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">module</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">,</span>
    <span class="string" style="color: #98C379;">do: </span><span class="operator" style="color: #C678DD;">&amp;</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">module</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">compare</span><span class="" style="color: #ABB2BF;">(</span><span class="namespace" style="color: #61AFEF;">:erlang</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">element</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">position</span><span class="" style="color: #ABB2BF;">,</span> <span class="operator" style="color: #C678DD;">&amp;</span><span class="operator" style="color: #C678DD;">1</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">,</span> <span class="namespace" style="color: #61AFEF;">:erlang</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">element</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">position</span><span class="" style="color: #ABB2BF;">,</span> <span class="operator" style="color: #C678DD;">&amp;</span><span class="operator" style="color: #C678DD;">2</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">!=</span> <span class="string" style="color: #98C379;">:lt</span><span class="" style="color: #ABB2BF;">)</span>

  <span class="comment" style="font-style: italic; color: #5C6370;">@</span><span class="comment" style="font-style: italic; color: #5C6370;">doc</span> <span class="comment" style="font-style: italic; color: #5C6370;">&quot;&quot;&quot;
  Receives a `list` of tuples and replaces the element
  identified by `key` at `position` with `new_tuple`.

  If the element does not exist, it is added to the end of the `list`.

  ## Examples

      iex&gt; List.keystore([a: 1, b: 2], :a, 0, {:a, 3})
      [a: 3, b: 2]

      iex&gt; List.keystore([a: 1, b: 2], :c, 0, {:c, 3})
      [a: 1, b: 2, c: 3]

  This function works for any list of tuples:

      iex&gt; List.keystore([{22, &quot;SSH&quot;}], 80, 0, {80, &quot;HTTP&quot;})
      [{22, &quot;SSH&quot;}, {80, &quot;HTTP&quot;}]

  &quot;&quot;&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">keystore</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">tuple</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">any</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">non_neg_integer</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">tuple</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">tuple</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">...</span><span class="" style="color: #ABB2BF;">]</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">keystore</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">key</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">position</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">new_tuple</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="function" style="color: #61AFEF;">is_integer</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">position</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="namespace" style="color: #61AFEF;">:lists</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">keystore</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">key</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">position</span> <span class="operator" style="color: #C678DD;">+</span> <span class="constant numeric" style="color: #D19A66;">1</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">new_tuple</span><span class="" style="color: #ABB2BF;">)</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370;">@</span><span class="comment" style="font-style: italic; color: #5C6370;">doc</span> <span class="comment" style="font-style: italic; color: #5C6370;">&quot;&quot;&quot;
  Receives a `list` of tuples and deletes the first tuple
  where the element at `position` matches the
  given `key`. Returns the new list.

  ## Examples

      iex&gt; List.keydelete([a: 1, b: 2], :a, 0)
      [b: 2]

      iex&gt; List.keydelete([a: 1, b: 2], 2, 1)
      [a: 1]

      iex&gt; List.keydelete([a: 1, b: 2], :c, 0)
      [a: 1, b: 2]

  This function works for any list of tuples:

      iex&gt; List.keydelete([{22, &quot;SSH&quot;}, {80, &quot;HTTP&quot;}], 80, 0)
      [{22, &quot;SSH&quot;}]

  &quot;&quot;&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">keydelete</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">tuple</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">any</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">non_neg_integer</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">tuple</span><span class="" style="color: #ABB2BF;">]</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">keydelete</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">key</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">position</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="function" style="color: #61AFEF;">is_integer</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">position</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="namespace" style="color: #61AFEF;">:lists</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">keydelete</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">key</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">position</span> <span class="operator" style="color: #C678DD;">+</span> <span class="constant numeric" style="color: #D19A66;">1</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370;">@</span><span class="comment" style="font-style: italic; color: #5C6370;">doc</span> <span class="comment" style="font-style: italic; color: #5C6370;">&quot;&quot;&quot;
  Receives a `list` of tuples and returns the first tuple
  where the element at `position` in the tuple matches the
  given `key`, as well as the `list` without found tuple.

  If such a tuple is not found, `nil` will be returned.

  ## Examples

      iex&gt; List.keytake([a: 1, b: 2], :a, 0)
      {{:a, 1}, [b: 2]}

      iex&gt; List.keytake([a: 1, b: 2], 2, 1)
      {{:b, 2}, [a: 1]}

      iex&gt; List.keytake([a: 1, b: 2], :c, 0)
      nil

  This function works for any list of tuples:

      iex&gt; List.keytake([{22, &quot;SSH&quot;}, {80, &quot;HTTP&quot;}], 80, 0)
      {{80, &quot;HTTP&quot;}, [{22, &quot;SSH&quot;}]}

  &quot;&quot;&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">keytake</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">tuple</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">any</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">non_neg_integer</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="" style="color: #ABB2BF;">{</span><span class="" style="color: #ABB2BF;">tuple</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">tuple</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">}</span> <span class="operator" style="color: #C678DD;">|</span> <span class="constant builtin" style="color: #D19A66;">nil</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">keytake</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">key</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">position</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="function" style="color: #61AFEF;">is_integer</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">position</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="keyword" style="color: #E06C75;">case</span> <span class="namespace" style="color: #61AFEF;">:lists</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">keytake</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">key</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">position</span> <span class="operator" style="color: #C678DD;">+</span> <span class="constant numeric" style="color: #D19A66;">1</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
      <span class="" style="color: #ABB2BF;">{</span><span class="string" style="color: #98C379;">:value</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">element</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">}</span> <span class="operator" style="color: #C678DD;">-&gt;</span> <span class="" style="color: #ABB2BF;">{</span><span class="" style="color: #ABB2BF;">element</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">}</span>
      <span class="constant builtin" style="color: #D19A66;">false</span> <span class="operator" style="color: #C678DD;">-&gt;</span> <span class="constant builtin" style="color: #D19A66;">nil</span>
    <span class="keyword" style="color: #E06C75;">end</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370;">@</span><span class="comment" style="font-style: italic; color: #5C6370;">doc</span> <span class="comment" style="font-style: italic; color: #5C6370;">&quot;&quot;&quot;
  Wraps `term` in a list if this is not list.

  If `term` is already a list, it returns the list.
  If `term` is `nil`, it returns an empty list.

  ## Examples

      iex&gt; List.wrap(&quot;hello&quot;)
      [&quot;hello&quot;]

      iex&gt; List.wrap([1, 2, 3])
      [1, 2, 3]

      iex&gt; List.wrap(nil)
      []

  &quot;&quot;&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">wrap</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">term</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="function" style="color: #61AFEF;">maybe_improper_list</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">)</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">wrap</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">term</span><span class="" style="color: #ABB2BF;">)</span>

  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">wrap</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="function" style="color: #61AFEF;">is_list</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="" style="color: #ABB2BF;">list</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">wrap</span><span class="" style="color: #ABB2BF;">(</span><span class="constant builtin" style="color: #D19A66;">nil</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">]</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">wrap</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">other</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">other</span><span class="" style="color: #ABB2BF;">]</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370;">@</span><span class="comment" style="font-style: italic; color: #5C6370;">doc</span> <span class="comment" style="font-style: italic; color: #5C6370;">&quot;&quot;&quot;
  Zips corresponding elements from each list in `list_of_lists`.

  The zipping finishes as soon as any list terminates.

  ## Examples

      iex&gt; List.zip([[1, 2], [3, 4], [5, 6]])
      [{1, 3, 5}, {2, 4, 6}]

      iex&gt; List.zip([[1, 2], [3], [5, 6]])
      [{1, 3, 5}]

  &quot;&quot;&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">zip</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">tuple</span><span class="" style="color: #ABB2BF;">]</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">zip</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">,</span> <span class="string" style="color: #98C379;">do: </span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">]</span>

  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">zip</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list_of_lists</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="function" style="color: #61AFEF;">is_list</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list_of_lists</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="function" style="color: #61AFEF;">do_zip</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list_of_lists</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">)</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370;">@</span><span class="comment" style="font-style: italic; color: #5C6370;">doc</span> <span class="comment" style="font-style: italic; color: #5C6370;">~S<span class="comment" style="font-style: italic; color: #5C6370;">&quot;&quot;&quot;</span>
  Checks if `list` is a charlist made only of printable ASCII characters.

  Takes an optional `limit` as a second argument. `ascii_printable?&#x2f;2` only
  checks the printability of the list up to the `limit`.

  A printable charlist in Elixir contains only the printable characters in the
  standard seven-bit ASCII character encoding, which are characters ranging from
  32 to 126 in decimal notation, plus the following control characters:

    * `?\a` - Bell
    * `?\b` - Backspace
    * `?\t` - Horizontal tab
    * `?\n` - Line feed
    * `?\v` - Vertical tab
    * `?\f` - Form feed
    * `?\r` - Carriage return
    * `?\e` - Escape

  For more information read the [Character groups](https:&#x2f;&#x2f;en.wikipedia.org&#x2f;wiki&#x2f;ASCII#Character_groups)
  section in the Wikipedia article of the [ASCII](https:&#x2f;&#x2f;en.wikipedia.org&#x2f;wiki&#x2f;ASCII) standard.

  ## Examples

      iex&gt; List.ascii_printable?(~c&quot;abc&quot;)
      true

      iex&gt; List.ascii_printable?(~c&quot;abc&quot; ++ [0])
      false

      iex&gt; List.ascii_printable?(~c&quot;abc&quot; ++ [0], 2)
      true

  Improper lists are not printable, even if made only of ASCII characters:

      iex&gt; List.ascii_printable?(~c&quot;abc&quot; ++ ?d)
      false

  <span class="comment" style="font-style: italic; color: #5C6370;">&quot;&quot;&quot;</span></span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">doc</span> <span class="string" style="color: #98C379;">since: </span><span class="string" style="color: #98C379;">&quot;1.6.0&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">ascii_printable?</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="constant numeric" style="color: #D19A66;">0</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="constant builtin" style="color: #D19A66;">true</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">ascii_printable?</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">limit</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="constant builtin" style="color: #D19A66;">true</span>
        <span class="keyword" style="color: #E06C75;">when</span> <span class="string" style="color: #98C379;">limit: </span><span class="string" style="color: #98C379;">:infinity</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">pos_integer</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">ascii_printable?</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">...</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">limit</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="" style="color: #ABB2BF;">boolean</span>
        <span class="keyword" style="color: #E06C75;">when</span> <span class="string" style="color: #98C379;">limit: </span><span class="string" style="color: #98C379;">:infinity</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">pos_integer</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">ascii_printable?</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">limit</span> <span class="operator" style="color: #C678DD;">\\</span> <span class="string" style="color: #98C379;">:infinity</span><span class="" style="color: #ABB2BF;">)</span>
      <span class="keyword" style="color: #E06C75;">when</span> <span class="function" style="color: #61AFEF;">is_list</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">and</span> <span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">limit</span> <span class="operator" style="color: #C678DD;">==</span> <span class="string" style="color: #98C379;">:infinity</span> <span class="keyword" style="color: #E06C75;">or</span> <span class="" style="color: #ABB2BF;">(</span><span class="function" style="color: #61AFEF;">is_integer</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">limit</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">and</span> <span class="" style="color: #ABB2BF;">limit</span> <span class="operator" style="color: #C678DD;">&gt;=</span> <span class="constant numeric" style="color: #D19A66;">0</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="function" style="color: #61AFEF;">ascii_printable_guarded?</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">limit</span><span class="" style="color: #ABB2BF;">)</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">ascii_printable_guarded?</span><span class="" style="color: #ABB2BF;">(</span><span class="comment" style="font-style: italic; color: #5C6370;">_</span><span class="" style="color: #ABB2BF;">,</span> <span class="constant numeric" style="color: #D19A66;">0</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="constant builtin" style="color: #D19A66;">true</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">ascii_printable_guarded?</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">char</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">rest</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">counter</span><span class="" style="color: #ABB2BF;">)</span>
       <span class="comment" style="font-style: italic; color: #5C6370;"># 7..13 is the range &#x27;\a\b\t\n\v\f\r&#x27;. 32..126 are ASCII printables.</span>
       <span class="keyword" style="color: #E06C75;">when</span> <span class="function" style="color: #61AFEF;">is_integer</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">char</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">and</span>
              <span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">char</span> <span class="operator" style="color: #C678DD;">&gt;=</span> <span class="constant numeric" style="color: #D19A66;">7</span> <span class="keyword" style="color: #E06C75;">and</span> <span class="" style="color: #ABB2BF;">char</span> <span class="operator" style="color: #C678DD;">&lt;=</span> <span class="constant numeric" style="color: #D19A66;">13</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">or</span> <span class="" style="color: #ABB2BF;">char</span> <span class="operator" style="color: #C678DD;">==</span> <span class="constant" style="color: #56B6C2;">?\e</span> <span class="keyword" style="color: #E06C75;">or</span> <span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">char</span> <span class="operator" style="color: #C678DD;">&gt;=</span> <span class="constant numeric" style="color: #D19A66;">32</span> <span class="keyword" style="color: #E06C75;">and</span> <span class="" style="color: #ABB2BF;">char</span> <span class="operator" style="color: #C678DD;">&lt;=</span> <span class="constant numeric" style="color: #D19A66;">126</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="function" style="color: #61AFEF;">ascii_printable_guarded?</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">rest</span><span class="" style="color: #ABB2BF;">,</span> <span class="function" style="color: #61AFEF;">decrement</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">counter</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">)</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">ascii_printable_guarded?</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="comment" style="font-style: italic; color: #5C6370;">_counter</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">,</span> <span class="string" style="color: #98C379;">do: </span><span class="constant builtin" style="color: #D19A66;">true</span>
  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">ascii_printable_guarded?</span><span class="" style="color: #ABB2BF;">(</span><span class="comment" style="font-style: italic; color: #5C6370;">_</span><span class="" style="color: #ABB2BF;">,</span> <span class="comment" style="font-style: italic; color: #5C6370;">_counter</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">,</span> <span class="string" style="color: #98C379;">do: </span><span class="constant builtin" style="color: #D19A66;">false</span>

  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">compile</span> <span class="" style="color: #ABB2BF;">{</span><span class="string" style="color: #98C379;">:inline</span><span class="" style="color: #ABB2BF;">,</span> <span class="string" style="color: #98C379;">decrement: </span><span class="constant numeric" style="color: #D19A66;">1</span><span class="" style="color: #ABB2BF;">}</span>
  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">decrement</span><span class="" style="color: #ABB2BF;">(</span><span class="string" style="color: #98C379;">:infinity</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">,</span> <span class="string" style="color: #98C379;">do: </span><span class="string" style="color: #98C379;">:infinity</span>
  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">decrement</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">counter</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">,</span> <span class="string" style="color: #98C379;">do: </span><span class="" style="color: #ABB2BF;">counter</span> <span class="operator" style="color: #C678DD;">-</span> <span class="constant numeric" style="color: #D19A66;">1</span>

  <span class="comment" style="font-style: italic; color: #5C6370;">@</span><span class="comment" style="font-style: italic; color: #5C6370;">doc</span> <span class="comment" style="font-style: italic; color: #5C6370;">&quot;&quot;&quot;
  Returns `true` if `list` is an improper list. Otherwise returns `false`.

  ## Examples

      iex&gt; List.improper?([1, 2 | 3])
      true

      iex&gt; List.improper?([1, 2, 3])
      false

  &quot;&quot;&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">doc</span> <span class="string" style="color: #98C379;">since: </span><span class="string" style="color: #98C379;">&quot;1.8.0&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">improper?</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">maybe_improper_list</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="" style="color: #ABB2BF;">boolean</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">improper?</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="function" style="color: #61AFEF;">is_list</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">and</span> <span class="function" style="color: #61AFEF;">length</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">&gt;=</span> <span class="constant numeric" style="color: #D19A66;">0</span><span class="" style="color: #ABB2BF;">,</span> <span class="string" style="color: #98C379;">do: </span><span class="constant builtin" style="color: #D19A66;">false</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">improper?</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="function" style="color: #61AFEF;">is_list</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">,</span> <span class="string" style="color: #98C379;">do: </span><span class="constant builtin" style="color: #D19A66;">true</span>

  <span class="comment" style="font-style: italic; color: #5C6370;">@</span><span class="comment" style="font-style: italic; color: #5C6370;">doc</span> <span class="comment" style="font-style: italic; color: #5C6370;">&quot;&quot;&quot;
  Returns a list with `value` inserted at the specified `index`.

  Note that `index` is capped at the list length. Negative indices
  indicate an offset from the end of the `list`.

  ## Examples

      iex&gt; List.insert_at([1, 2, 3, 4], 2, 0)
      [1, 2, 0, 3, 4]

      iex&gt; List.insert_at([1, 2, 3], 10, 0)
      [1, 2, 3, 0]

      iex&gt; List.insert_at([1, 2, 3], -1, 0)
      [1, 2, 3, 0]

      iex&gt; List.insert_at([1, 2, 3], -10, 0)
      [0, 1, 2, 3]

  &quot;&quot;&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">insert_at</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">integer</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">any</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="" style="color: #ABB2BF;">list</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">insert_at</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">index</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">value</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="function" style="color: #61AFEF;">is_list</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">and</span> <span class="function" style="color: #61AFEF;">is_integer</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">index</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="keyword" style="color: #E06C75;">case</span> <span class="" style="color: #ABB2BF;">index</span> <span class="keyword" style="color: #E06C75;">do</span>
      <span class="operator" style="color: #C678DD;">-</span><span class="constant numeric" style="color: #D19A66;">1</span> <span class="operator" style="color: #C678DD;">-&gt;</span>
        <span class="" style="color: #ABB2BF;">list</span> <span class="operator" style="color: #C678DD;">++</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">value</span><span class="" style="color: #ABB2BF;">]</span>

      <span class="comment" style="font-style: italic; color: #5C6370;">_</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="" style="color: #ABB2BF;">index</span> <span class="operator" style="color: #C678DD;">&lt;</span> <span class="constant numeric" style="color: #D19A66;">0</span> <span class="operator" style="color: #C678DD;">-&gt;</span>
        <span class="keyword" style="color: #E06C75;">case</span> <span class="function" style="color: #61AFEF;">length</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">+</span> <span class="" style="color: #ABB2BF;">index</span> <span class="operator" style="color: #C678DD;">+</span> <span class="constant numeric" style="color: #D19A66;">1</span> <span class="keyword" style="color: #E06C75;">do</span>
          <span class="" style="color: #ABB2BF;">index</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="" style="color: #ABB2BF;">index</span> <span class="operator" style="color: #C678DD;">&lt;</span> <span class="constant numeric" style="color: #D19A66;">0</span> <span class="operator" style="color: #C678DD;">-&gt;</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">value</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">]</span>
          <span class="" style="color: #ABB2BF;">index</span> <span class="operator" style="color: #C678DD;">-&gt;</span> <span class="function" style="color: #61AFEF;">do_insert_at</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">index</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">value</span><span class="" style="color: #ABB2BF;">)</span>
        <span class="keyword" style="color: #E06C75;">end</span>

      <span class="comment" style="font-style: italic; color: #5C6370;">_</span> <span class="operator" style="color: #C678DD;">-&gt;</span>
        <span class="function" style="color: #61AFEF;">do_insert_at</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">index</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">value</span><span class="" style="color: #ABB2BF;">)</span>
    <span class="keyword" style="color: #E06C75;">end</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370;">@</span><span class="comment" style="font-style: italic; color: #5C6370;">doc</span> <span class="comment" style="font-style: italic; color: #5C6370;">&quot;&quot;&quot;
  Returns a list with a replaced value at the specified `index`.

  Negative indices indicate an offset from the end of the `list`.
  If `index` is out of bounds, the original `list` is returned.

  ## Examples

      iex&gt; List.replace_at([1, 2, 3], 0, 0)
      [0, 2, 3]

      iex&gt; List.replace_at([1, 2, 3], 10, 0)
      [1, 2, 3]

      iex&gt; List.replace_at([1, 2, 3], -1, 0)
      [1, 2, 0]

      iex&gt; List.replace_at([1, 2, 3], -10, 0)
      [1, 2, 3]

  &quot;&quot;&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">replace_at</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">integer</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">any</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="" style="color: #ABB2BF;">list</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">replace_at</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">index</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">value</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="function" style="color: #61AFEF;">is_list</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">and</span> <span class="function" style="color: #61AFEF;">is_integer</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">index</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="keyword" style="color: #E06C75;">if</span> <span class="" style="color: #ABB2BF;">index</span> <span class="operator" style="color: #C678DD;">&lt;</span> <span class="constant numeric" style="color: #D19A66;">0</span> <span class="keyword" style="color: #E06C75;">do</span>
      <span class="keyword" style="color: #E06C75;">case</span> <span class="function" style="color: #61AFEF;">length</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">+</span> <span class="" style="color: #ABB2BF;">index</span> <span class="keyword" style="color: #E06C75;">do</span>
        <span class="" style="color: #ABB2BF;">index</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="" style="color: #ABB2BF;">index</span> <span class="operator" style="color: #C678DD;">&lt;</span> <span class="constant numeric" style="color: #D19A66;">0</span> <span class="operator" style="color: #C678DD;">-&gt;</span> <span class="" style="color: #ABB2BF;">list</span>
        <span class="" style="color: #ABB2BF;">index</span> <span class="operator" style="color: #C678DD;">-&gt;</span> <span class="function" style="color: #61AFEF;">do_replace_at</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">index</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">value</span><span class="" style="color: #ABB2BF;">)</span>
      <span class="keyword" style="color: #E06C75;">end</span>
    <span class="keyword" style="color: #E06C75;">else</span>
      <span class="function" style="color: #61AFEF;">do_replace_at</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">index</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">value</span><span class="" style="color: #ABB2BF;">)</span>
    <span class="keyword" style="color: #E06C75;">end</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370;">@</span><span class="comment" style="font-style: italic; color: #5C6370;">doc</span> <span class="comment" style="font-style: italic; color: #5C6370;">&quot;&quot;&quot;
  Returns a list with an updated value at the specified `index`.

  Negative indices indicate an offset from the end of the `list`.
  If `index` is out of bounds, the original `list` is returned.

  ## Examples

      iex&gt; List.update_at([1, 2, 3], 0, &amp;(&amp;1 + 10))
      [11, 2, 3]

      iex&gt; List.update_at([1, 2, 3], 10, &amp;(&amp;1 + 10))
      [1, 2, 3]

      iex&gt; List.update_at([1, 2, 3], -1, &amp;(&amp;1 + 10))
      [1, 2, 13]

      iex&gt; List.update_at([1, 2, 3], -10, &amp;(&amp;1 + 10))
      [1, 2, 3]

  &quot;&quot;&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">update_at</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">elem</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">integer</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">elem</span> <span class="operator" style="color: #C678DD;">-&gt;</span> <span class="" style="color: #ABB2BF;">any</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="" style="color: #ABB2BF;">list</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="string" style="color: #98C379;">elem: </span><span class="" style="color: #ABB2BF;">var</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">update_at</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">index</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">fun</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="function" style="color: #61AFEF;">is_list</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">and</span> <span class="function" style="color: #61AFEF;">is_function</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">fun</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">and</span> <span class="function" style="color: #61AFEF;">is_integer</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">index</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="keyword" style="color: #E06C75;">if</span> <span class="" style="color: #ABB2BF;">index</span> <span class="operator" style="color: #C678DD;">&lt;</span> <span class="constant numeric" style="color: #D19A66;">0</span> <span class="keyword" style="color: #E06C75;">do</span>
      <span class="keyword" style="color: #E06C75;">case</span> <span class="function" style="color: #61AFEF;">length</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">+</span> <span class="" style="color: #ABB2BF;">index</span> <span class="keyword" style="color: #E06C75;">do</span>
        <span class="" style="color: #ABB2BF;">index</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="" style="color: #ABB2BF;">index</span> <span class="operator" style="color: #C678DD;">&lt;</span> <span class="constant numeric" style="color: #D19A66;">0</span> <span class="operator" style="color: #C678DD;">-&gt;</span> <span class="" style="color: #ABB2BF;">list</span>
        <span class="" style="color: #ABB2BF;">index</span> <span class="operator" style="color: #C678DD;">-&gt;</span> <span class="function" style="color: #61AFEF;">do_update_at</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">index</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">fun</span><span class="" style="color: #ABB2BF;">)</span>
      <span class="keyword" style="color: #E06C75;">end</span>
    <span class="keyword" style="color: #E06C75;">else</span>
      <span class="function" style="color: #61AFEF;">do_update_at</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">index</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">fun</span><span class="" style="color: #ABB2BF;">)</span>
    <span class="keyword" style="color: #E06C75;">end</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370;">@</span><span class="comment" style="font-style: italic; color: #5C6370;">doc</span> <span class="comment" style="font-style: italic; color: #5C6370;">&quot;&quot;&quot;
  Produces a new list by removing the value at the specified `index`.

  Negative indices indicate an offset from the end of the `list`.
  If `index` is out of bounds, the original `list` is returned.

  ## Examples

      iex&gt; List.delete_at([1, 2, 3], 0)
      [2, 3]

      iex&gt; List.delete_at([1, 2, 3], 10)
      [1, 2, 3]

      iex&gt; List.delete_at([1, 2, 3], -1)
      [1, 2]

  &quot;&quot;&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">delete_at</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">integer</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="" style="color: #ABB2BF;">list</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">delete_at</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">index</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="function" style="color: #61AFEF;">is_integer</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">index</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="function" style="color: #61AFEF;">elem</span><span class="" style="color: #ABB2BF;">(</span><span class="function" style="color: #61AFEF;">pop_at</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">index</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">,</span> <span class="constant numeric" style="color: #D19A66;">1</span><span class="" style="color: #ABB2BF;">)</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370;">@</span><span class="comment" style="font-style: italic; color: #5C6370;">doc</span> <span class="comment" style="font-style: italic; color: #5C6370;">&quot;&quot;&quot;
  Returns and removes the value at the specified `index` in the `list`.

  Negative indices indicate an offset from the end of the `list`.
  If `index` is out of bounds, the original `list` is returned.

  ## Examples

      iex&gt; List.pop_at([1, 2, 3], 0)
      {1, [2, 3]}
      iex&gt; List.pop_at([1, 2, 3], 5)
      {nil, [1, 2, 3]}
      iex&gt; List.pop_at([1, 2, 3], 5, 10)
      {10, [1, 2, 3]}
      iex&gt; List.pop_at([1, 2, 3], -1)
      {3, [1, 2]}

  &quot;&quot;&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">doc</span> <span class="string" style="color: #98C379;">since: </span><span class="string" style="color: #98C379;">&quot;1.4.0&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">pop_at</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">integer</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">any</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="" style="color: #ABB2BF;">{</span><span class="" style="color: #ABB2BF;">any</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">}</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">pop_at</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">index</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">default</span> <span class="operator" style="color: #C678DD;">\\</span> <span class="constant builtin" style="color: #D19A66;">nil</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="function" style="color: #61AFEF;">is_integer</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">index</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="keyword" style="color: #E06C75;">if</span> <span class="" style="color: #ABB2BF;">index</span> <span class="operator" style="color: #C678DD;">&lt;</span> <span class="constant numeric" style="color: #D19A66;">0</span> <span class="keyword" style="color: #E06C75;">do</span>
      <span class="function" style="color: #61AFEF;">do_pop_at</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="function" style="color: #61AFEF;">length</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">+</span> <span class="" style="color: #ABB2BF;">index</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">default</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">)</span>
    <span class="keyword" style="color: #E06C75;">else</span>
      <span class="function" style="color: #61AFEF;">do_pop_at</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">index</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">default</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">)</span>
    <span class="keyword" style="color: #E06C75;">end</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370;">@</span><span class="comment" style="font-style: italic; color: #5C6370;">doc</span> <span class="comment" style="font-style: italic; color: #5C6370;">&quot;&quot;&quot;
  Returns `true` if `list` starts with the given `prefix` list; otherwise returns `false`.

  If `prefix` is an empty list, it returns `true`.

  ### Examples

      iex&gt; List.starts_with?([1, 2, 3], [1, 2])
      true

      iex&gt; List.starts_with?([1, 2], [1, 2, 3])
      false

      iex&gt; List.starts_with?([:alpha], [])
      true

      iex&gt; List.starts_with?([], [:alpha])
      false

  &quot;&quot;&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">doc</span> <span class="string" style="color: #98C379;">since: </span><span class="string" style="color: #98C379;">&quot;1.5.0&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">starts_with?</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">nonempty_list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">nonempty_list</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="" style="color: #ABB2BF;">boolean</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">starts_with?</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="constant builtin" style="color: #D19A66;">true</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">starts_with?</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">nonempty_list</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="constant builtin" style="color: #D19A66;">false</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">starts_with?</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">prefix</span><span class="" style="color: #ABB2BF;">)</span>

  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">starts_with?</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">head</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">tail</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">head</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">prefix_tail</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">,</span> <span class="string" style="color: #98C379;">do: </span><span class="function" style="color: #61AFEF;">starts_with?</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">tail</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">prefix_tail</span><span class="" style="color: #ABB2BF;">)</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">starts_with?</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="function" style="color: #61AFEF;">is_list</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">,</span> <span class="string" style="color: #98C379;">do: </span><span class="constant builtin" style="color: #D19A66;">true</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">starts_with?</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="comment" style="font-style: italic; color: #5C6370;">_</span> <span class="operator" style="color: #C678DD;">|</span> <span class="comment" style="font-style: italic; color: #5C6370;">_</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="function" style="color: #61AFEF;">is_list</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">,</span> <span class="string" style="color: #98C379;">do: </span><span class="constant builtin" style="color: #D19A66;">false</span>

  <span class="comment" style="font-style: italic; color: #5C6370;">@</span><span class="comment" style="font-style: italic; color: #5C6370;">doc</span> <span class="comment" style="font-style: italic; color: #5C6370;">&quot;&quot;&quot;
  Converts a charlist to an atom.

  Elixir supports conversions from charlists which contain any Unicode
  code point.

  Inlined by the compiler.

  ## Examples

      iex&gt; List.to_atom(~c&quot;Elixir&quot;)
      :Elixir

      iex&gt; List.to_atom(~c&quot;ð¢ Elixir&quot;)
      :&quot;ð¢ Elixir&quot;

  &quot;&quot;&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">to_atom</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">charlist</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="" style="color: #ABB2BF;">atom</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">to_atom</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">charlist</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="namespace" style="color: #61AFEF;">:erlang</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">list_to_atom</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">charlist</span><span class="" style="color: #ABB2BF;">)</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370;">@</span><span class="comment" style="font-style: italic; color: #5C6370;">doc</span> <span class="comment" style="font-style: italic; color: #5C6370;">&quot;&quot;&quot;
  Converts a charlist to an existing atom.

  Elixir supports conversions from charlists which contain any Unicode
  code point. Raises an `ArgumentError` if the atom does not exist.

  Inlined by the compiler.

  &gt; #### Atoms and modules {: .info}
  &gt;
  &gt; Since Elixir is a compiled language, the atoms defined in a module
  &gt; will only exist after said module is loaded, which typically happens
  &gt; whenever a function in the module is executed. Therefore, it is
  &gt; generally recommended to call `List.to_existing_atom&#x2f;1` only to
  &gt; convert atoms defined within the module making the function call
  &gt; to `to_existing_atom&#x2f;1`.

  ## Examples

      iex&gt; _ = :my_atom
      iex&gt; List.to_existing_atom(~c&quot;my_atom&quot;)
      :my_atom

      iex&gt; _ = :&quot;ð¢ Elixir&quot;
      iex&gt; List.to_existing_atom(~c&quot;ð¢ Elixir&quot;)
      :&quot;ð¢ Elixir&quot;

  &quot;&quot;&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">to_existing_atom</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">charlist</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="" style="color: #ABB2BF;">atom</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">to_existing_atom</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">charlist</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="namespace" style="color: #61AFEF;">:erlang</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">list_to_existing_atom</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">charlist</span><span class="" style="color: #ABB2BF;">)</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370;">@</span><span class="comment" style="font-style: italic; color: #5C6370;">doc</span> <span class="comment" style="font-style: italic; color: #5C6370;">&quot;&quot;&quot;
  Returns the float whose text representation is `charlist`.

  Inlined by the compiler.

  ## Examples

      iex&gt; List.to_float(~c&quot;2.2017764e+0&quot;)
      2.2017764

  &quot;&quot;&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">to_float</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">charlist</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="" style="color: #ABB2BF;">float</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">to_float</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">charlist</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="namespace" style="color: #61AFEF;">:erlang</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">list_to_float</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">charlist</span><span class="" style="color: #ABB2BF;">)</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370;">@</span><span class="comment" style="font-style: italic; color: #5C6370;">doc</span> <span class="comment" style="font-style: italic; color: #5C6370;">&quot;&quot;&quot;
  Returns an integer whose text representation is `charlist`.

  Inlined by the compiler.

  ## Examples

      iex&gt; List.to_integer(~c&quot;123&quot;)
      123

  &quot;&quot;&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">to_integer</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">charlist</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="" style="color: #ABB2BF;">integer</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">to_integer</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">charlist</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="namespace" style="color: #61AFEF;">:erlang</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">list_to_integer</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">charlist</span><span class="" style="color: #ABB2BF;">)</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370;">@</span><span class="comment" style="font-style: italic; color: #5C6370;">doc</span> <span class="comment" style="font-style: italic; color: #5C6370;">&quot;&quot;&quot;
  Returns an integer whose text representation is `charlist` in base `base`.

  Inlined by the compiler.

  The base needs to be between `2` and `36`.

  ## Examples

      iex&gt; List.to_integer(~c&quot;3FF&quot;, 16)
      1023

  &quot;&quot;&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">to_integer</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">charlist</span><span class="" style="color: #ABB2BF;">,</span> <span class="constant numeric" style="color: #D19A66;">2</span><span class="operator" style="color: #C678DD;">..</span><span class="constant numeric" style="color: #D19A66;">36</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="" style="color: #ABB2BF;">integer</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">to_integer</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">charlist</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">base</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="namespace" style="color: #61AFEF;">:erlang</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">list_to_integer</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">charlist</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">base</span><span class="" style="color: #ABB2BF;">)</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370;">@</span><span class="comment" style="font-style: italic; color: #5C6370;">doc</span> <span class="comment" style="font-style: italic; color: #5C6370;">&quot;&quot;&quot;
  Converts a list to a tuple.

  Inlined by the compiler.

  ## Examples

      iex&gt; List.to_tuple([:share, [:elixir, 163]])
      {:share, [:elixir, 163]}

  &quot;&quot;&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">to_tuple</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="" style="color: #ABB2BF;">tuple</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">to_tuple</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="namespace" style="color: #61AFEF;">:erlang</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">list_to_tuple</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370;">@</span><span class="comment" style="font-style: italic; color: #5C6370;">doc</span> <span class="comment" style="font-style: italic; color: #5C6370;">&quot;&quot;&quot;
  Converts a list of integers representing code points, lists or
  strings into a string.

  To be converted to a string, a list must either be empty or only
  contain the following elements:

    * strings
    * integers representing Unicode code points
    * a list containing one of these three elements

  Note that this function expects a list of integers representing
  Unicode code points. If you have a list of bytes, you must instead use
  the [`:binary` module](`:binary`).

  ## Examples

      iex&gt; List.to_string([0x00E6, 0x00DF])
      &quot;Ã¦Ã&quot;

      iex&gt; List.to_string([0x0061, &quot;bc&quot;])
      &quot;abc&quot;

      iex&gt; List.to_string([0x0064, &quot;ee&quot;, [~c&quot;p&quot;]])
      &quot;deep&quot;

      iex&gt; List.to_string([])
      &quot;&quot;

  &quot;&quot;&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">to_string</span><span class="" style="color: #ABB2BF;">(</span><span class="namespace" style="color: #61AFEF;">:unicode</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">charlist</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="namespace" style="color: #61AFEF;">String</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">t</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">)</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">to_string</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="function" style="color: #61AFEF;">is_list</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="keyword" style="color: #E06C75;">try</span> <span class="keyword" style="color: #E06C75;">do</span>
      <span class="namespace" style="color: #61AFEF;">:unicode</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">characters_to_binary</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span>
    <span class="keyword" style="color: #E06C75;">rescue</span>
      <span class="namespace" style="color: #61AFEF;">ArgumentError</span> <span class="operator" style="color: #C678DD;">-&gt;</span>
        <span class="keyword" style="color: #E06C75;">raise</span> <span class="namespace" style="color: #61AFEF;">ArgumentError</span><span class="" style="color: #ABB2BF;">,</span> <span class="string" style="color: #98C379;">&quot;&quot;&quot;
        cannot convert the given list to a string.

        To be converted to a string, a list must either be empty or only
        contain the following elements:

          * strings
          * integers representing Unicode code points
          * a list containing one of these three elements

        Please check the given list or call inspect&#x2f;1 to get the list representation, got:

        <span class="" style="color: #ABB2BF;">#{</span><span class="function" style="color: #61AFEF;">inspect</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">}</span>
        &quot;&quot;&quot;</span>
    <span class="keyword" style="color: #E06C75;">else</span>
      <span class="" style="color: #ABB2BF;">result</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="function" style="color: #61AFEF;">is_binary</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">result</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">-&gt;</span>
        <span class="" style="color: #ABB2BF;">result</span>

      <span class="" style="color: #ABB2BF;">{</span><span class="string" style="color: #98C379;">:error</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">encoded</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">rest</span><span class="" style="color: #ABB2BF;">}</span> <span class="operator" style="color: #C678DD;">-&gt;</span>
        <span class="keyword" style="color: #E06C75;">raise</span> <span class="namespace" style="color: #61AFEF;">UnicodeConversionError</span><span class="" style="color: #ABB2BF;">,</span> <span class="string" style="color: #98C379;">encoded: </span><span class="" style="color: #ABB2BF;">encoded</span><span class="" style="color: #ABB2BF;">,</span> <span class="string" style="color: #98C379;">rest: </span><span class="" style="color: #ABB2BF;">rest</span><span class="" style="color: #ABB2BF;">,</span> <span class="string" style="color: #98C379;">kind: </span><span class="string" style="color: #98C379;">:invalid</span>

      <span class="" style="color: #ABB2BF;">{</span><span class="string" style="color: #98C379;">:incomplete</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">encoded</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">rest</span><span class="" style="color: #ABB2BF;">}</span> <span class="operator" style="color: #C678DD;">-&gt;</span>
        <span class="keyword" style="color: #E06C75;">raise</span> <span class="namespace" style="color: #61AFEF;">UnicodeConversionError</span><span class="" style="color: #ABB2BF;">,</span> <span class="string" style="color: #98C379;">encoded: </span><span class="" style="color: #ABB2BF;">encoded</span><span class="" style="color: #ABB2BF;">,</span> <span class="string" style="color: #98C379;">rest: </span><span class="" style="color: #ABB2BF;">rest</span><span class="" style="color: #ABB2BF;">,</span> <span class="string" style="color: #98C379;">kind: </span><span class="string" style="color: #98C379;">:incomplete</span>
    <span class="keyword" style="color: #E06C75;">end</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370;">@</span><span class="comment" style="font-style: italic; color: #5C6370;">doc</span> <span class="comment" style="font-style: italic; color: #5C6370;">&quot;&quot;&quot;
  Converts a list of integers representing Unicode code points, lists or
  strings into a charlist.

  Note that this function expects a list of integers representing
  Unicode code points. If you have a list of bytes, you must instead use
  the [`:binary` module](`:binary`).

  ## Examples

      iex&gt; ~c&quot;Ã¦Ã&quot; = List.to_charlist([0x00E6, 0x00DF])
      [230, 223]

      iex&gt; List.to_charlist([0x0061, &quot;bc&quot;])
      ~c&quot;abc&quot;

      iex&gt; List.to_charlist([0x0064, &quot;ee&quot;, [~c&quot;p&quot;]])
      ~c&quot;deep&quot;

  &quot;&quot;&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">doc</span> <span class="string" style="color: #98C379;">since: </span><span class="string" style="color: #98C379;">&quot;1.8.0&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">to_charlist</span><span class="" style="color: #ABB2BF;">(</span><span class="namespace" style="color: #61AFEF;">:unicode</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">charlist</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="function" style="color: #61AFEF;">charlist</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">)</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">to_charlist</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="function" style="color: #61AFEF;">is_list</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="keyword" style="color: #E06C75;">try</span> <span class="keyword" style="color: #E06C75;">do</span>
      <span class="namespace" style="color: #61AFEF;">:unicode</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">characters_to_list</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span>
    <span class="keyword" style="color: #E06C75;">rescue</span>
      <span class="namespace" style="color: #61AFEF;">ArgumentError</span> <span class="operator" style="color: #C678DD;">-&gt;</span>
        <span class="keyword" style="color: #E06C75;">raise</span> <span class="namespace" style="color: #61AFEF;">ArgumentError</span><span class="" style="color: #ABB2BF;">,</span> <span class="string" style="color: #98C379;">&quot;&quot;&quot;
        cannot convert the given list to a charlist.

        To be converted to a charlist, a list must contain only:

          * strings
          * integers representing Unicode code points
          * or a list containing one of these three elements

        Please check the given list or call inspect&#x2f;1 to get the list representation, got:

        <span class="" style="color: #ABB2BF;">#{</span><span class="function" style="color: #61AFEF;">inspect</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">}</span>
        &quot;&quot;&quot;</span>
    <span class="keyword" style="color: #E06C75;">else</span>
      <span class="" style="color: #ABB2BF;">result</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="function" style="color: #61AFEF;">is_list</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">result</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">-&gt;</span>
        <span class="" style="color: #ABB2BF;">result</span>

      <span class="" style="color: #ABB2BF;">{</span><span class="string" style="color: #98C379;">:error</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">encoded</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">rest</span><span class="" style="color: #ABB2BF;">}</span> <span class="operator" style="color: #C678DD;">-&gt;</span>
        <span class="keyword" style="color: #E06C75;">raise</span> <span class="namespace" style="color: #61AFEF;">UnicodeConversionError</span><span class="" style="color: #ABB2BF;">,</span> <span class="string" style="color: #98C379;">encoded: </span><span class="" style="color: #ABB2BF;">encoded</span><span class="" style="color: #ABB2BF;">,</span> <span class="string" style="color: #98C379;">rest: </span><span class="" style="color: #ABB2BF;">rest</span><span class="" style="color: #ABB2BF;">,</span> <span class="string" style="color: #98C379;">kind: </span><span class="string" style="color: #98C379;">:invalid</span>

      <span class="" style="color: #ABB2BF;">{</span><span class="string" style="color: #98C379;">:incomplete</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">encoded</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">rest</span><span class="" style="color: #ABB2BF;">}</span> <span class="operator" style="color: #C678DD;">-&gt;</span>
        <span class="keyword" style="color: #E06C75;">raise</span> <span class="namespace" style="color: #61AFEF;">UnicodeConversionError</span><span class="" style="color: #ABB2BF;">,</span> <span class="string" style="color: #98C379;">encoded: </span><span class="" style="color: #ABB2BF;">encoded</span><span class="" style="color: #ABB2BF;">,</span> <span class="string" style="color: #98C379;">rest: </span><span class="" style="color: #ABB2BF;">rest</span><span class="" style="color: #ABB2BF;">,</span> <span class="string" style="color: #98C379;">kind: </span><span class="string" style="color: #98C379;">:incomplete</span>
    <span class="keyword" style="color: #E06C75;">end</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370;">@</span><span class="comment" style="font-style: italic; color: #5C6370;">doc</span> <span class="comment" style="font-style: italic; color: #5C6370;">&quot;&quot;&quot;
  Returns a keyword list that represents an *edit script*.

  The algorithm is outlined in the
  &quot;An O(ND) Difference Algorithm and Its Variations&quot; paper by E. Myers.

  An *edit script* is a keyword list. Each key describes the &quot;editing action&quot; to
  take in order to bring `list1` closer to being equal to `list2`; a key can be
  `:eq`, `:ins`, or `:del`. Each value is a sublist of either `list1` or `list2`
  that should be inserted (if the corresponding key is `:ins`), deleted (if the
  corresponding key is `:del`), or left alone (if the corresponding key is
  `:eq`) in `list1` in order to be closer to `list2`.

  See `myers_difference&#x2f;3` if you want to handle nesting in the diff scripts.

  ## Examples

      iex&gt; List.myers_difference([1, 4, 2, 3], [1, 2, 3, 4])
      [eq: [1], del: [4], eq: [2, 3], ins: [4]]

  &quot;&quot;&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">doc</span> <span class="string" style="color: #98C379;">since: </span><span class="string" style="color: #98C379;">&quot;1.4.0&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">myers_difference</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">{</span><span class="string" style="color: #98C379;">:eq</span> <span class="operator" style="color: #C678DD;">|</span> <span class="string" style="color: #98C379;">:ins</span> <span class="operator" style="color: #C678DD;">|</span> <span class="string" style="color: #98C379;">:del</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">}</span><span class="" style="color: #ABB2BF;">]</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">myers_difference</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list1</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">list2</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="function" style="color: #61AFEF;">is_list</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list1</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">and</span> <span class="function" style="color: #61AFEF;">is_list</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list2</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="function" style="color: #61AFEF;">myers_difference_with_diff_script</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list1</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">list2</span><span class="" style="color: #ABB2BF;">,</span> <span class="constant builtin" style="color: #D19A66;">nil</span><span class="" style="color: #ABB2BF;">)</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370;">@</span><span class="comment" style="font-style: italic; color: #5C6370;">doc</span> <span class="comment" style="font-style: italic; color: #5C6370;">&quot;&quot;&quot;
  Returns a keyword list that represents an *edit script* with nested diffs.

  This is an extension of `myers_difference&#x2f;2` where a `diff_script` function
  can be given in case it is desired to compute nested differences. The function
  may return a list with the inner edit script or `nil` in case there is no
  such script. The returned inner edit script will be under the `:diff` key.

  ## Examples

      iex&gt; List.myers_difference([&quot;a&quot;, &quot;db&quot;, &quot;c&quot;], [&quot;a&quot;, &quot;bc&quot;], &amp;String.myers_difference&#x2f;2)
      [eq: [&quot;a&quot;], diff: [del: &quot;d&quot;, eq: &quot;b&quot;, ins: &quot;c&quot;], del: [&quot;c&quot;]]

  &quot;&quot;&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">doc</span> <span class="string" style="color: #98C379;">since: </span><span class="string" style="color: #98C379;">&quot;1.8.0&quot;</span>
  <span class="variable other member" style="color: #E06C75;">@</span><span class="variable other member" style="color: #E06C75;">spec</span> <span class="function" style="color: #61AFEF;">myers_difference</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">term</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">term</span> <span class="operator" style="color: #C678DD;">-&gt;</span> <span class="" style="color: #ABB2BF;">script</span> <span class="operator" style="color: #C678DD;">|</span> <span class="constant builtin" style="color: #D19A66;">nil</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">::</span> <span class="" style="color: #ABB2BF;">script</span>
        <span class="keyword" style="color: #E06C75;">when</span> <span class="string" style="color: #98C379;">script: </span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">{</span><span class="string" style="color: #98C379;">:eq</span> <span class="operator" style="color: #C678DD;">|</span> <span class="string" style="color: #98C379;">:ins</span> <span class="operator" style="color: #C678DD;">|</span> <span class="string" style="color: #98C379;">:del</span> <span class="operator" style="color: #C678DD;">|</span> <span class="string" style="color: #98C379;">:diff</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">}</span><span class="" style="color: #ABB2BF;">]</span>
  <span class="keyword" style="color: #E06C75;">def</span> <span class="function" style="color: #61AFEF;">myers_difference</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list1</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">list2</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">diff_script</span><span class="" style="color: #ABB2BF;">)</span>
      <span class="keyword" style="color: #E06C75;">when</span> <span class="function" style="color: #61AFEF;">is_list</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list1</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">and</span> <span class="function" style="color: #61AFEF;">is_list</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list2</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">and</span> <span class="function" style="color: #61AFEF;">is_function</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">diff_script</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="function" style="color: #61AFEF;">myers_difference_with_diff_script</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list1</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">list2</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">diff_script</span><span class="" style="color: #ABB2BF;">)</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">myers_difference_with_diff_script</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list1</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">list2</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">diff_script</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="" style="color: #ABB2BF;">path</span> <span class="operator" style="color: #C678DD;">=</span> <span class="" style="color: #ABB2BF;">{</span><span class="constant numeric" style="color: #D19A66;">0</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">list1</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">list2</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">}</span>
    <span class="function" style="color: #61AFEF;">find_script</span><span class="" style="color: #ABB2BF;">(</span><span class="constant numeric" style="color: #D19A66;">0</span><span class="" style="color: #ABB2BF;">,</span> <span class="function" style="color: #61AFEF;">length</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list1</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">+</span> <span class="function" style="color: #61AFEF;">length</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list2</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">path</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">diff_script</span><span class="" style="color: #ABB2BF;">)</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">find_script</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">envelope</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">max</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">paths</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">diff_script</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="keyword" style="color: #E06C75;">case</span> <span class="function" style="color: #61AFEF;">each_diagonal</span><span class="" style="color: #ABB2BF;">(</span><span class="operator" style="color: #C678DD;">-</span><span class="" style="color: #ABB2BF;">envelope</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">envelope</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">paths</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">diff_script</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
      <span class="" style="color: #ABB2BF;">{</span><span class="string" style="color: #98C379;">:done</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">edits</span><span class="" style="color: #ABB2BF;">}</span> <span class="operator" style="color: #C678DD;">-&gt;</span> <span class="function" style="color: #61AFEF;">compact_reverse</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">edits</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">)</span>
      <span class="" style="color: #ABB2BF;">{</span><span class="string" style="color: #98C379;">:next</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">paths</span><span class="" style="color: #ABB2BF;">}</span> <span class="operator" style="color: #C678DD;">-&gt;</span> <span class="function" style="color: #61AFEF;">find_script</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">envelope</span> <span class="operator" style="color: #C678DD;">+</span> <span class="constant numeric" style="color: #D19A66;">1</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">max</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">paths</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">diff_script</span><span class="" style="color: #ABB2BF;">)</span>
    <span class="keyword" style="color: #E06C75;">end</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">compact_reverse</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">acc</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">,</span> <span class="string" style="color: #98C379;">do: </span><span class="" style="color: #ABB2BF;">acc</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">compact_reverse</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">{</span><span class="string" style="color: #98C379;">:diff</span><span class="" style="color: #ABB2BF;">,</span> <span class="comment" style="font-style: italic; color: #5C6370;">_</span><span class="" style="color: #ABB2BF;">}</span> <span class="operator" style="color: #C678DD;">=</span> <span class="" style="color: #ABB2BF;">fragment</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">rest</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">acc</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="function" style="color: #61AFEF;">compact_reverse</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">rest</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">fragment</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">acc</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">)</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">compact_reverse</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">{</span><span class="" style="color: #ABB2BF;">kind</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">elem</span><span class="" style="color: #ABB2BF;">}</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">rest</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">{</span><span class="" style="color: #ABB2BF;">kind</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">result</span><span class="" style="color: #ABB2BF;">}</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">acc</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="function" style="color: #61AFEF;">compact_reverse</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">rest</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">{</span><span class="" style="color: #ABB2BF;">kind</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">elem</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">result</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">}</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">acc</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">)</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">compact_reverse</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">rest</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">{</span><span class="string" style="color: #98C379;">:eq</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">elem</span><span class="" style="color: #ABB2BF;">}</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">{</span><span class="string" style="color: #98C379;">:ins</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">elem</span><span class="" style="color: #ABB2BF;">}</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">{</span><span class="string" style="color: #98C379;">:eq</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">other</span><span class="" style="color: #ABB2BF;">}</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">acc</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="function" style="color: #61AFEF;">compact_reverse</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">rest</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">{</span><span class="string" style="color: #98C379;">:ins</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">elem</span><span class="" style="color: #ABB2BF;">}</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">{</span><span class="string" style="color: #98C379;">:eq</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">elem</span> <span class="operator" style="color: #C678DD;">++</span> <span class="" style="color: #ABB2BF;">other</span><span class="" style="color: #ABB2BF;">}</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">acc</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">)</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">compact_reverse</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">{</span><span class="" style="color: #ABB2BF;">kind</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">elem</span><span class="" style="color: #ABB2BF;">}</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">rest</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">acc</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="function" style="color: #61AFEF;">compact_reverse</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">rest</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">{</span><span class="" style="color: #ABB2BF;">kind</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">elem</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">}</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">acc</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">)</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">each_diagonal</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">diag</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">limit</span><span class="" style="color: #ABB2BF;">,</span> <span class="comment" style="font-style: italic; color: #5C6370;">_paths</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">next_paths</span><span class="" style="color: #ABB2BF;">,</span> <span class="comment" style="font-style: italic; color: #5C6370;">_diff_script</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="" style="color: #ABB2BF;">diag</span> <span class="operator" style="color: #C678DD;">&gt;</span> <span class="" style="color: #ABB2BF;">limit</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="" style="color: #ABB2BF;">{</span><span class="string" style="color: #98C379;">:next</span><span class="" style="color: #ABB2BF;">,</span> <span class="namespace" style="color: #61AFEF;">:lists</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">reverse</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">next_paths</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">}</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">each_diagonal</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">diag</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">limit</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">paths</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">next_paths</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">diff_script</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="" style="color: #ABB2BF;">{</span><span class="" style="color: #ABB2BF;">path</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">rest</span><span class="" style="color: #ABB2BF;">}</span> <span class="operator" style="color: #C678DD;">=</span> <span class="function" style="color: #61AFEF;">proceed_path</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">diag</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">limit</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">paths</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">diff_script</span><span class="" style="color: #ABB2BF;">)</span>

    <span class="keyword" style="color: #E06C75;">case</span> <span class="function" style="color: #61AFEF;">follow_snake</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">path</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
      <span class="" style="color: #ABB2BF;">{</span><span class="string" style="color: #98C379;">:cont</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">path</span><span class="" style="color: #ABB2BF;">}</span> <span class="operator" style="color: #C678DD;">-&gt;</span> <span class="function" style="color: #61AFEF;">each_diagonal</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">diag</span> <span class="operator" style="color: #C678DD;">+</span> <span class="constant numeric" style="color: #D19A66;">2</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">limit</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">rest</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">path</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">next_paths</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">diff_script</span><span class="" style="color: #ABB2BF;">)</span>
      <span class="" style="color: #ABB2BF;">{</span><span class="string" style="color: #98C379;">:done</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">edits</span><span class="" style="color: #ABB2BF;">}</span> <span class="operator" style="color: #C678DD;">-&gt;</span> <span class="" style="color: #ABB2BF;">{</span><span class="string" style="color: #98C379;">:done</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">edits</span><span class="" style="color: #ABB2BF;">}</span>
    <span class="keyword" style="color: #E06C75;">end</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">proceed_path</span><span class="" style="color: #ABB2BF;">(</span><span class="constant numeric" style="color: #D19A66;">0</span><span class="" style="color: #ABB2BF;">,</span> <span class="constant numeric" style="color: #D19A66;">0</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">path</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="comment" style="font-style: italic; color: #5C6370;">_diff_script</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">,</span> <span class="string" style="color: #98C379;">do: </span><span class="" style="color: #ABB2BF;">{</span><span class="" style="color: #ABB2BF;">path</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">}</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">proceed_path</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">diag</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">limit</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">path</span> <span class="operator" style="color: #C678DD;">|</span> <span class="comment" style="font-style: italic; color: #5C6370;">_</span><span class="" style="color: #ABB2BF;">]</span> <span class="operator" style="color: #C678DD;">=</span> <span class="" style="color: #ABB2BF;">paths</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">diff_script</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="" style="color: #ABB2BF;">diag</span> <span class="operator" style="color: #C678DD;">==</span> <span class="operator" style="color: #C678DD;">-</span><span class="" style="color: #ABB2BF;">limit</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="" style="color: #ABB2BF;">{</span><span class="function" style="color: #61AFEF;">move_down</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">path</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">diff_script</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">paths</span><span class="" style="color: #ABB2BF;">}</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">proceed_path</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">diag</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">limit</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">path</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">diff_script</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="" style="color: #ABB2BF;">diag</span> <span class="operator" style="color: #C678DD;">==</span> <span class="" style="color: #ABB2BF;">limit</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="" style="color: #ABB2BF;">{</span><span class="function" style="color: #61AFEF;">move_right</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">path</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">diff_script</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">}</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">proceed_path</span><span class="" style="color: #ABB2BF;">(</span><span class="comment" style="font-style: italic; color: #5C6370;">_diag</span><span class="" style="color: #ABB2BF;">,</span> <span class="comment" style="font-style: italic; color: #5C6370;">_limit</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">path1</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">path2</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">rest</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">diff_script</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="keyword" style="color: #E06C75;">if</span> <span class="function" style="color: #61AFEF;">elem</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">path1</span><span class="" style="color: #ABB2BF;">,</span> <span class="constant numeric" style="color: #D19A66;">0</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">&gt;</span> <span class="function" style="color: #61AFEF;">elem</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">path2</span><span class="" style="color: #ABB2BF;">,</span> <span class="constant numeric" style="color: #D19A66;">0</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
      <span class="" style="color: #ABB2BF;">{</span><span class="function" style="color: #61AFEF;">move_right</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">path1</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">diff_script</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">path2</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">rest</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">}</span>
    <span class="keyword" style="color: #E06C75;">else</span>
      <span class="" style="color: #ABB2BF;">{</span><span class="function" style="color: #61AFEF;">move_down</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">path2</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">diff_script</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">path2</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">rest</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">}</span>
    <span class="keyword" style="color: #E06C75;">end</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">move_right</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">{</span><span class="" style="color: #ABB2BF;">y</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">elem1</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">rest1</span><span class="" style="color: #ABB2BF;">]</span> <span class="operator" style="color: #C678DD;">=</span> <span class="" style="color: #ABB2BF;">list1</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">elem2</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">rest2</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">edits</span><span class="" style="color: #ABB2BF;">}</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">diff_script</span><span class="" style="color: #ABB2BF;">)</span>
       <span class="keyword" style="color: #E06C75;">when</span> <span class="" style="color: #ABB2BF;">diff_script</span> <span class="operator" style="color: #C678DD;">!=</span> <span class="constant builtin" style="color: #D19A66;">nil</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="keyword" style="color: #E06C75;">if</span> <span class="" style="color: #ABB2BF;">diff</span> <span class="operator" style="color: #C678DD;">=</span> <span class="" style="color: #ABB2BF;">diff_script</span><span class="operator" style="color: #C678DD;">.</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">elem1</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">elem2</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
      <span class="" style="color: #ABB2BF;">{</span><span class="" style="color: #ABB2BF;">y</span> <span class="operator" style="color: #C678DD;">+</span> <span class="constant numeric" style="color: #D19A66;">1</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">rest1</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">rest2</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">{</span><span class="string" style="color: #98C379;">:diff</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">diff</span><span class="" style="color: #ABB2BF;">}</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">edits</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">}</span>
    <span class="keyword" style="color: #E06C75;">else</span>
      <span class="" style="color: #ABB2BF;">{</span><span class="" style="color: #ABB2BF;">y</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">list1</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">rest2</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">{</span><span class="string" style="color: #98C379;">:ins</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">elem2</span><span class="" style="color: #ABB2BF;">}</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">edits</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">}</span>
    <span class="keyword" style="color: #E06C75;">end</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">move_right</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">{</span><span class="" style="color: #ABB2BF;">y</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">list1</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">elem</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">rest</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">edits</span><span class="" style="color: #ABB2BF;">}</span><span class="" style="color: #ABB2BF;">,</span> <span class="comment" style="font-style: italic; color: #5C6370;">_diff_script</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="" style="color: #ABB2BF;">{</span><span class="" style="color: #ABB2BF;">y</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">list1</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">rest</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">{</span><span class="string" style="color: #98C379;">:ins</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">elem</span><span class="" style="color: #ABB2BF;">}</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">edits</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">}</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">move_right</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">{</span><span class="" style="color: #ABB2BF;">y</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">list1</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">edits</span><span class="" style="color: #ABB2BF;">}</span><span class="" style="color: #ABB2BF;">,</span> <span class="comment" style="font-style: italic; color: #5C6370;">_diff_script</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="" style="color: #ABB2BF;">{</span><span class="" style="color: #ABB2BF;">y</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">list1</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">edits</span><span class="" style="color: #ABB2BF;">}</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">move_down</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">{</span><span class="" style="color: #ABB2BF;">y</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">elem1</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">rest1</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">elem2</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">rest2</span><span class="" style="color: #ABB2BF;">]</span> <span class="operator" style="color: #C678DD;">=</span> <span class="" style="color: #ABB2BF;">list2</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">edits</span><span class="" style="color: #ABB2BF;">}</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">diff_script</span><span class="" style="color: #ABB2BF;">)</span>
       <span class="keyword" style="color: #E06C75;">when</span> <span class="" style="color: #ABB2BF;">diff_script</span> <span class="operator" style="color: #C678DD;">!=</span> <span class="constant builtin" style="color: #D19A66;">nil</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="keyword" style="color: #E06C75;">if</span> <span class="" style="color: #ABB2BF;">diff</span> <span class="operator" style="color: #C678DD;">=</span> <span class="" style="color: #ABB2BF;">diff_script</span><span class="operator" style="color: #C678DD;">.</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">elem1</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">elem2</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
      <span class="" style="color: #ABB2BF;">{</span><span class="" style="color: #ABB2BF;">y</span> <span class="operator" style="color: #C678DD;">+</span> <span class="constant numeric" style="color: #D19A66;">1</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">rest1</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">rest2</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">{</span><span class="string" style="color: #98C379;">:diff</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">diff</span><span class="" style="color: #ABB2BF;">}</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">edits</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">}</span>
    <span class="keyword" style="color: #E06C75;">else</span>
      <span class="" style="color: #ABB2BF;">{</span><span class="" style="color: #ABB2BF;">y</span> <span class="operator" style="color: #C678DD;">+</span> <span class="constant numeric" style="color: #D19A66;">1</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">rest1</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">list2</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">{</span><span class="string" style="color: #98C379;">:del</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">elem1</span><span class="" style="color: #ABB2BF;">}</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">edits</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">}</span>
    <span class="keyword" style="color: #E06C75;">end</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">move_down</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">{</span><span class="" style="color: #ABB2BF;">y</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">elem</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">rest</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">list2</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">edits</span><span class="" style="color: #ABB2BF;">}</span><span class="" style="color: #ABB2BF;">,</span> <span class="comment" style="font-style: italic; color: #5C6370;">_diff_script</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="" style="color: #ABB2BF;">{</span><span class="" style="color: #ABB2BF;">y</span> <span class="operator" style="color: #C678DD;">+</span> <span class="constant numeric" style="color: #D19A66;">1</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">rest</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">list2</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">{</span><span class="string" style="color: #98C379;">:del</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">elem</span><span class="" style="color: #ABB2BF;">}</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">edits</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">}</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">move_down</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">{</span><span class="" style="color: #ABB2BF;">y</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">list2</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">edits</span><span class="" style="color: #ABB2BF;">}</span><span class="" style="color: #ABB2BF;">,</span> <span class="comment" style="font-style: italic; color: #5C6370;">_diff_script</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="" style="color: #ABB2BF;">{</span><span class="" style="color: #ABB2BF;">y</span> <span class="operator" style="color: #C678DD;">+</span> <span class="constant numeric" style="color: #D19A66;">1</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">list2</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">edits</span><span class="" style="color: #ABB2BF;">}</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">follow_snake</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">{</span><span class="" style="color: #ABB2BF;">y</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">elem</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">rest1</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">elem</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">rest2</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">edits</span><span class="" style="color: #ABB2BF;">}</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="function" style="color: #61AFEF;">follow_snake</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">{</span><span class="" style="color: #ABB2BF;">y</span> <span class="operator" style="color: #C678DD;">+</span> <span class="constant numeric" style="color: #D19A66;">1</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">rest1</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">rest2</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">{</span><span class="string" style="color: #98C379;">:eq</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">elem</span><span class="" style="color: #ABB2BF;">}</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">edits</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">}</span><span class="" style="color: #ABB2BF;">)</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">follow_snake</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">{</span><span class="comment" style="font-style: italic; color: #5C6370;">_y</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">edits</span><span class="" style="color: #ABB2BF;">}</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="" style="color: #ABB2BF;">{</span><span class="string" style="color: #98C379;">:done</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">edits</span><span class="" style="color: #ABB2BF;">}</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">follow_snake</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">path</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="" style="color: #ABB2BF;">{</span><span class="string" style="color: #98C379;">:cont</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">path</span><span class="" style="color: #ABB2BF;">}</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370;">## Helpers</span>

  <span class="comment" style="font-style: italic; color: #5C6370;"># replace_at</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">do_replace_at</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="comment" style="font-style: italic; color: #5C6370;">_index</span><span class="" style="color: #ABB2BF;">,</span> <span class="comment" style="font-style: italic; color: #5C6370;">_value</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">]</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">do_replace_at</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="comment" style="font-style: italic; color: #5C6370;">_old</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">rest</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="constant numeric" style="color: #D19A66;">0</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">value</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">value</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">rest</span><span class="" style="color: #ABB2BF;">]</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">do_replace_at</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">head</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">tail</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">index</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">value</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">head</span> <span class="operator" style="color: #C678DD;">|</span> <span class="function" style="color: #61AFEF;">do_replace_at</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">tail</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">index</span> <span class="operator" style="color: #C678DD;">-</span> <span class="constant numeric" style="color: #D19A66;">1</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">value</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">]</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370;"># insert_at</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">do_insert_at</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="comment" style="font-style: italic; color: #5C6370;">_index</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">value</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">value</span><span class="" style="color: #ABB2BF;">]</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">do_insert_at</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="constant numeric" style="color: #D19A66;">0</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">value</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">value</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">]</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">do_insert_at</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">head</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">tail</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">index</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">value</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">head</span> <span class="operator" style="color: #C678DD;">|</span> <span class="function" style="color: #61AFEF;">do_insert_at</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">tail</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">index</span> <span class="operator" style="color: #C678DD;">-</span> <span class="constant numeric" style="color: #D19A66;">1</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">value</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">]</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370;"># update_at</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">do_update_at</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">value</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="constant numeric" style="color: #D19A66;">0</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">fun</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">fun</span><span class="operator" style="color: #C678DD;">.</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">value</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">]</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">do_update_at</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">head</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">tail</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">index</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">fun</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">head</span> <span class="operator" style="color: #C678DD;">|</span> <span class="function" style="color: #61AFEF;">do_update_at</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">tail</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">index</span> <span class="operator" style="color: #C678DD;">-</span> <span class="constant numeric" style="color: #D19A66;">1</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">fun</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">]</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">do_update_at</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="comment" style="font-style: italic; color: #5C6370;">_index</span><span class="" style="color: #ABB2BF;">,</span> <span class="comment" style="font-style: italic; color: #5C6370;">_fun</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">]</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370;"># pop_at</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">do_pop_at</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="comment" style="font-style: italic; color: #5C6370;">_index</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">default</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">acc</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="" style="color: #ABB2BF;">{</span><span class="" style="color: #ABB2BF;">default</span><span class="" style="color: #ABB2BF;">,</span> <span class="namespace" style="color: #61AFEF;">:lists</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">reverse</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">acc</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">}</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">do_pop_at</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">head</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">tail</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="constant numeric" style="color: #D19A66;">0</span><span class="" style="color: #ABB2BF;">,</span> <span class="comment" style="font-style: italic; color: #5C6370;">_default</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">acc</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="" style="color: #ABB2BF;">{</span><span class="" style="color: #ABB2BF;">head</span><span class="" style="color: #ABB2BF;">,</span> <span class="namespace" style="color: #61AFEF;">:lists</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">reverse</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">acc</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">tail</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">}</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">do_pop_at</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">head</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">tail</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">index</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">default</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">acc</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="function" style="color: #61AFEF;">do_pop_at</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">tail</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">index</span> <span class="operator" style="color: #C678DD;">-</span> <span class="constant numeric" style="color: #D19A66;">1</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">default</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">head</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">acc</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">)</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370;"># zip</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">do_zip</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">acc</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="" style="color: #ABB2BF;">converter</span> <span class="operator" style="color: #C678DD;">=</span> <span class="keyword" style="color: #E06C75;">fn</span> <span class="" style="color: #ABB2BF;">x</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">acc</span> <span class="operator" style="color: #C678DD;">-&gt;</span> <span class="function" style="color: #61AFEF;">do_zip_each</span><span class="" style="color: #ABB2BF;">(</span><span class="function" style="color: #61AFEF;">to_list</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">x</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">acc</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">end</span>

    <span class="keyword" style="color: #E06C75;">case</span> <span class="namespace" style="color: #61AFEF;">:lists</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">mapfoldl</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">converter</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
      <span class="" style="color: #ABB2BF;">{</span><span class="comment" style="font-style: italic; color: #5C6370;">_</span><span class="" style="color: #ABB2BF;">,</span> <span class="constant builtin" style="color: #D19A66;">nil</span><span class="" style="color: #ABB2BF;">}</span> <span class="operator" style="color: #C678DD;">-&gt;</span>
        <span class="namespace" style="color: #61AFEF;">:lists</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">reverse</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">acc</span><span class="" style="color: #ABB2BF;">)</span>

      <span class="" style="color: #ABB2BF;">{</span><span class="" style="color: #ABB2BF;">mlist</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">heads</span><span class="" style="color: #ABB2BF;">}</span> <span class="operator" style="color: #C678DD;">-&gt;</span>
        <span class="function" style="color: #61AFEF;">do_zip</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">mlist</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="function" style="color: #61AFEF;">to_tuple</span><span class="" style="color: #ABB2BF;">(</span><span class="namespace" style="color: #61AFEF;">:lists</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">reverse</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">heads</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">)</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">acc</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">)</span>
    <span class="keyword" style="color: #E06C75;">end</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">do_zip_each</span><span class="" style="color: #ABB2BF;">(</span><span class="comment" style="font-style: italic; color: #5C6370;">_</span><span class="" style="color: #ABB2BF;">,</span> <span class="constant builtin" style="color: #D19A66;">nil</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="" style="color: #ABB2BF;">{</span><span class="constant builtin" style="color: #D19A66;">nil</span><span class="" style="color: #ABB2BF;">,</span> <span class="constant builtin" style="color: #D19A66;">nil</span><span class="" style="color: #ABB2BF;">}</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">do_zip_each</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">head</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">tail</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">acc</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="" style="color: #ABB2BF;">{</span><span class="" style="color: #ABB2BF;">tail</span><span class="" style="color: #ABB2BF;">,</span> <span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">head</span> <span class="operator" style="color: #C678DD;">|</span> <span class="" style="color: #ABB2BF;">acc</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">}</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">do_zip_each</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">[</span><span class="" style="color: #ABB2BF;">]</span><span class="" style="color: #ABB2BF;">,</span> <span class="comment" style="font-style: italic; color: #5C6370;">_</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">do</span>
    <span class="" style="color: #ABB2BF;">{</span><span class="constant builtin" style="color: #D19A66;">nil</span><span class="" style="color: #ABB2BF;">,</span> <span class="constant builtin" style="color: #D19A66;">nil</span><span class="" style="color: #ABB2BF;">}</span>
  <span class="keyword" style="color: #E06C75;">end</span>

  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">to_list</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">tuple</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="function" style="color: #61AFEF;">is_tuple</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">tuple</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">,</span> <span class="string" style="color: #98C379;">do: </span><span class="namespace" style="color: #61AFEF;">Tuple</span><span class="operator" style="color: #C678DD;">.</span><span class="function" style="color: #61AFEF;">to_list</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">tuple</span><span class="" style="color: #ABB2BF;">)</span>
  <span class="keyword" style="color: #E06C75;">defp</span> <span class="function" style="color: #61AFEF;">to_list</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span> <span class="keyword" style="color: #E06C75;">when</span> <span class="function" style="color: #61AFEF;">is_list</span><span class="" style="color: #ABB2BF;">(</span><span class="" style="color: #ABB2BF;">list</span><span class="" style="color: #ABB2BF;">)</span><span class="" style="color: #ABB2BF;">,</span> <span class="string" style="color: #98C379;">do: </span><span class="" style="color: #ABB2BF;">list</span>
<span class="keyword" style="color: #E06C75;">end</span>

</code></pre>

</body>
</html>
