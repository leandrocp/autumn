<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Autumn Sample - elixir - onedark</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap" rel="stylesheet">
  <style>
    * {
      font-family: 'JetBrains Mono', monospace;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <pre class="autumn highlight" class="background" style="background-color: #282C34; ">
<code class="language-elixir">
<span class="keyword" style="color: #E06C75; ">defmodule</span> <span class="module" style="color: #61AFEF; ">List</span> <span class="keyword" style="color: #E06C75; ">do</span>
  <span class="comment" style="font-style: italic; color: #5C6370; ">@</span><span class="comment" style="font-style: italic; color: #5C6370; ">moduledoc</span> <span class="comment" style="font-style: italic; color: #5C6370; ">&quot;&quot;&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Linked lists hold zero, one, or more elements in the chosen order.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Lists in Elixir are specified between square brackets:</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; [1, &quot;two&quot;, 3, :four]</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [1, &quot;two&quot;, 3, :four]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Two lists can be concatenated and subtracted using the</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  `++/2` and `--/2` operators:</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; [1, 2, 3] ++ [4, 5, 6]</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [1, 2, 3, 4, 5, 6]</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; [1, true, 2, false, 3, true] -- [true, false]</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [1, 2, 3, true]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  An element can be prepended to a list using `|`:</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; new = 0</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; list = [1, 2, 3]</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; [new | list]</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [0, 1, 2, 3]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Lists in Elixir are effectively linked lists, which means</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  they are internally represented in pairs containing the</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  head and the tail of a list:</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; [head | tail] = [1, 2, 3]</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; head</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      1</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; tail</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [2, 3]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Similarly, we could write the list `[1, 2, 3]` using only</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  such pairs (called cons cells):</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; [1 | [2 | [3 | []]]]</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [1, 2, 3]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Some lists, called improper lists, do not have an empty list as</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  the second element in the last cons cell:</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; [1 | [2 | [3 | 4]]]</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [1, 2, 3 | 4]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Although improper lists are generally avoided, they are used in some</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  special circumstances like iodata and chardata entities (see the `IO` module).</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Due to their cons cell based representation, prepending an element</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  to a list is always fast (constant time), while appending becomes</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  slower as the list grows in size (linear time):</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; list = [1, 2, 3]</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; [0 | list] # fast</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [0, 1, 2, 3]</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; list ++ [4] # slow</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [1, 2, 3, 4]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Most of the functions in this module work in linear time. This means that</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  the time it takes to perform an operation grows at the same rate as the</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  length of the list. For example `length/1` and `last/1` will run in linear</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  time because they need to iterate through every element of the list, but</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  `first/1` will run in constant time because it only needs the first element.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Lists also implement the `Enumerable` protocol, so many functions to work with</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  lists are found in the `Enum` module. Additionally, the following functions and</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  operators for lists are found in `Kernel`:</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">    * `++/2`</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">    * `--/2`</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">    * `hd/1`</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">    * `tl/1`</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">    * `in/2`</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">    * `length/1`</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  ## Charlists</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  If a list is made of non-negative integers, where each integer represents a</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Unicode code point, the list can also be called a charlist. These integers</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  must:</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">    * be within the range `0..0x10FFFF` (`0..1_114_111`);</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">    * and be out of the range `0xD800..0xDFFF` (`55_296..57_343`), which is</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      reserved in Unicode for UTF-16 surrogate pairs.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Elixir uses the [`~c` sigil](`sigil_c/2`) to define charlists:</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; ~c&quot;hÃ©llo&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [104, 233, 108, 108, 111]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  In particular, charlists will be printed back by default with the `~c`</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  sigil if they contain only printable ASCII characters:</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; ~c&quot;abc&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      ~c&quot;abc&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Even though the representation changed, the raw data does remain a list of</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  integers, which can be handled as such:</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; inspect(~c&quot;abc&quot;, charlists: :as_list)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      &quot;[97, 98, 99]&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; Enum.map(~c&quot;abc&quot;, fn num -&gt; 1000 + num end)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [1097, 1098, 1099]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  You can use the `IEx.Helpers.i/1` helper to get a condensed rundown on</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  charlists in IEx when you encounter them, which shows you the type, description</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  and also the raw representation in one single summary.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  The rationale behind this behaviour is to better support</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Erlang libraries which may return text as charlists</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  instead of Elixir strings. In Erlang, charlists are the default</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  way of handling strings, while in Elixir it&#39;s binaries. One</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  example of such functions is `Application.loaded_applications/0`:</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      Application.loaded_applications()</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      #=&gt;  [</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      #=&gt;    {:stdlib, ~c&quot;ERTS  CXC 138 10&quot;, ~c&quot;2.6&quot;},</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      #=&gt;    {:compiler, ~c&quot;ERTS  CXC 138 10&quot;, ~c&quot;6.0.1&quot;},</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      #=&gt;    {:elixir, ~c&quot;elixir&quot;, ~c&quot;1.0.0&quot;},</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      #=&gt;    {:kernel, ~c&quot;ERTS  CXC 138 10&quot;, ~c&quot;4.1&quot;},</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      #=&gt;    {:logger, ~c&quot;logger&quot;, ~c&quot;1.0.0&quot;}</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      #=&gt;  ]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  A list can be checked if it is made of only printable ASCII</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  characters with `ascii_printable?/2`.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Improper lists are never deemed as charlists.</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &quot;&quot;&quot;</span>

  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">compile</span> <span class="string" style="color: #98C379; ">:inline_list_funcs</span>

  <span class="comment" style="font-style: italic; color: #5C6370; ">@</span><span class="comment" style="font-style: italic; color: #5C6370; ">doc</span> <span class="comment" style="font-style: italic; color: #5C6370; ">&quot;&quot;&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Deletes the given `element` from the `list`. Returns a new list without</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  the element.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  If the `element` occurs more than once in the `list`, just</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  the first occurrence is removed.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  ## Examples</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.delete([:a, :b, :c], :a)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [:b, :c]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.delete([:a, :b, :c], :d)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [:a, :b, :c]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.delete([:a, :b, :b, :c], :b)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [:a, :b, :c]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.delete([], :b)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      []</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">delete</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">any</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">]</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">delete</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">...</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">any</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="text" style="color: #ABB2BF; ">list</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">delete</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">element</span><span class="text" style="color: #ABB2BF; ">)</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">delete</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">element</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">element</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="string" style="color: #98C379; ">do: </span><span class="text" style="color: #ABB2BF; ">list</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">delete</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">other</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">element</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="string" style="color: #98C379; ">do: </span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">other</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="function" style="color: #61AFEF; ">delete</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">element</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">]</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">delete</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="comment" style="font-style: italic; color: #5C6370; ">_element</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="string" style="color: #98C379; ">do: </span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">]</span>

  <span class="comment" style="font-style: italic; color: #5C6370; ">@</span><span class="comment" style="font-style: italic; color: #5C6370; ">doc</span> <span class="comment" style="font-style: italic; color: #5C6370; ">&quot;&quot;&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Duplicates the given element `n` times in a list.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  `n` is an integer greater than or equal to `0`.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  If `n` is `0`, an empty list is returned.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  ## Examples</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.duplicate(&quot;hello&quot;, 0)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      []</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.duplicate(&quot;hi&quot;, 1)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [&quot;hi&quot;]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.duplicate(&quot;bye&quot;, 2)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [&quot;bye&quot;, &quot;bye&quot;]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.duplicate([1, 2], 3)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [[1, 2], [1, 2], [1, 2]]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">duplicate</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">any</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">0</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">]</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">duplicate</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">elem</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">pos_integer</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">elem</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">...</span><span class="text" style="color: #ABB2BF; ">]</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="string" style="color: #98C379; ">elem: </span><span class="text" style="color: #ABB2BF; ">var</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">duplicate</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">elem</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">n</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="module" style="color: #61AFEF; ">:lists</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">duplicate</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">n</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">elem</span><span class="text" style="color: #ABB2BF; ">)</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370; ">@</span><span class="comment" style="font-style: italic; color: #5C6370; ">doc</span> <span class="comment" style="font-style: italic; color: #5C6370; ">&quot;&quot;&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Flattens the given `list` of nested lists.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Empty list elements are discarded.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  ## Examples</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.flatten([1, [[2], 3]])</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [1, 2, 3]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.flatten([[], [[], []]])</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      []</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">flatten</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">deep_list</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="text" style="color: #ABB2BF; ">list</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="string" style="color: #98C379; ">deep_list: </span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">any</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">deep_list</span><span class="text" style="color: #ABB2BF; ">]</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">flatten</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="module" style="color: #61AFEF; ">:lists</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">flatten</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370; ">@</span><span class="comment" style="font-style: italic; color: #5C6370; ">doc</span> <span class="comment" style="font-style: italic; color: #5C6370; ">&quot;&quot;&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Flattens the given `list` of nested lists.</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  The list `tail` will be added at the end of</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  the flattened list.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Empty list elements from `list` are discarded,</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  but not the ones from `tail`.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  ## Examples</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.flatten([1, [[2], 3]], [4, 5])</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [1, 2, 3, 4, 5]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.flatten([1, [], 2], [3, [], 4])</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [1, 2, 3, [], 4]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">flatten</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">deep_list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">elem</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">elem</span><span class="text" style="color: #ABB2BF; ">]</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="string" style="color: #98C379; ">elem: </span><span class="text" style="color: #ABB2BF; ">var</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="string" style="color: #98C379; ">deep_list: </span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">elem</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">deep_list</span><span class="text" style="color: #ABB2BF; ">]</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">flatten</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">tail</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="module" style="color: #61AFEF; ">:lists</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">flatten</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">tail</span><span class="text" style="color: #ABB2BF; ">)</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370; ">@</span><span class="comment" style="font-style: italic; color: #5C6370; ">doc</span> <span class="comment" style="font-style: italic; color: #5C6370; ">&quot;&quot;&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Folds (reduces) the given list from the left with</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  a function. Requires an accumulator, which can be any value.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  ## Examples</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.foldl([5, 5], 10, fn x, acc -&gt; x + acc end)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      20</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.foldl([1, 2, 3, 4], 0, fn x, acc -&gt; x - acc end)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      2</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.foldl([1, 2, 3], {0, 0}, fn x, {a1, a2} -&gt; {a1 + x, a2 - x} end)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      {6, -6}</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">foldl</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">elem</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">acc</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">elem</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">acc</span> <span class="operator" style="color: #C678DD; ">-&gt;</span> <span class="text" style="color: #ABB2BF; ">acc</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="text" style="color: #ABB2BF; ">acc</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="string" style="color: #98C379; ">elem: </span><span class="text" style="color: #ABB2BF; ">var</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="string" style="color: #98C379; ">acc: </span><span class="text" style="color: #ABB2BF; ">var</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">foldl</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">acc</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">fun</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="function" style="color: #61AFEF; ">is_list</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">and</span> <span class="function" style="color: #61AFEF; ">is_function</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">fun</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="module" style="color: #61AFEF; ">:lists</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">foldl</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">fun</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">acc</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370; ">@</span><span class="comment" style="font-style: italic; color: #5C6370; ">doc</span> <span class="comment" style="font-style: italic; color: #5C6370; ">&quot;&quot;&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Folds (reduces) the given list from the right with</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  a function. Requires an accumulator, which can be any value.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  ## Examples</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.foldr([1, 2, 3, 4], 0, fn x, acc -&gt; x - acc end)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      -2</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.foldr([1, 2, 3, 4], %{sum: 0, product: 1}, fn x, %{sum: a1, product: a2} -&gt; %{sum: a1 + x, product: a2 * x} end)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      %{product: 24, sum: 10}</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">foldr</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">elem</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">acc</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">elem</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">acc</span> <span class="operator" style="color: #C678DD; ">-&gt;</span> <span class="text" style="color: #ABB2BF; ">acc</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="text" style="color: #ABB2BF; ">acc</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="string" style="color: #98C379; ">elem: </span><span class="text" style="color: #ABB2BF; ">var</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="string" style="color: #98C379; ">acc: </span><span class="text" style="color: #ABB2BF; ">var</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">foldr</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">acc</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">fun</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="function" style="color: #61AFEF; ">is_list</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">and</span> <span class="function" style="color: #61AFEF; ">is_function</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">fun</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="module" style="color: #61AFEF; ">:lists</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">foldr</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">fun</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">acc</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370; ">@</span><span class="comment" style="font-style: italic; color: #5C6370; ">doc</span> <span class="comment" style="font-style: italic; color: #5C6370; ">&quot;&quot;&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Returns the first element in `list` or `default` if `list` is empty.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  `first/2` has been introduced in Elixir v1.12.0, while `first/1` has been available since v1.0.0.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  ## Examples</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.first([])</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      nil</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.first([], 1)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      1</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.first([1])</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      1</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.first([1, 2, 3])</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      1</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">first</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">any</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="text" style="color: #ABB2BF; ">any</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">first</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">elem</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">...</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">any</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="text" style="color: #ABB2BF; ">elem</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="string" style="color: #98C379; ">elem: </span><span class="text" style="color: #ABB2BF; ">var</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">first</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">default</span> <span class="operator" style="color: #C678DD; ">\\</span> <span class="constant" style="color: #56B6C2; ">nil</span><span class="text" style="color: #ABB2BF; ">)</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">first</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">default</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="string" style="color: #98C379; ">do: </span><span class="text" style="color: #ABB2BF; ">default</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">first</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">head</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="comment" style="font-style: italic; color: #5C6370; ">_</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="comment" style="font-style: italic; color: #5C6370; ">_default</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="string" style="color: #98C379; ">do: </span><span class="text" style="color: #ABB2BF; ">head</span>

  <span class="comment" style="font-style: italic; color: #5C6370; ">@</span><span class="comment" style="font-style: italic; color: #5C6370; ">doc</span> <span class="comment" style="font-style: italic; color: #5C6370; ">&quot;&quot;&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Returns the last element in `list` or `default` if `list` is empty.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  `last/2` has been introduced in Elixir v1.12.0, while `last/1` has been available since v1.0.0.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  ## Examples</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.last([])</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      nil</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.last([], 1)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      1</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.last([1])</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      1</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.last([1, 2, 3])</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      3</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">last</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">any</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="text" style="color: #ABB2BF; ">any</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">last</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">elem</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">...</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">any</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="text" style="color: #ABB2BF; ">elem</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="string" style="color: #98C379; ">elem: </span><span class="text" style="color: #ABB2BF; ">var</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">compile</span> <span class="text" style="color: #ABB2BF; ">{</span><span class="string" style="color: #98C379; ">:inline</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="string" style="color: #98C379; ">last: </span><span class="text" style="color: #ABB2BF; ">2</span><span class="text" style="color: #ABB2BF; ">}</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">last</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">default</span> <span class="operator" style="color: #C678DD; ">\\</span> <span class="constant" style="color: #56B6C2; ">nil</span><span class="text" style="color: #ABB2BF; ">)</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">last</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">default</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="string" style="color: #98C379; ">do: </span><span class="text" style="color: #ABB2BF; ">default</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">last</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">head</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="comment" style="font-style: italic; color: #5C6370; ">_default</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="string" style="color: #98C379; ">do: </span><span class="text" style="color: #ABB2BF; ">head</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">last</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="comment" style="font-style: italic; color: #5C6370; ">_</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">tail</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">default</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="string" style="color: #98C379; ">do: </span><span class="function" style="color: #61AFEF; ">last</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">tail</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">default</span><span class="text" style="color: #ABB2BF; ">)</span>

  <span class="comment" style="font-style: italic; color: #5C6370; ">@</span><span class="comment" style="font-style: italic; color: #5C6370; ">doc</span> <span class="comment" style="font-style: italic; color: #5C6370; ">&quot;&quot;&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Receives a list of tuples and returns the first tuple</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  where the element at `position` in the tuple matches the</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  given `key`.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  If no matching tuple is found, `default` is returned.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  ## Examples</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.keyfind([a: 1, b: 2], :a, 0)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      {:a, 1}</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.keyfind([a: 1, b: 2], 2, 1)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      {:b, 2}</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.keyfind([a: 1, b: 2], :c, 0)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      nil</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  This function works for any list of tuples:</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.keyfind([{22, &quot;SSH&quot;}, {80, &quot;HTTP&quot;}], 22, 0)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      {22, &quot;SSH&quot;}</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">keyfind</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">tuple</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">any</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">non_neg_integer</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">any</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="text" style="color: #ABB2BF; ">any</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">keyfind</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">key</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">position</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">default</span> <span class="operator" style="color: #C678DD; ">\\</span> <span class="constant" style="color: #56B6C2; ">nil</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="function" style="color: #61AFEF; ">is_integer</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">position</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="module" style="color: #61AFEF; ">:lists</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">keyfind</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">key</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">position</span> <span class="operator" style="color: #C678DD; ">+</span> <span class="text" style="color: #ABB2BF; ">1</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">||</span> <span class="text" style="color: #ABB2BF; ">default</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370; ">@</span><span class="comment" style="font-style: italic; color: #5C6370; ">doc</span> <span class="comment" style="font-style: italic; color: #5C6370; ">&quot;&quot;&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Receives a list of tuples and returns the first tuple</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  where the element at `position` in the tuple matches the</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  given `key`.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  If no matching tuple is found, an error is raised.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  ## Examples</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.keyfind!([a: 1, b: 2], :a, 0)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      {:a, 1}</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.keyfind!([a: 1, b: 2], 2, 1)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      {:b, 2}</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.keyfind!([a: 1, b: 2], :c, 0)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      ** (KeyError) key :c at position 0 not found in: [a: 1, b: 2]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  This function works for any list of tuples:</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.keyfind!([{22, &quot;SSH&quot;}, {80, &quot;HTTP&quot;}], 22, 0)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      {22, &quot;SSH&quot;}</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">doc</span> <span class="string" style="color: #98C379; ">since: </span><span class="string" style="color: #98C379; ">&quot;1.13.0&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">keyfind!</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">tuple</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">any</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">non_neg_integer</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="text" style="color: #ABB2BF; ">any</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">keyfind!</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">key</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">position</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="function" style="color: #61AFEF; ">is_integer</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">position</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="module" style="color: #61AFEF; ">:lists</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">keyfind</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">key</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">position</span> <span class="operator" style="color: #C678DD; ">+</span> <span class="text" style="color: #ABB2BF; ">1</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">||</span>
      <span class="keyword" style="color: #E06C75; ">raise</span> <span class="module" style="color: #61AFEF; ">KeyError</span><span class="text" style="color: #ABB2BF; ">,</span>
        <span class="string" style="color: #98C379; ">key: </span><span class="text" style="color: #ABB2BF; ">key</span><span class="text" style="color: #ABB2BF; ">,</span>
        <span class="string" style="color: #98C379; ">term: </span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span>
        <span class="string" style="color: #98C379; ">message:</span>
<span class="string" style="color: #98C379; "></span>          <span class="string" style="color: #98C379; ">&quot;key <span class="text" style="color: #ABB2BF; "><span class="text" style="color: #ABB2BF; ">#{</span><span class="function" style="color: #61AFEF; ">inspect</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">key</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">}</span></span> at position <span class="text" style="color: #ABB2BF; "><span class="text" style="color: #ABB2BF; ">#{</span><span class="function" style="color: #61AFEF; ">inspect</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">position</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">}</span></span> not found in: <span class="text" style="color: #ABB2BF; "><span class="text" style="color: #ABB2BF; ">#{</span><span class="function" style="color: #61AFEF; ">inspect</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">}</span></span>&quot;</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370; ">@</span><span class="comment" style="font-style: italic; color: #5C6370; ">doc</span> <span class="comment" style="font-style: italic; color: #5C6370; ">&quot;&quot;&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Receives a list of tuples and returns `true` if there is</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  a tuple where the element at `position` in the tuple matches</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  the given `key`.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  ## Examples</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.keymember?([a: 1, b: 2], :a, 0)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      true</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.keymember?([a: 1, b: 2], 2, 1)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      true</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.keymember?([a: 1, b: 2], :c, 0)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      false</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  This function works for any list of tuples:</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.keymember?([{22, &quot;SSH&quot;}, {80, &quot;HTTP&quot;}], 22, 0)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      true</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">keymember?</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">tuple</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">any</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">non_neg_integer</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="text" style="color: #ABB2BF; ">boolean</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">keymember?</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">key</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">position</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="function" style="color: #61AFEF; ">is_integer</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">position</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="module" style="color: #61AFEF; ">:lists</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">keymember</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">key</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">position</span> <span class="operator" style="color: #C678DD; ">+</span> <span class="text" style="color: #ABB2BF; ">1</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370; ">@</span><span class="comment" style="font-style: italic; color: #5C6370; ">doc</span> <span class="comment" style="font-style: italic; color: #5C6370; ">&quot;&quot;&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Receives a list of tuples and if the identified element by `key` at `position`</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  exists, it is replaced with `new_tuple`.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  ## Examples</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.keyreplace([a: 1, b: 2], :a, 0, {:a, 3})</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [a: 3, b: 2]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.keyreplace([a: 1, b: 2], :a, 1, {:a, 3})</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [a: 1, b: 2]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  This function works for any list of tuples:</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.keyreplace([{22, &quot;SSH&quot;}, {80, &quot;HTTP&quot;}], 22, 0, {22, &quot;Secure Shell&quot;})</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [{22, &quot;Secure Shell&quot;}, {80, &quot;HTTP&quot;}]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">keyreplace</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">tuple</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">any</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">non_neg_integer</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">tuple</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">tuple</span><span class="text" style="color: #ABB2BF; ">]</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">keyreplace</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">key</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">position</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">new_tuple</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="function" style="color: #61AFEF; ">is_integer</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">position</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="module" style="color: #61AFEF; ">:lists</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">keyreplace</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">key</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">position</span> <span class="operator" style="color: #C678DD; ">+</span> <span class="text" style="color: #ABB2BF; ">1</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">new_tuple</span><span class="text" style="color: #ABB2BF; ">)</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370; ">@</span><span class="comment" style="font-style: italic; color: #5C6370; ">doc</span> <span class="comment" style="font-style: italic; color: #5C6370; ">&quot;&quot;&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Receives a list of tuples and sorts the elements</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  at `position` of the tuples.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  The sort is stable.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  A `sorter` argument is available since Elixir v1.14.0. Similar to</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  `Enum.sort/2`, the sorter can be an anonymous function, the atoms</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  `:asc` or `:desc`, or module that implements a compare function.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  ## Examples</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.keysort([a: 5, b: 1, c: 3], 1)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [b: 1, c: 3, a: 5]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.keysort([a: 5, c: 1, b: 3], 0)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [a: 5, b: 3, c: 1]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  To sort in descending order:</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.keysort([a: 5, c: 1, b: 3], 0, :desc)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [c: 1, b: 3, a: 5]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  As in `Enum.sort/2`, avoid using the default sorting function to sort</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  structs, as by default it performs structural comparison instead of a</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  semantic one. In such cases, you shall pass a sorting function as third</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  element or any module that implements a `compare/2` function. For example,</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  if you have tuples with user names and their birthday, and you want to</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  sort on their birthday, in both ascending and descending order, you should</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  do:</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; users = [</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      ...&gt;   {&quot;Ellis&quot;, ~D[1943-05-11]},</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      ...&gt;   {&quot;Lovelace&quot;, ~D[1815-12-10]},</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      ...&gt;   {&quot;Turing&quot;, ~D[1912-06-23]}</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      ...&gt; ]</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.keysort(users, 1, Date)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">        {&quot;Lovelace&quot;, ~D[1815-12-10]},</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">        {&quot;Turing&quot;, ~D[1912-06-23]},</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">        {&quot;Ellis&quot;, ~D[1943-05-11]}</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      ]</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.keysort(users, 1, {:desc, Date})</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">        {&quot;Ellis&quot;, ~D[1943-05-11]},</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">        {&quot;Turing&quot;, ~D[1912-06-23]},</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">        {&quot;Lovelace&quot;, ~D[1815-12-10]}</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      ]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">doc</span> <span class="string" style="color: #98C379; ">since: </span><span class="string" style="color: #98C379; ">&quot;1.14.0&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">keysort</span><span class="text" style="color: #ABB2BF; ">(</span>
          <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">tuple</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span>
          <span class="text" style="color: #ABB2BF; ">non_neg_integer</span><span class="text" style="color: #ABB2BF; ">,</span>
          <span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">any</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">any</span> <span class="operator" style="color: #C678DD; ">-&gt;</span> <span class="text" style="color: #ABB2BF; ">boolean</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="string" style="color: #98C379; ">:asc</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="string" style="color: #98C379; ">:desc</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="function" style="color: #61AFEF; ">module</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">{</span><span class="string" style="color: #98C379; ">:asc</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="string" style="color: #98C379; ">:desc</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="function" style="color: #61AFEF; ">module</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">}</span>
        <span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">tuple</span><span class="text" style="color: #ABB2BF; ">]</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">keysort</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">position</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">sorter</span> <span class="operator" style="color: #C678DD; ">\\</span> <span class="string" style="color: #98C379; ">:asc</span><span class="text" style="color: #ABB2BF; ">)</span>

  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">keysort</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">position</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="string" style="color: #98C379; ">:asc</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="function" style="color: #61AFEF; ">is_list</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">and</span> <span class="function" style="color: #61AFEF; ">is_integer</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">position</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="module" style="color: #61AFEF; ">:lists</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">keysort</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">position</span> <span class="operator" style="color: #C678DD; ">+</span> <span class="text" style="color: #ABB2BF; ">1</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">keysort</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">position</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">sorter</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="function" style="color: #61AFEF; ">is_list</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">and</span> <span class="function" style="color: #61AFEF; ">is_integer</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">position</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="module" style="color: #61AFEF; ">:lists</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">sort</span><span class="text" style="color: #ABB2BF; ">(</span><span class="function" style="color: #61AFEF; ">keysort_fun</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">sorter</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">position</span> <span class="operator" style="color: #C678DD; ">+</span> <span class="text" style="color: #ABB2BF; ">1</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">keysort_fun</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">sorter</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">position</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="function" style="color: #61AFEF; ">is_function</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">sorter</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">2</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">,</span>
    <span class="string" style="color: #98C379; ">do: </span><span class="operator" style="color: #C678DD; ">&amp;</span><span class="text" style="color: #ABB2BF; ">sorter</span><span class="operator" style="color: #C678DD; ">.</span><span class="text" style="color: #ABB2BF; ">(</span><span class="module" style="color: #61AFEF; ">:erlang</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">element</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">position</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="operator" style="color: #C678DD; ">&amp;</span><span class="operator" style="color: #C678DD; ">1</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="module" style="color: #61AFEF; ">:erlang</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">element</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">position</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="operator" style="color: #C678DD; ">&amp;</span><span class="operator" style="color: #C678DD; ">2</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">)</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">keysort_fun</span><span class="text" style="color: #ABB2BF; ">(</span><span class="string" style="color: #98C379; ">:desc</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">position</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">,</span>
    <span class="string" style="color: #98C379; ">do: </span><span class="operator" style="color: #C678DD; ">&amp;</span><span class="text" style="color: #ABB2BF; ">(</span><span class="module" style="color: #61AFEF; ">:erlang</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">element</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">position</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="operator" style="color: #C678DD; ">&amp;</span><span class="operator" style="color: #C678DD; ">1</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">&gt;=</span> <span class="module" style="color: #61AFEF; ">:erlang</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">element</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">position</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="operator" style="color: #C678DD; ">&amp;</span><span class="operator" style="color: #C678DD; ">2</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">)</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">keysort_fun</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">module</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">position</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="function" style="color: #61AFEF; ">is_atom</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">module</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">,</span>
    <span class="string" style="color: #98C379; ">do: </span><span class="operator" style="color: #C678DD; ">&amp;</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">module</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">compare</span><span class="text" style="color: #ABB2BF; ">(</span><span class="module" style="color: #61AFEF; ">:erlang</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">element</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">position</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="operator" style="color: #C678DD; ">&amp;</span><span class="operator" style="color: #C678DD; ">1</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="module" style="color: #61AFEF; ">:erlang</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">element</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">position</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="operator" style="color: #C678DD; ">&amp;</span><span class="operator" style="color: #C678DD; ">2</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">!=</span> <span class="string" style="color: #98C379; ">:gt</span><span class="text" style="color: #ABB2BF; ">)</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">keysort_fun</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">{</span><span class="string" style="color: #98C379; ">:asc</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">module</span><span class="text" style="color: #ABB2BF; ">}</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">position</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="function" style="color: #61AFEF; ">is_atom</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">module</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">,</span>
    <span class="string" style="color: #98C379; ">do: </span><span class="operator" style="color: #C678DD; ">&amp;</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">module</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">compare</span><span class="text" style="color: #ABB2BF; ">(</span><span class="module" style="color: #61AFEF; ">:erlang</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">element</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">position</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="operator" style="color: #C678DD; ">&amp;</span><span class="operator" style="color: #C678DD; ">1</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="module" style="color: #61AFEF; ">:erlang</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">element</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">position</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="operator" style="color: #C678DD; ">&amp;</span><span class="operator" style="color: #C678DD; ">2</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">!=</span> <span class="string" style="color: #98C379; ">:gt</span><span class="text" style="color: #ABB2BF; ">)</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">keysort_fun</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">{</span><span class="string" style="color: #98C379; ">:desc</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">module</span><span class="text" style="color: #ABB2BF; ">}</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">position</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="function" style="color: #61AFEF; ">is_atom</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">module</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">,</span>
    <span class="string" style="color: #98C379; ">do: </span><span class="operator" style="color: #C678DD; ">&amp;</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">module</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">compare</span><span class="text" style="color: #ABB2BF; ">(</span><span class="module" style="color: #61AFEF; ">:erlang</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">element</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">position</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="operator" style="color: #C678DD; ">&amp;</span><span class="operator" style="color: #C678DD; ">1</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="module" style="color: #61AFEF; ">:erlang</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">element</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">position</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="operator" style="color: #C678DD; ">&amp;</span><span class="operator" style="color: #C678DD; ">2</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">!=</span> <span class="string" style="color: #98C379; ">:lt</span><span class="text" style="color: #ABB2BF; ">)</span>

  <span class="comment" style="font-style: italic; color: #5C6370; ">@</span><span class="comment" style="font-style: italic; color: #5C6370; ">doc</span> <span class="comment" style="font-style: italic; color: #5C6370; ">&quot;&quot;&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Receives a `list` of tuples and replaces the element</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  identified by `key` at `position` with `new_tuple`.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  If the element does not exist, it is added to the end of the `list`.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  ## Examples</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.keystore([a: 1, b: 2], :a, 0, {:a, 3})</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [a: 3, b: 2]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.keystore([a: 1, b: 2], :c, 0, {:c, 3})</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [a: 1, b: 2, c: 3]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  This function works for any list of tuples:</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.keystore([{22, &quot;SSH&quot;}], 80, 0, {80, &quot;HTTP&quot;})</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [{22, &quot;SSH&quot;}, {80, &quot;HTTP&quot;}]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">keystore</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">tuple</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">any</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">non_neg_integer</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">tuple</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">tuple</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">...</span><span class="text" style="color: #ABB2BF; ">]</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">keystore</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">key</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">position</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">new_tuple</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="function" style="color: #61AFEF; ">is_integer</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">position</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="module" style="color: #61AFEF; ">:lists</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">keystore</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">key</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">position</span> <span class="operator" style="color: #C678DD; ">+</span> <span class="text" style="color: #ABB2BF; ">1</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">new_tuple</span><span class="text" style="color: #ABB2BF; ">)</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370; ">@</span><span class="comment" style="font-style: italic; color: #5C6370; ">doc</span> <span class="comment" style="font-style: italic; color: #5C6370; ">&quot;&quot;&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Receives a `list` of tuples and deletes the first tuple</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  where the element at `position` matches the</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  given `key`. Returns the new list.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  ## Examples</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.keydelete([a: 1, b: 2], :a, 0)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [b: 2]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.keydelete([a: 1, b: 2], 2, 1)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [a: 1]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.keydelete([a: 1, b: 2], :c, 0)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [a: 1, b: 2]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  This function works for any list of tuples:</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.keydelete([{22, &quot;SSH&quot;}, {80, &quot;HTTP&quot;}], 80, 0)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [{22, &quot;SSH&quot;}]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">keydelete</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">tuple</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">any</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">non_neg_integer</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">tuple</span><span class="text" style="color: #ABB2BF; ">]</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">keydelete</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">key</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">position</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="function" style="color: #61AFEF; ">is_integer</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">position</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="module" style="color: #61AFEF; ">:lists</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">keydelete</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">key</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">position</span> <span class="operator" style="color: #C678DD; ">+</span> <span class="text" style="color: #ABB2BF; ">1</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370; ">@</span><span class="comment" style="font-style: italic; color: #5C6370; ">doc</span> <span class="comment" style="font-style: italic; color: #5C6370; ">&quot;&quot;&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Receives a `list` of tuples and returns the first tuple</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  where the element at `position` in the tuple matches the</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  given `key`, as well as the `list` without found tuple.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  If such a tuple is not found, `nil` will be returned.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  ## Examples</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.keytake([a: 1, b: 2], :a, 0)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      {{:a, 1}, [b: 2]}</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.keytake([a: 1, b: 2], 2, 1)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      {{:b, 2}, [a: 1]}</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.keytake([a: 1, b: 2], :c, 0)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      nil</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  This function works for any list of tuples:</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.keytake([{22, &quot;SSH&quot;}, {80, &quot;HTTP&quot;}], 80, 0)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      {{80, &quot;HTTP&quot;}, [{22, &quot;SSH&quot;}]}</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">keytake</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">tuple</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">any</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">non_neg_integer</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="text" style="color: #ABB2BF; ">{</span><span class="text" style="color: #ABB2BF; ">tuple</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">tuple</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">}</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="constant" style="color: #56B6C2; ">nil</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">keytake</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">key</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">position</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="function" style="color: #61AFEF; ">is_integer</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">position</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="keyword" style="color: #E06C75; ">case</span> <span class="module" style="color: #61AFEF; ">:lists</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">keytake</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">key</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">position</span> <span class="operator" style="color: #C678DD; ">+</span> <span class="text" style="color: #ABB2BF; ">1</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
      <span class="text" style="color: #ABB2BF; ">{</span><span class="string" style="color: #98C379; ">:value</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">element</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">}</span> <span class="operator" style="color: #C678DD; ">-&gt;</span> <span class="text" style="color: #ABB2BF; ">{</span><span class="text" style="color: #ABB2BF; ">element</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">}</span>
      <span class="constant" style="color: #56B6C2; ">false</span> <span class="operator" style="color: #C678DD; ">-&gt;</span> <span class="constant" style="color: #56B6C2; ">nil</span>
    <span class="keyword" style="color: #E06C75; ">end</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370; ">@</span><span class="comment" style="font-style: italic; color: #5C6370; ">doc</span> <span class="comment" style="font-style: italic; color: #5C6370; ">&quot;&quot;&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Wraps `term` in a list if this is not list.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  If `term` is already a list, it returns the list.</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  If `term` is `nil`, it returns an empty list.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  ## Examples</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.wrap(&quot;hello&quot;)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [&quot;hello&quot;]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.wrap([1, 2, 3])</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [1, 2, 3]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.wrap(nil)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      []</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">wrap</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">term</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="function" style="color: #61AFEF; ">maybe_improper_list</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">)</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">wrap</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">term</span><span class="text" style="color: #ABB2BF; ">)</span>

  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">wrap</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="function" style="color: #61AFEF; ">is_list</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="text" style="color: #ABB2BF; ">list</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">wrap</span><span class="text" style="color: #ABB2BF; ">(</span><span class="constant" style="color: #56B6C2; ">nil</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">]</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">wrap</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">other</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">other</span><span class="text" style="color: #ABB2BF; ">]</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370; ">@</span><span class="comment" style="font-style: italic; color: #5C6370; ">doc</span> <span class="comment" style="font-style: italic; color: #5C6370; ">&quot;&quot;&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Zips corresponding elements from each list in `list_of_lists`.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  The zipping finishes as soon as any list terminates.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  ## Examples</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.zip([[1, 2], [3, 4], [5, 6]])</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [{1, 3, 5}, {2, 4, 6}]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.zip([[1, 2], [3], [5, 6]])</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [{1, 3, 5}]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">zip</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">tuple</span><span class="text" style="color: #ABB2BF; ">]</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">zip</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="string" style="color: #98C379; ">do: </span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">]</span>

  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">zip</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list_of_lists</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="function" style="color: #61AFEF; ">is_list</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list_of_lists</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="function" style="color: #61AFEF; ">do_zip</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list_of_lists</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">)</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370; ">@</span><span class="comment" style="font-style: italic; color: #5C6370; ">doc</span> <span class="comment" style="font-style: italic; color: #5C6370; ">~S<span class="comment" style="font-style: italic; color: #5C6370; ">&quot;&quot;&quot;</span></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Checks if `list` is a charlist made only of printable ASCII characters.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Takes an optional `limit` as a second argument. `ascii_printable?/2` only</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  checks the printability of the list up to the `limit`.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  A printable charlist in Elixir contains only the printable characters in the</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  standard seven-bit ASCII character encoding, which are characters ranging from</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  32 to 126 in decimal notation, plus the following control characters:</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">    * `?\a` - Bell</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">    * `?\b` - Backspace</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">    * `?\t` - Horizontal tab</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">    * `?\n` - Line feed</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">    * `?\v` - Vertical tab</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">    * `?\f` - Form feed</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">    * `?\r` - Carriage return</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">    * `?\e` - Escape</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  For more information read the [Character groups](https://en.wikipedia.org/wiki/ASCII#Character_groups)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  section in the Wikipedia article of the [ASCII](https://en.wikipedia.org/wiki/ASCII) standard.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  ## Examples</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.ascii_printable?(~c&quot;abc&quot;)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      true</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.ascii_printable?(~c&quot;abc&quot; ++ [0])</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      false</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.ascii_printable?(~c&quot;abc&quot; ++ [0], 2)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      true</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Improper lists are not printable, even if made only of ASCII characters:</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.ascii_printable?(~c&quot;abc&quot; ++ ?d)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      false</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  <span class="comment" style="font-style: italic; color: #5C6370; ">&quot;&quot;&quot;</span></span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">doc</span> <span class="string" style="color: #98C379; ">since: </span><span class="string" style="color: #98C379; ">&quot;1.6.0&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">ascii_printable?</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">0</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="constant" style="color: #56B6C2; ">true</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">ascii_printable?</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">limit</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="constant" style="color: #56B6C2; ">true</span>
        <span class="keyword" style="color: #E06C75; ">when</span> <span class="string" style="color: #98C379; ">limit: </span><span class="string" style="color: #98C379; ">:infinity</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">pos_integer</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">ascii_printable?</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">...</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">limit</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="text" style="color: #ABB2BF; ">boolean</span>
        <span class="keyword" style="color: #E06C75; ">when</span> <span class="string" style="color: #98C379; ">limit: </span><span class="string" style="color: #98C379; ">:infinity</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">pos_integer</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">ascii_printable?</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">limit</span> <span class="operator" style="color: #C678DD; ">\\</span> <span class="string" style="color: #98C379; ">:infinity</span><span class="text" style="color: #ABB2BF; ">)</span>
      <span class="keyword" style="color: #E06C75; ">when</span> <span class="function" style="color: #61AFEF; ">is_list</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">and</span> <span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">limit</span> <span class="operator" style="color: #C678DD; ">==</span> <span class="string" style="color: #98C379; ">:infinity</span> <span class="keyword" style="color: #E06C75; ">or</span> <span class="text" style="color: #ABB2BF; ">(</span><span class="function" style="color: #61AFEF; ">is_integer</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">limit</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">and</span> <span class="text" style="color: #ABB2BF; ">limit</span> <span class="operator" style="color: #C678DD; ">&gt;=</span> <span class="text" style="color: #ABB2BF; ">0</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="function" style="color: #61AFEF; ">ascii_printable_guarded?</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">limit</span><span class="text" style="color: #ABB2BF; ">)</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">ascii_printable_guarded?</span><span class="text" style="color: #ABB2BF; ">(</span><span class="comment" style="font-style: italic; color: #5C6370; ">_</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">0</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="constant" style="color: #56B6C2; ">true</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">ascii_printable_guarded?</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">char</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">rest</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">counter</span><span class="text" style="color: #ABB2BF; ">)</span>
       <span class="comment" style="font-style: italic; color: #5C6370; "># 7..13 is the range &#39;\a\b\t\n\v\f\r&#39;. 32..126 are ASCII printables.</span>
       <span class="keyword" style="color: #E06C75; ">when</span> <span class="function" style="color: #61AFEF; ">is_integer</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">char</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">and</span>
              <span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">char</span> <span class="operator" style="color: #C678DD; ">&gt;=</span> <span class="text" style="color: #ABB2BF; ">7</span> <span class="keyword" style="color: #E06C75; ">and</span> <span class="text" style="color: #ABB2BF; ">char</span> <span class="operator" style="color: #C678DD; ">&lt;=</span> <span class="text" style="color: #ABB2BF; ">13</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">or</span> <span class="text" style="color: #ABB2BF; ">char</span> <span class="operator" style="color: #C678DD; ">==</span> <span class="constant" style="color: #56B6C2; ">?\e</span> <span class="keyword" style="color: #E06C75; ">or</span> <span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">char</span> <span class="operator" style="color: #C678DD; ">&gt;=</span> <span class="text" style="color: #ABB2BF; ">32</span> <span class="keyword" style="color: #E06C75; ">and</span> <span class="text" style="color: #ABB2BF; ">char</span> <span class="operator" style="color: #C678DD; ">&lt;=</span> <span class="text" style="color: #ABB2BF; ">126</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="function" style="color: #61AFEF; ">ascii_printable_guarded?</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">rest</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="function" style="color: #61AFEF; ">decrement</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">counter</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">)</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">ascii_printable_guarded?</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="comment" style="font-style: italic; color: #5C6370; ">_counter</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="string" style="color: #98C379; ">do: </span><span class="constant" style="color: #56B6C2; ">true</span>
  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">ascii_printable_guarded?</span><span class="text" style="color: #ABB2BF; ">(</span><span class="comment" style="font-style: italic; color: #5C6370; ">_</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="comment" style="font-style: italic; color: #5C6370; ">_counter</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="string" style="color: #98C379; ">do: </span><span class="constant" style="color: #56B6C2; ">false</span>

  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">compile</span> <span class="text" style="color: #ABB2BF; ">{</span><span class="string" style="color: #98C379; ">:inline</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="string" style="color: #98C379; ">decrement: </span><span class="text" style="color: #ABB2BF; ">1</span><span class="text" style="color: #ABB2BF; ">}</span>
  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">decrement</span><span class="text" style="color: #ABB2BF; ">(</span><span class="string" style="color: #98C379; ">:infinity</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="string" style="color: #98C379; ">do: </span><span class="string" style="color: #98C379; ">:infinity</span>
  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">decrement</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">counter</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="string" style="color: #98C379; ">do: </span><span class="text" style="color: #ABB2BF; ">counter</span> <span class="operator" style="color: #C678DD; ">-</span> <span class="text" style="color: #ABB2BF; ">1</span>

  <span class="comment" style="font-style: italic; color: #5C6370; ">@</span><span class="comment" style="font-style: italic; color: #5C6370; ">doc</span> <span class="comment" style="font-style: italic; color: #5C6370; ">&quot;&quot;&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Returns `true` if `list` is an improper list. Otherwise returns `false`.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  ## Examples</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.improper?([1, 2 | 3])</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      true</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.improper?([1, 2, 3])</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      false</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">doc</span> <span class="string" style="color: #98C379; ">since: </span><span class="string" style="color: #98C379; ">&quot;1.8.0&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">improper?</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">maybe_improper_list</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="text" style="color: #ABB2BF; ">boolean</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">improper?</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="function" style="color: #61AFEF; ">is_list</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">and</span> <span class="function" style="color: #61AFEF; ">length</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">&gt;=</span> <span class="text" style="color: #ABB2BF; ">0</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="string" style="color: #98C379; ">do: </span><span class="constant" style="color: #56B6C2; ">false</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">improper?</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="function" style="color: #61AFEF; ">is_list</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="string" style="color: #98C379; ">do: </span><span class="constant" style="color: #56B6C2; ">true</span>

  <span class="comment" style="font-style: italic; color: #5C6370; ">@</span><span class="comment" style="font-style: italic; color: #5C6370; ">doc</span> <span class="comment" style="font-style: italic; color: #5C6370; ">&quot;&quot;&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Returns a list with `value` inserted at the specified `index`.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Note that `index` is capped at the list length. Negative indices</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  indicate an offset from the end of the `list`.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  ## Examples</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.insert_at([1, 2, 3, 4], 2, 0)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [1, 2, 0, 3, 4]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.insert_at([1, 2, 3], 10, 0)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [1, 2, 3, 0]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.insert_at([1, 2, 3], -1, 0)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [1, 2, 3, 0]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.insert_at([1, 2, 3], -10, 0)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [0, 1, 2, 3]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">insert_at</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">integer</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">any</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="text" style="color: #ABB2BF; ">list</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">insert_at</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">index</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">value</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="function" style="color: #61AFEF; ">is_list</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">and</span> <span class="function" style="color: #61AFEF; ">is_integer</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">index</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="keyword" style="color: #E06C75; ">case</span> <span class="text" style="color: #ABB2BF; ">index</span> <span class="keyword" style="color: #E06C75; ">do</span>
      <span class="operator" style="color: #C678DD; ">-</span><span class="text" style="color: #ABB2BF; ">1</span> <span class="operator" style="color: #C678DD; ">-&gt;</span>
        <span class="text" style="color: #ABB2BF; ">list</span> <span class="operator" style="color: #C678DD; ">++</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">value</span><span class="text" style="color: #ABB2BF; ">]</span>

      <span class="comment" style="font-style: italic; color: #5C6370; ">_</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="text" style="color: #ABB2BF; ">index</span> <span class="operator" style="color: #C678DD; ">&lt;</span> <span class="text" style="color: #ABB2BF; ">0</span> <span class="operator" style="color: #C678DD; ">-&gt;</span>
        <span class="keyword" style="color: #E06C75; ">case</span> <span class="function" style="color: #61AFEF; ">length</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">+</span> <span class="text" style="color: #ABB2BF; ">index</span> <span class="operator" style="color: #C678DD; ">+</span> <span class="text" style="color: #ABB2BF; ">1</span> <span class="keyword" style="color: #E06C75; ">do</span>
          <span class="text" style="color: #ABB2BF; ">index</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="text" style="color: #ABB2BF; ">index</span> <span class="operator" style="color: #C678DD; ">&lt;</span> <span class="text" style="color: #ABB2BF; ">0</span> <span class="operator" style="color: #C678DD; ">-&gt;</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">value</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">]</span>
          <span class="text" style="color: #ABB2BF; ">index</span> <span class="operator" style="color: #C678DD; ">-&gt;</span> <span class="function" style="color: #61AFEF; ">do_insert_at</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">index</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">value</span><span class="text" style="color: #ABB2BF; ">)</span>
        <span class="keyword" style="color: #E06C75; ">end</span>

      <span class="comment" style="font-style: italic; color: #5C6370; ">_</span> <span class="operator" style="color: #C678DD; ">-&gt;</span>
        <span class="function" style="color: #61AFEF; ">do_insert_at</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">index</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">value</span><span class="text" style="color: #ABB2BF; ">)</span>
    <span class="keyword" style="color: #E06C75; ">end</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370; ">@</span><span class="comment" style="font-style: italic; color: #5C6370; ">doc</span> <span class="comment" style="font-style: italic; color: #5C6370; ">&quot;&quot;&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Returns a list with a replaced value at the specified `index`.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Negative indices indicate an offset from the end of the `list`.</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  If `index` is out of bounds, the original `list` is returned.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  ## Examples</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.replace_at([1, 2, 3], 0, 0)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [0, 2, 3]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.replace_at([1, 2, 3], 10, 0)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [1, 2, 3]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.replace_at([1, 2, 3], -1, 0)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [1, 2, 0]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.replace_at([1, 2, 3], -10, 0)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [1, 2, 3]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">replace_at</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">integer</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">any</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="text" style="color: #ABB2BF; ">list</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">replace_at</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">index</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">value</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="function" style="color: #61AFEF; ">is_list</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">and</span> <span class="function" style="color: #61AFEF; ">is_integer</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">index</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="keyword" style="color: #E06C75; ">if</span> <span class="text" style="color: #ABB2BF; ">index</span> <span class="operator" style="color: #C678DD; ">&lt;</span> <span class="text" style="color: #ABB2BF; ">0</span> <span class="keyword" style="color: #E06C75; ">do</span>
      <span class="keyword" style="color: #E06C75; ">case</span> <span class="function" style="color: #61AFEF; ">length</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">+</span> <span class="text" style="color: #ABB2BF; ">index</span> <span class="keyword" style="color: #E06C75; ">do</span>
        <span class="text" style="color: #ABB2BF; ">index</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="text" style="color: #ABB2BF; ">index</span> <span class="operator" style="color: #C678DD; ">&lt;</span> <span class="text" style="color: #ABB2BF; ">0</span> <span class="operator" style="color: #C678DD; ">-&gt;</span> <span class="text" style="color: #ABB2BF; ">list</span>
        <span class="text" style="color: #ABB2BF; ">index</span> <span class="operator" style="color: #C678DD; ">-&gt;</span> <span class="function" style="color: #61AFEF; ">do_replace_at</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">index</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">value</span><span class="text" style="color: #ABB2BF; ">)</span>
      <span class="keyword" style="color: #E06C75; ">end</span>
    <span class="keyword" style="color: #E06C75; ">else</span>
      <span class="function" style="color: #61AFEF; ">do_replace_at</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">index</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">value</span><span class="text" style="color: #ABB2BF; ">)</span>
    <span class="keyword" style="color: #E06C75; ">end</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370; ">@</span><span class="comment" style="font-style: italic; color: #5C6370; ">doc</span> <span class="comment" style="font-style: italic; color: #5C6370; ">&quot;&quot;&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Returns a list with an updated value at the specified `index`.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Negative indices indicate an offset from the end of the `list`.</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  If `index` is out of bounds, the original `list` is returned.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  ## Examples</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.update_at([1, 2, 3], 0, &amp;(&amp;1 + 10))</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [11, 2, 3]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.update_at([1, 2, 3], 10, &amp;(&amp;1 + 10))</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [1, 2, 3]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.update_at([1, 2, 3], -1, &amp;(&amp;1 + 10))</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [1, 2, 13]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.update_at([1, 2, 3], -10, &amp;(&amp;1 + 10))</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [1, 2, 3]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">update_at</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">elem</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">integer</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">elem</span> <span class="operator" style="color: #C678DD; ">-&gt;</span> <span class="text" style="color: #ABB2BF; ">any</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="text" style="color: #ABB2BF; ">list</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="string" style="color: #98C379; ">elem: </span><span class="text" style="color: #ABB2BF; ">var</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">update_at</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">index</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">fun</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="function" style="color: #61AFEF; ">is_list</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">and</span> <span class="function" style="color: #61AFEF; ">is_function</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">fun</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">and</span> <span class="function" style="color: #61AFEF; ">is_integer</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">index</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="keyword" style="color: #E06C75; ">if</span> <span class="text" style="color: #ABB2BF; ">index</span> <span class="operator" style="color: #C678DD; ">&lt;</span> <span class="text" style="color: #ABB2BF; ">0</span> <span class="keyword" style="color: #E06C75; ">do</span>
      <span class="keyword" style="color: #E06C75; ">case</span> <span class="function" style="color: #61AFEF; ">length</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">+</span> <span class="text" style="color: #ABB2BF; ">index</span> <span class="keyword" style="color: #E06C75; ">do</span>
        <span class="text" style="color: #ABB2BF; ">index</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="text" style="color: #ABB2BF; ">index</span> <span class="operator" style="color: #C678DD; ">&lt;</span> <span class="text" style="color: #ABB2BF; ">0</span> <span class="operator" style="color: #C678DD; ">-&gt;</span> <span class="text" style="color: #ABB2BF; ">list</span>
        <span class="text" style="color: #ABB2BF; ">index</span> <span class="operator" style="color: #C678DD; ">-&gt;</span> <span class="function" style="color: #61AFEF; ">do_update_at</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">index</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">fun</span><span class="text" style="color: #ABB2BF; ">)</span>
      <span class="keyword" style="color: #E06C75; ">end</span>
    <span class="keyword" style="color: #E06C75; ">else</span>
      <span class="function" style="color: #61AFEF; ">do_update_at</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">index</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">fun</span><span class="text" style="color: #ABB2BF; ">)</span>
    <span class="keyword" style="color: #E06C75; ">end</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370; ">@</span><span class="comment" style="font-style: italic; color: #5C6370; ">doc</span> <span class="comment" style="font-style: italic; color: #5C6370; ">&quot;&quot;&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Produces a new list by removing the value at the specified `index`.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Negative indices indicate an offset from the end of the `list`.</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  If `index` is out of bounds, the original `list` is returned.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  ## Examples</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.delete_at([1, 2, 3], 0)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [2, 3]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.delete_at([1, 2, 3], 10)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [1, 2, 3]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.delete_at([1, 2, 3], -1)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [1, 2]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">delete_at</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">integer</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="text" style="color: #ABB2BF; ">list</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">delete_at</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">index</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="function" style="color: #61AFEF; ">is_integer</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">index</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="function" style="color: #61AFEF; ">elem</span><span class="text" style="color: #ABB2BF; ">(</span><span class="function" style="color: #61AFEF; ">pop_at</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">index</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">1</span><span class="text" style="color: #ABB2BF; ">)</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370; ">@</span><span class="comment" style="font-style: italic; color: #5C6370; ">doc</span> <span class="comment" style="font-style: italic; color: #5C6370; ">&quot;&quot;&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Returns and removes the value at the specified `index` in the `list`.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Negative indices indicate an offset from the end of the `list`.</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  If `index` is out of bounds, the original `list` is returned.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  ## Examples</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.pop_at([1, 2, 3], 0)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      {1, [2, 3]}</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.pop_at([1, 2, 3], 5)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      {nil, [1, 2, 3]}</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.pop_at([1, 2, 3], 5, 10)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      {10, [1, 2, 3]}</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.pop_at([1, 2, 3], -1)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      {3, [1, 2]}</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">doc</span> <span class="string" style="color: #98C379; ">since: </span><span class="string" style="color: #98C379; ">&quot;1.4.0&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">pop_at</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">integer</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">any</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="text" style="color: #ABB2BF; ">{</span><span class="text" style="color: #ABB2BF; ">any</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">}</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">pop_at</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">index</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">default</span> <span class="operator" style="color: #C678DD; ">\\</span> <span class="constant" style="color: #56B6C2; ">nil</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="function" style="color: #61AFEF; ">is_integer</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">index</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="keyword" style="color: #E06C75; ">if</span> <span class="text" style="color: #ABB2BF; ">index</span> <span class="operator" style="color: #C678DD; ">&lt;</span> <span class="text" style="color: #ABB2BF; ">0</span> <span class="keyword" style="color: #E06C75; ">do</span>
      <span class="function" style="color: #61AFEF; ">do_pop_at</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="function" style="color: #61AFEF; ">length</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">+</span> <span class="text" style="color: #ABB2BF; ">index</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">default</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">)</span>
    <span class="keyword" style="color: #E06C75; ">else</span>
      <span class="function" style="color: #61AFEF; ">do_pop_at</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">index</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">default</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">)</span>
    <span class="keyword" style="color: #E06C75; ">end</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370; ">@</span><span class="comment" style="font-style: italic; color: #5C6370; ">doc</span> <span class="comment" style="font-style: italic; color: #5C6370; ">&quot;&quot;&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Returns `true` if `list` starts with the given `prefix` list; otherwise returns `false`.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  If `prefix` is an empty list, it returns `true`.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  ### Examples</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.starts_with?([1, 2, 3], [1, 2])</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      true</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.starts_with?([1, 2], [1, 2, 3])</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      false</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.starts_with?([:alpha], [])</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      true</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.starts_with?([], [:alpha])</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      false</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">doc</span> <span class="string" style="color: #98C379; ">since: </span><span class="string" style="color: #98C379; ">&quot;1.5.0&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">starts_with?</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">nonempty_list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">nonempty_list</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="text" style="color: #ABB2BF; ">boolean</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">starts_with?</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="constant" style="color: #56B6C2; ">true</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">starts_with?</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">nonempty_list</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="constant" style="color: #56B6C2; ">false</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">starts_with?</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">prefix</span><span class="text" style="color: #ABB2BF; ">)</span>

  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">starts_with?</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">head</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">tail</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">head</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">prefix_tail</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="string" style="color: #98C379; ">do: </span><span class="function" style="color: #61AFEF; ">starts_with?</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">tail</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">prefix_tail</span><span class="text" style="color: #ABB2BF; ">)</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">starts_with?</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="function" style="color: #61AFEF; ">is_list</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="string" style="color: #98C379; ">do: </span><span class="constant" style="color: #56B6C2; ">true</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">starts_with?</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="comment" style="font-style: italic; color: #5C6370; ">_</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="comment" style="font-style: italic; color: #5C6370; ">_</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="function" style="color: #61AFEF; ">is_list</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="string" style="color: #98C379; ">do: </span><span class="constant" style="color: #56B6C2; ">false</span>

  <span class="comment" style="font-style: italic; color: #5C6370; ">@</span><span class="comment" style="font-style: italic; color: #5C6370; ">doc</span> <span class="comment" style="font-style: italic; color: #5C6370; ">&quot;&quot;&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Converts a charlist to an atom.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Elixir supports conversions from charlists which contain any Unicode</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  code point.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Inlined by the compiler.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  ## Examples</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.to_atom(~c&quot;Elixir&quot;)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      :Elixir</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.to_atom(~c&quot;ð¢ Elixir&quot;)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      :&quot;ð¢ Elixir&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">to_atom</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">charlist</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="text" style="color: #ABB2BF; ">atom</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">to_atom</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">charlist</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="module" style="color: #61AFEF; ">:erlang</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">list_to_atom</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">charlist</span><span class="text" style="color: #ABB2BF; ">)</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370; ">@</span><span class="comment" style="font-style: italic; color: #5C6370; ">doc</span> <span class="comment" style="font-style: italic; color: #5C6370; ">&quot;&quot;&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Converts a charlist to an existing atom.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Elixir supports conversions from charlists which contain any Unicode</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  code point. Raises an `ArgumentError` if the atom does not exist.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Inlined by the compiler.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &gt; #### Atoms and modules {: .info}</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &gt;</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &gt; Since Elixir is a compiled language, the atoms defined in a module</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &gt; will only exist after said module is loaded, which typically happens</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &gt; whenever a function in the module is executed. Therefore, it is</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &gt; generally recommended to call `List.to_existing_atom/1` only to</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &gt; convert atoms defined within the module making the function call</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &gt; to `to_existing_atom/1`.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  ## Examples</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; _ = :my_atom</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.to_existing_atom(~c&quot;my_atom&quot;)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      :my_atom</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; _ = :&quot;ð¢ Elixir&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.to_existing_atom(~c&quot;ð¢ Elixir&quot;)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      :&quot;ð¢ Elixir&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">to_existing_atom</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">charlist</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="text" style="color: #ABB2BF; ">atom</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">to_existing_atom</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">charlist</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="module" style="color: #61AFEF; ">:erlang</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">list_to_existing_atom</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">charlist</span><span class="text" style="color: #ABB2BF; ">)</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370; ">@</span><span class="comment" style="font-style: italic; color: #5C6370; ">doc</span> <span class="comment" style="font-style: italic; color: #5C6370; ">&quot;&quot;&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Returns the float whose text representation is `charlist`.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Inlined by the compiler.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  ## Examples</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.to_float(~c&quot;2.2017764e+0&quot;)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      2.2017764</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">to_float</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">charlist</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="text" style="color: #ABB2BF; ">float</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">to_float</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">charlist</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="module" style="color: #61AFEF; ">:erlang</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">list_to_float</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">charlist</span><span class="text" style="color: #ABB2BF; ">)</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370; ">@</span><span class="comment" style="font-style: italic; color: #5C6370; ">doc</span> <span class="comment" style="font-style: italic; color: #5C6370; ">&quot;&quot;&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Returns an integer whose text representation is `charlist`.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Inlined by the compiler.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  ## Examples</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.to_integer(~c&quot;123&quot;)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      123</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">to_integer</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">charlist</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="text" style="color: #ABB2BF; ">integer</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">to_integer</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">charlist</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="module" style="color: #61AFEF; ">:erlang</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">list_to_integer</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">charlist</span><span class="text" style="color: #ABB2BF; ">)</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370; ">@</span><span class="comment" style="font-style: italic; color: #5C6370; ">doc</span> <span class="comment" style="font-style: italic; color: #5C6370; ">&quot;&quot;&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Returns an integer whose text representation is `charlist` in base `base`.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Inlined by the compiler.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  The base needs to be between `2` and `36`.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  ## Examples</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.to_integer(~c&quot;3FF&quot;, 16)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      1023</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">to_integer</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">charlist</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">2</span><span class="operator" style="color: #C678DD; ">..</span><span class="text" style="color: #ABB2BF; ">36</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="text" style="color: #ABB2BF; ">integer</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">to_integer</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">charlist</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">base</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="module" style="color: #61AFEF; ">:erlang</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">list_to_integer</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">charlist</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">base</span><span class="text" style="color: #ABB2BF; ">)</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370; ">@</span><span class="comment" style="font-style: italic; color: #5C6370; ">doc</span> <span class="comment" style="font-style: italic; color: #5C6370; ">&quot;&quot;&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Converts a list to a tuple.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Inlined by the compiler.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  ## Examples</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.to_tuple([:share, [:elixir, 163]])</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      {:share, [:elixir, 163]}</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">to_tuple</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="text" style="color: #ABB2BF; ">tuple</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">to_tuple</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="module" style="color: #61AFEF; ">:erlang</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">list_to_tuple</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370; ">@</span><span class="comment" style="font-style: italic; color: #5C6370; ">doc</span> <span class="comment" style="font-style: italic; color: #5C6370; ">&quot;&quot;&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Converts a list of integers representing code points, lists or</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  strings into a string.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  To be converted to a string, a list must either be empty or only</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  contain the following elements:</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">    * strings</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">    * integers representing Unicode code points</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">    * a list containing one of these three elements</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Note that this function expects a list of integers representing</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Unicode code points. If you have a list of bytes, you must instead use</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  the [`:binary` module](`:binary`).</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  ## Examples</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.to_string([0x00E6, 0x00DF])</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      &quot;Ã¦Ã&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.to_string([0x0061, &quot;bc&quot;])</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      &quot;abc&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.to_string([0x0064, &quot;ee&quot;, [~c&quot;p&quot;]])</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      &quot;deep&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.to_string([])</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      &quot;&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">to_string</span><span class="text" style="color: #ABB2BF; ">(</span><span class="module" style="color: #61AFEF; ">:unicode</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">charlist</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="module" style="color: #61AFEF; ">String</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">t</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">)</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">to_string</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="function" style="color: #61AFEF; ">is_list</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="keyword" style="color: #E06C75; ">try</span> <span class="keyword" style="color: #E06C75; ">do</span>
      <span class="module" style="color: #61AFEF; ">:unicode</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">characters_to_binary</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span>
    <span class="keyword" style="color: #E06C75; ">rescue</span>
      <span class="module" style="color: #61AFEF; ">ArgumentError</span> <span class="operator" style="color: #C678DD; ">-&gt;</span>
        <span class="keyword" style="color: #E06C75; ">raise</span> <span class="module" style="color: #61AFEF; ">ArgumentError</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="string" style="color: #98C379; ">&quot;&quot;&quot;</span>
<span class="string" style="color: #98C379; ">        cannot convert the given list to a string.</span>
<span class="string" style="color: #98C379; "></span>
<span class="string" style="color: #98C379; ">        To be converted to a string, a list must either be empty or only</span>
<span class="string" style="color: #98C379; ">        contain the following elements:</span>
<span class="string" style="color: #98C379; "></span>
<span class="string" style="color: #98C379; ">          * strings</span>
<span class="string" style="color: #98C379; ">          * integers representing Unicode code points</span>
<span class="string" style="color: #98C379; ">          * a list containing one of these three elements</span>
<span class="string" style="color: #98C379; "></span>
<span class="string" style="color: #98C379; ">        Please check the given list or call inspect/1 to get the list representation, got:</span>
<span class="string" style="color: #98C379; "></span>
<span class="string" style="color: #98C379; ">        <span class="text" style="color: #ABB2BF; "><span class="text" style="color: #ABB2BF; ">#{</span><span class="function" style="color: #61AFEF; ">inspect</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">}</span></span></span>
<span class="string" style="color: #98C379; ">        &quot;&quot;&quot;</span>
    <span class="keyword" style="color: #E06C75; ">else</span>
      <span class="text" style="color: #ABB2BF; ">result</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="function" style="color: #61AFEF; ">is_binary</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">result</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">-&gt;</span>
        <span class="text" style="color: #ABB2BF; ">result</span>

      <span class="text" style="color: #ABB2BF; ">{</span><span class="string" style="color: #98C379; ">:error</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">encoded</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">rest</span><span class="text" style="color: #ABB2BF; ">}</span> <span class="operator" style="color: #C678DD; ">-&gt;</span>
        <span class="keyword" style="color: #E06C75; ">raise</span> <span class="module" style="color: #61AFEF; ">UnicodeConversionError</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="string" style="color: #98C379; ">encoded: </span><span class="text" style="color: #ABB2BF; ">encoded</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="string" style="color: #98C379; ">rest: </span><span class="text" style="color: #ABB2BF; ">rest</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="string" style="color: #98C379; ">kind: </span><span class="string" style="color: #98C379; ">:invalid</span>

      <span class="text" style="color: #ABB2BF; ">{</span><span class="string" style="color: #98C379; ">:incomplete</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">encoded</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">rest</span><span class="text" style="color: #ABB2BF; ">}</span> <span class="operator" style="color: #C678DD; ">-&gt;</span>
        <span class="keyword" style="color: #E06C75; ">raise</span> <span class="module" style="color: #61AFEF; ">UnicodeConversionError</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="string" style="color: #98C379; ">encoded: </span><span class="text" style="color: #ABB2BF; ">encoded</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="string" style="color: #98C379; ">rest: </span><span class="text" style="color: #ABB2BF; ">rest</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="string" style="color: #98C379; ">kind: </span><span class="string" style="color: #98C379; ">:incomplete</span>
    <span class="keyword" style="color: #E06C75; ">end</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370; ">@</span><span class="comment" style="font-style: italic; color: #5C6370; ">doc</span> <span class="comment" style="font-style: italic; color: #5C6370; ">&quot;&quot;&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Converts a list of integers representing Unicode code points, lists or</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  strings into a charlist.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Note that this function expects a list of integers representing</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Unicode code points. If you have a list of bytes, you must instead use</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  the [`:binary` module](`:binary`).</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  ## Examples</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; ~c&quot;Ã¦Ã&quot; = List.to_charlist([0x00E6, 0x00DF])</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [230, 223]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.to_charlist([0x0061, &quot;bc&quot;])</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      ~c&quot;abc&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.to_charlist([0x0064, &quot;ee&quot;, [~c&quot;p&quot;]])</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      ~c&quot;deep&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">doc</span> <span class="string" style="color: #98C379; ">since: </span><span class="string" style="color: #98C379; ">&quot;1.8.0&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">to_charlist</span><span class="text" style="color: #ABB2BF; ">(</span><span class="module" style="color: #61AFEF; ">:unicode</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">charlist</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="function" style="color: #61AFEF; ">charlist</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">)</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">to_charlist</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="function" style="color: #61AFEF; ">is_list</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="keyword" style="color: #E06C75; ">try</span> <span class="keyword" style="color: #E06C75; ">do</span>
      <span class="module" style="color: #61AFEF; ">:unicode</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">characters_to_list</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span>
    <span class="keyword" style="color: #E06C75; ">rescue</span>
      <span class="module" style="color: #61AFEF; ">ArgumentError</span> <span class="operator" style="color: #C678DD; ">-&gt;</span>
        <span class="keyword" style="color: #E06C75; ">raise</span> <span class="module" style="color: #61AFEF; ">ArgumentError</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="string" style="color: #98C379; ">&quot;&quot;&quot;</span>
<span class="string" style="color: #98C379; ">        cannot convert the given list to a charlist.</span>
<span class="string" style="color: #98C379; "></span>
<span class="string" style="color: #98C379; ">        To be converted to a charlist, a list must contain only:</span>
<span class="string" style="color: #98C379; "></span>
<span class="string" style="color: #98C379; ">          * strings</span>
<span class="string" style="color: #98C379; ">          * integers representing Unicode code points</span>
<span class="string" style="color: #98C379; ">          * or a list containing one of these three elements</span>
<span class="string" style="color: #98C379; "></span>
<span class="string" style="color: #98C379; ">        Please check the given list or call inspect/1 to get the list representation, got:</span>
<span class="string" style="color: #98C379; "></span>
<span class="string" style="color: #98C379; ">        <span class="text" style="color: #ABB2BF; "><span class="text" style="color: #ABB2BF; ">#{</span><span class="function" style="color: #61AFEF; ">inspect</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">}</span></span></span>
<span class="string" style="color: #98C379; ">        &quot;&quot;&quot;</span>
    <span class="keyword" style="color: #E06C75; ">else</span>
      <span class="text" style="color: #ABB2BF; ">result</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="function" style="color: #61AFEF; ">is_list</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">result</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">-&gt;</span>
        <span class="text" style="color: #ABB2BF; ">result</span>

      <span class="text" style="color: #ABB2BF; ">{</span><span class="string" style="color: #98C379; ">:error</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">encoded</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">rest</span><span class="text" style="color: #ABB2BF; ">}</span> <span class="operator" style="color: #C678DD; ">-&gt;</span>
        <span class="keyword" style="color: #E06C75; ">raise</span> <span class="module" style="color: #61AFEF; ">UnicodeConversionError</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="string" style="color: #98C379; ">encoded: </span><span class="text" style="color: #ABB2BF; ">encoded</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="string" style="color: #98C379; ">rest: </span><span class="text" style="color: #ABB2BF; ">rest</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="string" style="color: #98C379; ">kind: </span><span class="string" style="color: #98C379; ">:invalid</span>

      <span class="text" style="color: #ABB2BF; ">{</span><span class="string" style="color: #98C379; ">:incomplete</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">encoded</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">rest</span><span class="text" style="color: #ABB2BF; ">}</span> <span class="operator" style="color: #C678DD; ">-&gt;</span>
        <span class="keyword" style="color: #E06C75; ">raise</span> <span class="module" style="color: #61AFEF; ">UnicodeConversionError</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="string" style="color: #98C379; ">encoded: </span><span class="text" style="color: #ABB2BF; ">encoded</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="string" style="color: #98C379; ">rest: </span><span class="text" style="color: #ABB2BF; ">rest</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="string" style="color: #98C379; ">kind: </span><span class="string" style="color: #98C379; ">:incomplete</span>
    <span class="keyword" style="color: #E06C75; ">end</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370; ">@</span><span class="comment" style="font-style: italic; color: #5C6370; ">doc</span> <span class="comment" style="font-style: italic; color: #5C6370; ">&quot;&quot;&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Returns a keyword list that represents an *edit script*.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  The algorithm is outlined in the</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &quot;An O(ND) Difference Algorithm and Its Variations&quot; paper by E. Myers.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  An *edit script* is a keyword list. Each key describes the &quot;editing action&quot; to</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  take in order to bring `list1` closer to being equal to `list2`; a key can be</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  `:eq`, `:ins`, or `:del`. Each value is a sublist of either `list1` or `list2`</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  that should be inserted (if the corresponding key is `:ins`), deleted (if the</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  corresponding key is `:del`), or left alone (if the corresponding key is</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  `:eq`) in `list1` in order to be closer to `list2`.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  See `myers_difference/3` if you want to handle nesting in the diff scripts.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  ## Examples</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.myers_difference([1, 4, 2, 3], [1, 2, 3, 4])</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [eq: [1], del: [4], eq: [2, 3], ins: [4]]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">doc</span> <span class="string" style="color: #98C379; ">since: </span><span class="string" style="color: #98C379; ">&quot;1.4.0&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">myers_difference</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">{</span><span class="string" style="color: #98C379; ">:eq</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="string" style="color: #98C379; ">:ins</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="string" style="color: #98C379; ">:del</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">}</span><span class="text" style="color: #ABB2BF; ">]</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">myers_difference</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list1</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">list2</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="function" style="color: #61AFEF; ">is_list</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list1</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">and</span> <span class="function" style="color: #61AFEF; ">is_list</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list2</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="function" style="color: #61AFEF; ">myers_difference_with_diff_script</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list1</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">list2</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="constant" style="color: #56B6C2; ">nil</span><span class="text" style="color: #ABB2BF; ">)</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370; ">@</span><span class="comment" style="font-style: italic; color: #5C6370; ">doc</span> <span class="comment" style="font-style: italic; color: #5C6370; ">&quot;&quot;&quot;</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  Returns a keyword list that represents an *edit script* with nested diffs.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  This is an extension of `myers_difference/2` where a `diff_script` function</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  can be given in case it is desired to compute nested differences. The function</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  may return a list with the inner edit script or `nil` in case there is no</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  such script. The returned inner edit script will be under the `:diff` key.</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  ## Examples</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      iex&gt; List.myers_difference([&quot;a&quot;, &quot;db&quot;, &quot;c&quot;], [&quot;a&quot;, &quot;bc&quot;], &amp;String.myers_difference/2)</span>
<span class="comment" style="font-style: italic; color: #5C6370; ">      [eq: [&quot;a&quot;], diff: [del: &quot;d&quot;, eq: &quot;b&quot;, ins: &quot;c&quot;], del: [&quot;c&quot;]]</span>
<span class="comment" style="font-style: italic; color: #5C6370; "></span>
<span class="comment" style="font-style: italic; color: #5C6370; ">  &quot;&quot;&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">doc</span> <span class="string" style="color: #98C379; ">since: </span><span class="string" style="color: #98C379; ">&quot;1.8.0&quot;</span>
  <span class="attribute" style="color: #E5C07B; ">@</span><span class="attribute" style="color: #E5C07B; ">spec</span> <span class="function" style="color: #61AFEF; ">myers_difference</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">term</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">term</span> <span class="operator" style="color: #C678DD; ">-&gt;</span> <span class="text" style="color: #ABB2BF; ">script</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="constant" style="color: #56B6C2; ">nil</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">::</span> <span class="text" style="color: #ABB2BF; ">script</span>
        <span class="keyword" style="color: #E06C75; ">when</span> <span class="string" style="color: #98C379; ">script: </span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">{</span><span class="string" style="color: #98C379; ">:eq</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="string" style="color: #98C379; ">:ins</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="string" style="color: #98C379; ">:del</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="string" style="color: #98C379; ">:diff</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">}</span><span class="text" style="color: #ABB2BF; ">]</span>
  <span class="keyword" style="color: #E06C75; ">def</span> <span class="function" style="color: #61AFEF; ">myers_difference</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list1</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">list2</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">diff_script</span><span class="text" style="color: #ABB2BF; ">)</span>
      <span class="keyword" style="color: #E06C75; ">when</span> <span class="function" style="color: #61AFEF; ">is_list</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list1</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">and</span> <span class="function" style="color: #61AFEF; ">is_list</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list2</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">and</span> <span class="function" style="color: #61AFEF; ">is_function</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">diff_script</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="function" style="color: #61AFEF; ">myers_difference_with_diff_script</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list1</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">list2</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">diff_script</span><span class="text" style="color: #ABB2BF; ">)</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">myers_difference_with_diff_script</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list1</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">list2</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">diff_script</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="text" style="color: #ABB2BF; ">path</span> <span class="operator" style="color: #C678DD; ">=</span> <span class="text" style="color: #ABB2BF; ">{</span><span class="text" style="color: #ABB2BF; ">0</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">list1</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">list2</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">}</span>
    <span class="function" style="color: #61AFEF; ">find_script</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">0</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="function" style="color: #61AFEF; ">length</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list1</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">+</span> <span class="function" style="color: #61AFEF; ">length</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list2</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">path</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">diff_script</span><span class="text" style="color: #ABB2BF; ">)</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">find_script</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">envelope</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">max</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">paths</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">diff_script</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="keyword" style="color: #E06C75; ">case</span> <span class="function" style="color: #61AFEF; ">each_diagonal</span><span class="text" style="color: #ABB2BF; ">(</span><span class="operator" style="color: #C678DD; ">-</span><span class="text" style="color: #ABB2BF; ">envelope</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">envelope</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">paths</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">diff_script</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
      <span class="text" style="color: #ABB2BF; ">{</span><span class="string" style="color: #98C379; ">:done</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">edits</span><span class="text" style="color: #ABB2BF; ">}</span> <span class="operator" style="color: #C678DD; ">-&gt;</span> <span class="function" style="color: #61AFEF; ">compact_reverse</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">edits</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">)</span>
      <span class="text" style="color: #ABB2BF; ">{</span><span class="string" style="color: #98C379; ">:next</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">paths</span><span class="text" style="color: #ABB2BF; ">}</span> <span class="operator" style="color: #C678DD; ">-&gt;</span> <span class="function" style="color: #61AFEF; ">find_script</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">envelope</span> <span class="operator" style="color: #C678DD; ">+</span> <span class="text" style="color: #ABB2BF; ">1</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">max</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">paths</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">diff_script</span><span class="text" style="color: #ABB2BF; ">)</span>
    <span class="keyword" style="color: #E06C75; ">end</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">compact_reverse</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">acc</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="string" style="color: #98C379; ">do: </span><span class="text" style="color: #ABB2BF; ">acc</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">compact_reverse</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">{</span><span class="string" style="color: #98C379; ">:diff</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="comment" style="font-style: italic; color: #5C6370; ">_</span><span class="text" style="color: #ABB2BF; ">}</span> <span class="operator" style="color: #C678DD; ">=</span> <span class="text" style="color: #ABB2BF; ">fragment</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">rest</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">acc</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="function" style="color: #61AFEF; ">compact_reverse</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">rest</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">fragment</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">acc</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">)</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">compact_reverse</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">{</span><span class="text" style="color: #ABB2BF; ">kind</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">elem</span><span class="text" style="color: #ABB2BF; ">}</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">rest</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">{</span><span class="text" style="color: #ABB2BF; ">kind</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">result</span><span class="text" style="color: #ABB2BF; ">}</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">acc</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="function" style="color: #61AFEF; ">compact_reverse</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">rest</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">{</span><span class="text" style="color: #ABB2BF; ">kind</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">elem</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">result</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">}</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">acc</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">)</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">compact_reverse</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">rest</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">{</span><span class="string" style="color: #98C379; ">:eq</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">elem</span><span class="text" style="color: #ABB2BF; ">}</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">{</span><span class="string" style="color: #98C379; ">:ins</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">elem</span><span class="text" style="color: #ABB2BF; ">}</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">{</span><span class="string" style="color: #98C379; ">:eq</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">other</span><span class="text" style="color: #ABB2BF; ">}</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">acc</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="function" style="color: #61AFEF; ">compact_reverse</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">rest</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">{</span><span class="string" style="color: #98C379; ">:ins</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">elem</span><span class="text" style="color: #ABB2BF; ">}</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">{</span><span class="string" style="color: #98C379; ">:eq</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">elem</span> <span class="operator" style="color: #C678DD; ">++</span> <span class="text" style="color: #ABB2BF; ">other</span><span class="text" style="color: #ABB2BF; ">}</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">acc</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">)</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">compact_reverse</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">{</span><span class="text" style="color: #ABB2BF; ">kind</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">elem</span><span class="text" style="color: #ABB2BF; ">}</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">rest</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">acc</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="function" style="color: #61AFEF; ">compact_reverse</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">rest</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">{</span><span class="text" style="color: #ABB2BF; ">kind</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">elem</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">}</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">acc</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">)</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">each_diagonal</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">diag</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">limit</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="comment" style="font-style: italic; color: #5C6370; ">_paths</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">next_paths</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="comment" style="font-style: italic; color: #5C6370; ">_diff_script</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="text" style="color: #ABB2BF; ">diag</span> <span class="operator" style="color: #C678DD; ">&gt;</span> <span class="text" style="color: #ABB2BF; ">limit</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="text" style="color: #ABB2BF; ">{</span><span class="string" style="color: #98C379; ">:next</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="module" style="color: #61AFEF; ">:lists</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">reverse</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">next_paths</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">}</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">each_diagonal</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">diag</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">limit</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">paths</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">next_paths</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">diff_script</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="text" style="color: #ABB2BF; ">{</span><span class="text" style="color: #ABB2BF; ">path</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">rest</span><span class="text" style="color: #ABB2BF; ">}</span> <span class="operator" style="color: #C678DD; ">=</span> <span class="function" style="color: #61AFEF; ">proceed_path</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">diag</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">limit</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">paths</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">diff_script</span><span class="text" style="color: #ABB2BF; ">)</span>

    <span class="keyword" style="color: #E06C75; ">case</span> <span class="function" style="color: #61AFEF; ">follow_snake</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">path</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
      <span class="text" style="color: #ABB2BF; ">{</span><span class="string" style="color: #98C379; ">:cont</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">path</span><span class="text" style="color: #ABB2BF; ">}</span> <span class="operator" style="color: #C678DD; ">-&gt;</span> <span class="function" style="color: #61AFEF; ">each_diagonal</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">diag</span> <span class="operator" style="color: #C678DD; ">+</span> <span class="text" style="color: #ABB2BF; ">2</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">limit</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">rest</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">path</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">next_paths</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">diff_script</span><span class="text" style="color: #ABB2BF; ">)</span>
      <span class="text" style="color: #ABB2BF; ">{</span><span class="string" style="color: #98C379; ">:done</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">edits</span><span class="text" style="color: #ABB2BF; ">}</span> <span class="operator" style="color: #C678DD; ">-&gt;</span> <span class="text" style="color: #ABB2BF; ">{</span><span class="string" style="color: #98C379; ">:done</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">edits</span><span class="text" style="color: #ABB2BF; ">}</span>
    <span class="keyword" style="color: #E06C75; ">end</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">proceed_path</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">0</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">0</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">path</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="comment" style="font-style: italic; color: #5C6370; ">_diff_script</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="string" style="color: #98C379; ">do: </span><span class="text" style="color: #ABB2BF; ">{</span><span class="text" style="color: #ABB2BF; ">path</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">}</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">proceed_path</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">diag</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">limit</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">path</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="comment" style="font-style: italic; color: #5C6370; ">_</span><span class="text" style="color: #ABB2BF; ">]</span> <span class="operator" style="color: #C678DD; ">=</span> <span class="text" style="color: #ABB2BF; ">paths</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">diff_script</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="text" style="color: #ABB2BF; ">diag</span> <span class="operator" style="color: #C678DD; ">==</span> <span class="operator" style="color: #C678DD; ">-</span><span class="text" style="color: #ABB2BF; ">limit</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="text" style="color: #ABB2BF; ">{</span><span class="function" style="color: #61AFEF; ">move_down</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">path</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">diff_script</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">paths</span><span class="text" style="color: #ABB2BF; ">}</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">proceed_path</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">diag</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">limit</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">path</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">diff_script</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="text" style="color: #ABB2BF; ">diag</span> <span class="operator" style="color: #C678DD; ">==</span> <span class="text" style="color: #ABB2BF; ">limit</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="text" style="color: #ABB2BF; ">{</span><span class="function" style="color: #61AFEF; ">move_right</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">path</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">diff_script</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">}</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">proceed_path</span><span class="text" style="color: #ABB2BF; ">(</span><span class="comment" style="font-style: italic; color: #5C6370; ">_diag</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="comment" style="font-style: italic; color: #5C6370; ">_limit</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">path1</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">path2</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">rest</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">diff_script</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="keyword" style="color: #E06C75; ">if</span> <span class="function" style="color: #61AFEF; ">elem</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">path1</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">0</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">&gt;</span> <span class="function" style="color: #61AFEF; ">elem</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">path2</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">0</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
      <span class="text" style="color: #ABB2BF; ">{</span><span class="function" style="color: #61AFEF; ">move_right</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">path1</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">diff_script</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">path2</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">rest</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">}</span>
    <span class="keyword" style="color: #E06C75; ">else</span>
      <span class="text" style="color: #ABB2BF; ">{</span><span class="function" style="color: #61AFEF; ">move_down</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">path2</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">diff_script</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">path2</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">rest</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">}</span>
    <span class="keyword" style="color: #E06C75; ">end</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">move_right</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">{</span><span class="text" style="color: #ABB2BF; ">y</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">elem1</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">rest1</span><span class="text" style="color: #ABB2BF; ">]</span> <span class="operator" style="color: #C678DD; ">=</span> <span class="text" style="color: #ABB2BF; ">list1</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">elem2</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">rest2</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">edits</span><span class="text" style="color: #ABB2BF; ">}</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">diff_script</span><span class="text" style="color: #ABB2BF; ">)</span>
       <span class="keyword" style="color: #E06C75; ">when</span> <span class="text" style="color: #ABB2BF; ">diff_script</span> <span class="operator" style="color: #C678DD; ">!=</span> <span class="constant" style="color: #56B6C2; ">nil</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="keyword" style="color: #E06C75; ">if</span> <span class="text" style="color: #ABB2BF; ">diff</span> <span class="operator" style="color: #C678DD; ">=</span> <span class="text" style="color: #ABB2BF; ">diff_script</span><span class="operator" style="color: #C678DD; ">.</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">elem1</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">elem2</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
      <span class="text" style="color: #ABB2BF; ">{</span><span class="text" style="color: #ABB2BF; ">y</span> <span class="operator" style="color: #C678DD; ">+</span> <span class="text" style="color: #ABB2BF; ">1</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">rest1</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">rest2</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">{</span><span class="string" style="color: #98C379; ">:diff</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">diff</span><span class="text" style="color: #ABB2BF; ">}</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">edits</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">}</span>
    <span class="keyword" style="color: #E06C75; ">else</span>
      <span class="text" style="color: #ABB2BF; ">{</span><span class="text" style="color: #ABB2BF; ">y</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">list1</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">rest2</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">{</span><span class="string" style="color: #98C379; ">:ins</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">elem2</span><span class="text" style="color: #ABB2BF; ">}</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">edits</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">}</span>
    <span class="keyword" style="color: #E06C75; ">end</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">move_right</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">{</span><span class="text" style="color: #ABB2BF; ">y</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">list1</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">elem</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">rest</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">edits</span><span class="text" style="color: #ABB2BF; ">}</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="comment" style="font-style: italic; color: #5C6370; ">_diff_script</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="text" style="color: #ABB2BF; ">{</span><span class="text" style="color: #ABB2BF; ">y</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">list1</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">rest</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">{</span><span class="string" style="color: #98C379; ">:ins</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">elem</span><span class="text" style="color: #ABB2BF; ">}</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">edits</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">}</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">move_right</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">{</span><span class="text" style="color: #ABB2BF; ">y</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">list1</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">edits</span><span class="text" style="color: #ABB2BF; ">}</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="comment" style="font-style: italic; color: #5C6370; ">_diff_script</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="text" style="color: #ABB2BF; ">{</span><span class="text" style="color: #ABB2BF; ">y</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">list1</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">edits</span><span class="text" style="color: #ABB2BF; ">}</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">move_down</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">{</span><span class="text" style="color: #ABB2BF; ">y</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">elem1</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">rest1</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">elem2</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">rest2</span><span class="text" style="color: #ABB2BF; ">]</span> <span class="operator" style="color: #C678DD; ">=</span> <span class="text" style="color: #ABB2BF; ">list2</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">edits</span><span class="text" style="color: #ABB2BF; ">}</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">diff_script</span><span class="text" style="color: #ABB2BF; ">)</span>
       <span class="keyword" style="color: #E06C75; ">when</span> <span class="text" style="color: #ABB2BF; ">diff_script</span> <span class="operator" style="color: #C678DD; ">!=</span> <span class="constant" style="color: #56B6C2; ">nil</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="keyword" style="color: #E06C75; ">if</span> <span class="text" style="color: #ABB2BF; ">diff</span> <span class="operator" style="color: #C678DD; ">=</span> <span class="text" style="color: #ABB2BF; ">diff_script</span><span class="operator" style="color: #C678DD; ">.</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">elem1</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">elem2</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
      <span class="text" style="color: #ABB2BF; ">{</span><span class="text" style="color: #ABB2BF; ">y</span> <span class="operator" style="color: #C678DD; ">+</span> <span class="text" style="color: #ABB2BF; ">1</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">rest1</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">rest2</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">{</span><span class="string" style="color: #98C379; ">:diff</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">diff</span><span class="text" style="color: #ABB2BF; ">}</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">edits</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">}</span>
    <span class="keyword" style="color: #E06C75; ">else</span>
      <span class="text" style="color: #ABB2BF; ">{</span><span class="text" style="color: #ABB2BF; ">y</span> <span class="operator" style="color: #C678DD; ">+</span> <span class="text" style="color: #ABB2BF; ">1</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">rest1</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">list2</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">{</span><span class="string" style="color: #98C379; ">:del</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">elem1</span><span class="text" style="color: #ABB2BF; ">}</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">edits</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">}</span>
    <span class="keyword" style="color: #E06C75; ">end</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">move_down</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">{</span><span class="text" style="color: #ABB2BF; ">y</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">elem</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">rest</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">list2</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">edits</span><span class="text" style="color: #ABB2BF; ">}</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="comment" style="font-style: italic; color: #5C6370; ">_diff_script</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="text" style="color: #ABB2BF; ">{</span><span class="text" style="color: #ABB2BF; ">y</span> <span class="operator" style="color: #C678DD; ">+</span> <span class="text" style="color: #ABB2BF; ">1</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">rest</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">list2</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">{</span><span class="string" style="color: #98C379; ">:del</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">elem</span><span class="text" style="color: #ABB2BF; ">}</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">edits</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">}</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">move_down</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">{</span><span class="text" style="color: #ABB2BF; ">y</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">list2</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">edits</span><span class="text" style="color: #ABB2BF; ">}</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="comment" style="font-style: italic; color: #5C6370; ">_diff_script</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="text" style="color: #ABB2BF; ">{</span><span class="text" style="color: #ABB2BF; ">y</span> <span class="operator" style="color: #C678DD; ">+</span> <span class="text" style="color: #ABB2BF; ">1</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">list2</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">edits</span><span class="text" style="color: #ABB2BF; ">}</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">follow_snake</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">{</span><span class="text" style="color: #ABB2BF; ">y</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">elem</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">rest1</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">elem</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">rest2</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">edits</span><span class="text" style="color: #ABB2BF; ">}</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="function" style="color: #61AFEF; ">follow_snake</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">{</span><span class="text" style="color: #ABB2BF; ">y</span> <span class="operator" style="color: #C678DD; ">+</span> <span class="text" style="color: #ABB2BF; ">1</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">rest1</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">rest2</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">{</span><span class="string" style="color: #98C379; ">:eq</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">elem</span><span class="text" style="color: #ABB2BF; ">}</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">edits</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">}</span><span class="text" style="color: #ABB2BF; ">)</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">follow_snake</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">{</span><span class="comment" style="font-style: italic; color: #5C6370; ">_y</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">edits</span><span class="text" style="color: #ABB2BF; ">}</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="text" style="color: #ABB2BF; ">{</span><span class="string" style="color: #98C379; ">:done</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">edits</span><span class="text" style="color: #ABB2BF; ">}</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">follow_snake</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">path</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="text" style="color: #ABB2BF; ">{</span><span class="string" style="color: #98C379; ">:cont</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">path</span><span class="text" style="color: #ABB2BF; ">}</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370; ">## Helpers</span>

  <span class="comment" style="font-style: italic; color: #5C6370; "># replace_at</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">do_replace_at</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="comment" style="font-style: italic; color: #5C6370; ">_index</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="comment" style="font-style: italic; color: #5C6370; ">_value</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">]</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">do_replace_at</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="comment" style="font-style: italic; color: #5C6370; ">_old</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">rest</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">0</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">value</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">value</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">rest</span><span class="text" style="color: #ABB2BF; ">]</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">do_replace_at</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">head</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">tail</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">index</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">value</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">head</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="function" style="color: #61AFEF; ">do_replace_at</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">tail</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">index</span> <span class="operator" style="color: #C678DD; ">-</span> <span class="text" style="color: #ABB2BF; ">1</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">value</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">]</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370; "># insert_at</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">do_insert_at</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="comment" style="font-style: italic; color: #5C6370; ">_index</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">value</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">value</span><span class="text" style="color: #ABB2BF; ">]</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">do_insert_at</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">0</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">value</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">value</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">]</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">do_insert_at</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">head</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">tail</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">index</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">value</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">head</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="function" style="color: #61AFEF; ">do_insert_at</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">tail</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">index</span> <span class="operator" style="color: #C678DD; ">-</span> <span class="text" style="color: #ABB2BF; ">1</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">value</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">]</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370; "># update_at</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">do_update_at</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">value</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">0</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">fun</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">fun</span><span class="operator" style="color: #C678DD; ">.</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">value</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">]</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">do_update_at</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">head</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">tail</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">index</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">fun</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">head</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="function" style="color: #61AFEF; ">do_update_at</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">tail</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">index</span> <span class="operator" style="color: #C678DD; ">-</span> <span class="text" style="color: #ABB2BF; ">1</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">fun</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">]</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">do_update_at</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="comment" style="font-style: italic; color: #5C6370; ">_index</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="comment" style="font-style: italic; color: #5C6370; ">_fun</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">]</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370; "># pop_at</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">do_pop_at</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="comment" style="font-style: italic; color: #5C6370; ">_index</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">default</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">acc</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="text" style="color: #ABB2BF; ">{</span><span class="text" style="color: #ABB2BF; ">default</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="module" style="color: #61AFEF; ">:lists</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">reverse</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">acc</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">}</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">do_pop_at</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">head</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">tail</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">0</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="comment" style="font-style: italic; color: #5C6370; ">_default</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">acc</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="text" style="color: #ABB2BF; ">{</span><span class="text" style="color: #ABB2BF; ">head</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="module" style="color: #61AFEF; ">:lists</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">reverse</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">acc</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">tail</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">}</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">do_pop_at</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">head</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">tail</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">index</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">default</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">acc</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="function" style="color: #61AFEF; ">do_pop_at</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">tail</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">index</span> <span class="operator" style="color: #C678DD; ">-</span> <span class="text" style="color: #ABB2BF; ">1</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">default</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">head</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">acc</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">)</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="comment" style="font-style: italic; color: #5C6370; "># zip</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">do_zip</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">acc</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="text" style="color: #ABB2BF; ">converter</span> <span class="operator" style="color: #C678DD; ">=</span> <span class="keyword" style="color: #E06C75; ">fn</span> <span class="text" style="color: #ABB2BF; ">x</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">acc</span> <span class="operator" style="color: #C678DD; ">-&gt;</span> <span class="function" style="color: #61AFEF; ">do_zip_each</span><span class="text" style="color: #ABB2BF; ">(</span><span class="function" style="color: #61AFEF; ">to_list</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">x</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">acc</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">end</span>

    <span class="keyword" style="color: #E06C75; ">case</span> <span class="module" style="color: #61AFEF; ">:lists</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">mapfoldl</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">converter</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
      <span class="text" style="color: #ABB2BF; ">{</span><span class="comment" style="font-style: italic; color: #5C6370; ">_</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="constant" style="color: #56B6C2; ">nil</span><span class="text" style="color: #ABB2BF; ">}</span> <span class="operator" style="color: #C678DD; ">-&gt;</span>
        <span class="module" style="color: #61AFEF; ">:lists</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">reverse</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">acc</span><span class="text" style="color: #ABB2BF; ">)</span>

      <span class="text" style="color: #ABB2BF; ">{</span><span class="text" style="color: #ABB2BF; ">mlist</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">heads</span><span class="text" style="color: #ABB2BF; ">}</span> <span class="operator" style="color: #C678DD; ">-&gt;</span>
        <span class="function" style="color: #61AFEF; ">do_zip</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">mlist</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="function" style="color: #61AFEF; ">to_tuple</span><span class="text" style="color: #ABB2BF; ">(</span><span class="module" style="color: #61AFEF; ">:lists</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">reverse</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">heads</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">acc</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">)</span>
    <span class="keyword" style="color: #E06C75; ">end</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">do_zip_each</span><span class="text" style="color: #ABB2BF; ">(</span><span class="comment" style="font-style: italic; color: #5C6370; ">_</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="constant" style="color: #56B6C2; ">nil</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="text" style="color: #ABB2BF; ">{</span><span class="constant" style="color: #56B6C2; ">nil</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="constant" style="color: #56B6C2; ">nil</span><span class="text" style="color: #ABB2BF; ">}</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">do_zip_each</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">head</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">tail</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">acc</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="text" style="color: #ABB2BF; ">{</span><span class="text" style="color: #ABB2BF; ">tail</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">head</span> <span class="operator" style="color: #C678DD; ">|</span> <span class="text" style="color: #ABB2BF; ">acc</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">}</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">do_zip_each</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">[</span><span class="text" style="color: #ABB2BF; ">]</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="comment" style="font-style: italic; color: #5C6370; ">_</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">do</span>
    <span class="text" style="color: #ABB2BF; ">{</span><span class="constant" style="color: #56B6C2; ">nil</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="constant" style="color: #56B6C2; ">nil</span><span class="text" style="color: #ABB2BF; ">}</span>
  <span class="keyword" style="color: #E06C75; ">end</span>

  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">to_list</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">tuple</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="function" style="color: #61AFEF; ">is_tuple</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">tuple</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="string" style="color: #98C379; ">do: </span><span class="module" style="color: #61AFEF; ">Tuple</span><span class="operator" style="color: #C678DD; ">.</span><span class="function" style="color: #61AFEF; ">to_list</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">tuple</span><span class="text" style="color: #ABB2BF; ">)</span>
  <span class="keyword" style="color: #E06C75; ">defp</span> <span class="function" style="color: #61AFEF; ">to_list</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span> <span class="keyword" style="color: #E06C75; ">when</span> <span class="function" style="color: #61AFEF; ">is_list</span><span class="text" style="color: #ABB2BF; ">(</span><span class="text" style="color: #ABB2BF; ">list</span><span class="text" style="color: #ABB2BF; ">)</span><span class="text" style="color: #ABB2BF; ">,</span> <span class="string" style="color: #98C379; ">do: </span><span class="text" style="color: #ABB2BF; ">list</span>
<span class="keyword" style="color: #E06C75; ">end</span>
</code></pre>
</body>
</html>
